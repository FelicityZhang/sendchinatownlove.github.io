{"version":3,"sources":["utilities/api/endpoints.ts","utilities/api/interactionManager.ts","utilities/index.ts","utilities/api/index.ts","components/ModalBuyMealNew/styles.module.scss","utilities/general/responsive.tsx","components/MerchantsPage/images/gam_icon_step1.svg","components/MerchantsPage/images/gam_icon_step2.svg","components/MerchantsPage/images/gam_icon_step3.svg","components/MerchantsPage/images/gam_icon_step4.svg","components/ModalAmount/ModalAmount.tsx","components/ModalBuyMealNew/CamapignInstructions.tsx","components/ModalBuyMealNew/ModalBuyMealPool.tsx","components/ModalPayment/SquareCardForm.tsx","components/ModalPayment/SubmissionButton.tsx","consts.ts","components/ModalPayment/SquareModal.tsx","components/ModalConfirmation/ModalConfirmation.tsx","components/Modal/Modal.tsx","components/ModalConfirmation/chinatown-logo.png"],"names":["baseUrl","process","sellers","charges","vouchers","passportVouchers","contacts","sponsorSellers","getSellers","lang","a","axios","get","params","locale","localeFromLanguage","getSeller","id","makeSquarePayment","nonce","sellerId","payment","buyer","isDistribution","campaignId","email","name","idempotencyKey","idempotency_key","isSubscribed","is_subscribed","post","is_square","line_items","seller_id","is_distribution","campaign_id","headers","then","res","catch","err","getVoucher","updateVoucher","amount","put","getMerchantGiftCards","secret","language","getCampaigns","getCampaignsForMerchant","getDistributor","getParticipatingMerchant","getParticipatingMerchantTickets","tickets_secret","page","items","printed","associated","getPassportEmailId","getContactInfo","passportId","createPassportEmailId","instagram","updatePassportInstagram","checkForValidTicket","ticket_id","updateTicketContactId","contact_id","getPassportTickets","getParticipatingSeller","sendRedeemTicketsEmail","getLocationById","locationId","getAllSponsors","getOneSponsor","rewardId","redeemReward","auth_token","tickets","module","exports","smallScreens","tabletScreens","Modal","props","value","t","useTranslation","useModalPaymentState","useState","isCustomAmount","setIsCustomAmount","selected","setSelected","dispatch","useModalPaymentDispatch","handleAmount","customAmount","text","type","SET_AMOUNT","payload","headerText","purchaseType","ContentContainer","data-testid","Header","sellerName","AmountContainer","htmlFor","SelectAmtContainer","map","key","className","onClick","e","CustomAmountContainer","CustomAmountInput","onFocus","onChange","target","onKeyDown","evt","preventDefault","min","max","Number","ErrorMessage","NextButton","ReactPixel","trackCustom","SET_MODAL_VIEW","disabled","test","styled","form","div","input","button","CampaignInstructions","styles","modalBackground","modalInstructionsGrid","gam_icon_step1","gam_icon_step2","gam_icon_step3","gam_icon_step4","idx","step","icon","generateStep","modalStepGrid","src","alt","modalStepText","uppercase","bold","numberOfMeals","setNumberOfMeals","valueInt","parseInt","isNaN","totalMealPrice","costPerMeal","String","totalAmount","useEffect","header","description","href","rel","link","amountContainer","selectAmtContainer","selectAmt","classnames","customAmt","placeholder","separator","total","nextBtn","SquareCardForm","SquareCardRow","SquareCardItem","SubmissionButton","canSubmit","context","useContext","Context","submittable","onCreateNonce","SquareErrors","ADDRESS_VERIFICATION_FAILURE","ALLOWABLE_PIN_TRIES_EXCEEDED","BAD_EXPIRATION","CARDHOLDER_INSUFFICIENT_PERMISSIONS","CARD_EXPIRED","CARD_PROCESSING_NOT_ENABLED","CARD_NOT_SUPPORTED","CARD_TOKEN_EXPIRED","CARD_TOKEN_USED","CHIP_INSERTION_REQUIRED","CVV_FAILURE","EXPIRATION_FAILURE","GENERIC_DECLINE","GIFT_CARD_AVAILABLE_AMOUNT","INSUFFICIENT_FUNDS","INSUFFICIENT_PERMISSIONS","INVALID_ACCOUNT","INVALID_CARD_DATA","INVALID_EMAIL_ADDRESS","INVALID_EXPIRATION","INVALID_FEES","INVALID_LOCATION","INVALID_PIN","INVALID_POSTAL_CODE","MANUALLY_ENTERED_PAYMENT_NOT_SUPPORTED","PAN_FAILURE","PAYMENT_LIMIT_EXCEEDED","TEMPORARY_ERROR","TRANSACTION_LIMIT","VOICE_FAILURE","CARD_DECLINED_VERIFICATION_REQUIRED","SquareModal","applicationId","nonProfitLocationId","isTermsChecked","setTermsChecked","isSubscriptionChecked","setSubscriptionChecked","setName","setEmail","errorMessages","setErrorsMessages","setCanSubmit","mealText","numberOfMealsText","purchaseTypePhrase","shouldLowerCase","length","EMAIL_REGEX","PaymentContainer","Subheader","RowFormat","LabelText","InputText","pattern","source","required","SquareFormContainer","sandbox","cardNonceResponseReceived","errors","times","currency","item_type","quantity","status","response","responseErrors","data","message","code","detail","newErrors","error","obj","formId","apiWrapper","errorMessage","CheckboxContainer","Checkbox","inputProps","checked","Disclaimer","setDisclaimerLanguage","ButtonRow","BackButton","label","ModalConfirmation","Container","confirmationText","ThankYouImage","confirmationPic","FinishButton","closeModal","img","uuid","modalView","UPDATE_SELLER_DATA","amount_raised","CLOSE_MODAL","undefined","ModalContainer","CloseButtonContainer","CloseButton","ViewContainer","ModalAmount"],"mappings":"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","file":"static/js/3.2a12c15a.chunk.js","sourcesContent":["const baseUrl = process.env.REACT_APP_API_ENDPOINT!;\n\nexport const sellers = baseUrl + 'sellers/';\nexport const charges = baseUrl + 'charges';\nexport const vouchers = baseUrl + 'gift_cards/';\nexport const campaigns = baseUrl + 'campaigns/';\nexport const distributors = baseUrl + 'distributors/';\nexport const passportVouchers = baseUrl + 'participating_sellers/';\nexport const contacts = baseUrl + 'contacts/';\nexport const tickets = baseUrl + 'tickets/';\nexport const participatingSellers = baseUrl + 'participating_sellers/';\nexport const sponsorSellers = baseUrl + 'sponsor_sellers/';\nexport const locations = baseUrl + 'locations/';\n","import axios from 'axios';\nimport { CardElement } from '@stripe/react-stripe-js';\nimport { Buyer, PaymentParams, SquareLineItems } from './types';\nimport {\n  charges,\n  sellers,\n  vouchers,\n  campaigns,\n  distributors,\n  passportVouchers,\n  contacts,\n  tickets,\n  participatingSellers,\n  sponsorSellers,\n  locations,\n} from './endpoints';\n\n// Fix return typing\nexport const getSellers = async (lang?: string): Promise<any> => {\n  return await axios.get(sellers, {\n    params: { locale: localeFromLanguage(lang) },\n  });\n};\n\n// Fix return typing\nexport const getSeller = async (id: string, lang?: string): Promise<any> => {\n  return await axios.get(sellers + id, {\n    params: { locale: localeFromLanguage(lang) },\n  });\n};\n\n// TODO(ArtyEmsee): add typing for stripe elements\nexport const makePayment = async (\n  stripe: any,\n  elements: any,\n  payment: PaymentParams,\n  buyer: Buyer\n) => {\n  const { email, name } = buyer;\n\n  // TODO(ArtyEmsee): abstract api call, create global object for headers\n  await axios\n    .post(\n      charges,\n      {\n        is_square: false,\n        line_items: [payment],\n        email: email,\n      },\n      { headers: { 'Access-Control-Allow-Origin': '*' } }\n    )\n    .then(async (res) => {\n      // TODO(ArtyEmsee): fix response to success\n      if (!stripe || !elements) return;\n      else {\n        const cardElement = elements!.getElement(CardElement);\n        const result = await stripe!.confirmCardPayment(\n          `${res.data.client_secret}`,\n          {\n            payment_method: {\n              card: cardElement!,\n              billing_details: {\n                name: name,\n                email: email,\n              },\n            },\n          }\n        );\n\n        if (result.error) {\n          console.log(result.error.message);\n        } else {\n          if (result.paymentIntent?.status === 'succeeded') {\n            console.log(\n              result.paymentIntent?.status,\n              'The payment has been processed!'\n            );\n          }\n        }\n      }\n    });\n\n  // TODO(ArtyEmsee): fix response to error\n};\n\nexport const makeSquarePayment = async (\n  nonce: string,\n  sellerId: string,\n  payment: SquareLineItems,\n  buyer: Buyer,\n  isDistribution: boolean,\n  campaignId?: string\n) => {\n  const { email, name } = buyer;\n  const idempotencyKey = buyer.idempotency_key;\n  const isSubscribed = buyer.is_subscribed;\n\n  return await axios\n    .post(\n      charges,\n      {\n        is_square: true,\n        nonce,\n        line_items: payment,\n        email,\n        name,\n        seller_id: sellerId,\n        idempotency_key: idempotencyKey,\n        is_subscribed: isSubscribed,\n        is_distribution: isDistribution, // TODO: deprecate this in favor of campaignId\n        campaign_id: campaignId,\n      },\n      { headers: { 'Access-Control-Allow-Origin': '*' } }\n    )\n    .then(async (res) => {\n      return res;\n    })\n    .catch((err) => {\n      throw err;\n    });\n};\n\nexport const getVoucher = async (id: string) =>\n  axios\n    .get(vouchers + id)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const updateVoucher = async (id: string, amount: number) =>\n  axios\n    .put(vouchers + id, { amount })\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getMerchantGiftCards = async (seller_id: string, secret: string) =>\n  axios.get(sellers + seller_id + '/gift_cards/' + secret).then((res) => res); // don't catch error, throw it up the stack\n\nfunction localeFromLanguage(language?: string) {\n  switch (language) {\n    case 'cn':\n      return 'zh-CN';\n    case 'en':\n    default:\n      return 'en';\n  }\n}\n\nexport const getCampaigns = async (): Promise<any> => {\n  return await axios\n    .get(campaigns)\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const getCampaignsForMerchant = async (\n  seller_id: string\n): Promise<any> => {\n  return await axios\n    .get(sellers + seller_id + '/campaigns')\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const getDistributor = async (id: string): Promise<any> => {\n  return await axios\n    .get(distributors + id)\n    .then((res) => res)\n    .catch((err) => err);\n};\n\n// for passport crawl voucher print outs\nexport const getParticipatingMerchant = async (id: string) =>\n  axios\n    .get(passportVouchers + id)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getParticipatingMerchantTickets = async (\n  id: string,\n  tickets_secret: string,\n  page: number | null,\n  items: number | null,\n  printed: boolean | null,\n  associated: boolean | null\n\n) => axios\n    .get(passportVouchers + id + '/tickets/' + tickets_secret, {\n      params: { page, items, printed, associated },\n    })\n    .then((res) => res)\n    .catch((err) => err);\n\n// validate passport email\nexport const getPassportEmailId = async (email: string) =>\n  axios\n    .get(contacts, {\n      params: { email },\n    })\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getContactInfo = async (passportId: string) =>\n  axios\n    .get(contacts + passportId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const createPassportEmailId = async (\n  email: string,\n  instagram: string\n) => {\n  let params = {};\n\n  if (instagram) params = { email, instagram };\n  else params = { email };\n\n  return axios\n    .post(contacts, params)\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const updatePassportInstagram = async (\n  id: string,\n  instagram: string\n) => {\n  return axios\n    .put(contacts + id, { instagram })\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const checkForValidTicket = async (ticket_id: string) =>\n  axios\n    .get(tickets + ticket_id)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const updateTicketContactId = async (\n  ticket_id: string,\n  contact_id: string\n) =>\n  axios\n    .put(tickets + ticket_id, { contact_id })\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getPassportTickets = async (passportId: string) =>\n  axios\n    .get(contacts + passportId + '/tickets')\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getParticipatingSeller = async (sellerId: string) =>\n  axios\n    .get(participatingSellers + sellerId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const sendRedeemTicketsEmail = async (passportId: string) =>\n  axios\n    .post(contacts + passportId + '/rewards')\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getLocationById = async (locationId: number) =>\n  axios\n    .get(locations + locationId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getAllSponsors = async () =>\n  axios\n    .get(sponsorSellers)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getOneSponsor = async (rewardId: number) =>\n  axios\n    .get(sponsorSellers + rewardId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const redeemReward = async (\n  contact_id: number,\n  auth_token: string,\n  tickets: Array<any>\n) =>\n  axios\n    .put(contacts + contact_id + '/tickets/' + auth_token, { tickets })\n    .then((res) => res)\n    .catch((err) => err);\n","export * from './api';\nexport * from './hooks';\n","export * from './types';\nexport * from './interactionManager';\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button--filled\":\"styles_button--filled__WxP1d\",\"button--red-filled\":\"styles_button--red-filled__16Aab\",\"button--outlined\":\"styles_button--outlined__3j0Xk\",\"button--redfilled\":\"styles_button--redfilled__2VqFG\",\"modalButton--back\":\"styles_modalButton--back__2Eg0M\",\"modalButton--outlined\":\"styles_modalButton--outlined__1_EnJ\",\"modalButton--filled\":\"styles_modalButton--filled__3Rb0W\",\"modalButton--nonfunctional\":\"styles_modalButton--nonfunctional__2Njrx\",\"modalButton--selected\":\"styles_modalButton--selected__7SUUW\",\"modalButton--outline\":\"styles_modalButton--outline__1OnDM\",\"closeButton--close\":\"styles_closeButton--close__thSx0\",\"modalForm--form\":\"styles_modalForm--form__2aHxH\",\"modalInput--input\":\"styles_modalInput--input__7T1lZ\",\"filterable-table-container\":\"styles_filterable-table-container__2hexw\",\"header-row\":\"styles_header-row__3OSF9\",\"filter-container\":\"styles_filter-container__27XLt\",\"filter-input\":\"styles_filter-input__2qkxu\",\"clear-filter\":\"styles_clear-filter__2h8SJ\",\"record-count\":\"styles_record-count__1bHO0\",\"fa\":\"styles_fa__3j6hl\",\"active\":\"styles_active__3G6q6\",\"disabled\":\"styles_disabled__31b70\",\"header\":\"styles_header__3mg9A\",\"amountContainer\":\"styles_amountContainer__3WST_\",\"selectAmtContainer\":\"styles_selectAmtContainer__2MM7j\",\"selectAmt\":\"styles_selectAmt__3faov\",\"separator\":\"styles_separator__1DAdK\",\"customAmt\":\"styles_customAmt__5bjih\",\"costPerMeal\":\"styles_costPerMeal__2mVM9\",\"nextBtn\":\"styles_nextBtn__2felb\",\"total\":\"styles_total__3Vbzd\",\"illustrationsContainer\":\"styles_illustrationsContainer__1Ied5\",\"illustrationLeading\":\"styles_illustrationLeading__hFCKP\",\"illustrationTrailing\":\"styles_illustrationTrailing__1K7HA\",\"explantionContainer\":\"styles_explantionContainer__2rCgX\",\"explanation\":\"styles_explanation__2yP6R\",\"donationsContainer\":\"styles_donationsContainer__3fFDi\",\"bold\":\"styles_bold__1hwij\",\"uppercase\":\"styles_uppercase__1lbqw\",\"link\":\"styles_link__aYO5H\",\"description\":\"styles_description__1ouq5\",\"modalBackground\":\"styles_modalBackground__iojBx\",\"modalInstructionsGrid\":\"styles_modalInstructionsGrid__2bPZT\",\"modalStepGrid\":\"styles_modalStepGrid__32dHO\",\"modalStepText\":\"styles_modalStepText__2pQc_\"};","/*\n * Responsive screen sizes\n */\nconst phoneScreens = 'max-width: 450px';\nconst smallScreens = 'max-width: 599px';\nconst tabletScreens = 'max-width: 899px';\nconst desktopScreens = 'max-width: 1299px';\nconst bigDesktopScreens = 'min-width: 1300px';\n\nexport {\n  phoneScreens,\n  smallScreens,\n  tabletScreens,\n  desktopScreens,\n  bigDesktopScreens,\n};\n","module.exports = __webpack_public_path__ + \"static/media/gam_icon_step1.c58f05a4.svg\";","module.exports = __webpack_public_path__ + \"static/media/gam_icon_step2.9a0ca5e8.svg\";","module.exports = __webpack_public_path__ + \"static/media/gam_icon_step3.ad0c5291.svg\";","module.exports = __webpack_public_path__ + \"static/media/gam_icon_step4.b9832c02.svg\";","import React, { useState } from 'react';\nimport {\n  useModalPaymentState,\n  useModalPaymentDispatch,\n} from '../../utilities/hooks/ModalPaymentContext/context';\nimport {\n  SET_MODAL_VIEW,\n  SET_AMOUNT,\n} from '../../utilities/hooks/ModalPaymentContext/constants';\nimport { useTranslation } from 'react-i18next';\nimport styled from 'styled-components';\nimport ReactPixel from 'react-facebook-pixel';\n\nexport interface Props {\n  purchaseType: string;\n  sellerId: string;\n  sellerName: string;\n}\n\nexport const Modal = (props: Props) => {\n  const { t } = useTranslation();\n\n  const { amount } = useModalPaymentState();\n  const [isCustomAmount, setIsCustomAmount] = useState(true);\n  const [selected, setSelected] = useState('');\n  const dispatch = useModalPaymentDispatch();\n  const minAmount = 5;\n  const maxAmount = 10000;\n\n  const handleAmount = (value: string, customAmount: boolean, text: string) => {\n    setSelected(text);\n    setIsCustomAmount(customAmount);\n    dispatch({ type: SET_AMOUNT, payload: value });\n  };\n\n  const openModal = (e: any) => {\n    ReactPixel.trackCustom('PaymentNextButtonClick', { amount: amount });\n    e.preventDefault();\n    dispatch({ type: SET_MODAL_VIEW, payload: 1 });\n  };\n\n  const validAmount = (value: string) => {\n    const r = /^[0-9]+$/;\n    return r.test(value);\n  };\n\n  const buttonAmounts = [\n    { value: '10', text: '$10' },\n    { value: '25', text: '$25' },\n    { value: '50', text: '$50' },\n    { value: '100', text: '$100' },\n  ];\n\n  const headerText =\n    props.purchaseType === 'donation'\n      ? t('purchase.donation')\n      : t('purchase.voucher');\n\n  return (\n    <ContentContainer id=\"donation-form\" data-testid=\"Modal Amount\">\n      <Header>\n        {headerText} {props.sellerName}\n      </Header>\n\n      {props.sellerId === 'send-chinatown-love' && (\n        <p>{t('donationPool.description2')}</p>\n      )}\n      <p>{t('paymentProcessing.amount.header')}</p>\n\n      <AmountContainer>\n        <label htmlFor=\"select-amount\">\n          {t('paymentProcessing.amount.label1')}\n        </label>\n        <br />\n        <SelectAmtContainer>\n          {buttonAmounts.map((amount) => (\n            <button\n              key={amount.text}\n              type=\"button\"\n              className={\n                selected === amount.text\n                  ? 'modalButton--selected'\n                  : 'modalButton--outlined'\n              }\n              onClick={(e) => {\n                handleAmount(amount.value, false, amount.text);\n              }}\n            >\n              {amount.text}\n            </button>\n          ))}\n        </SelectAmtContainer>\n        <label htmlFor=\"custom-amount\">\n          {t('paymentProcessing.amount.label2')}\n        </label>\n        <br />\n        <CustomAmountContainer>\n          <CustomAmountInput\n            name=\"custom-amount\"\n            type=\"number\"\n            onFocus={(e) => handleAmount('', true, '')}\n            className={'modalInput--input'}\n            onChange={(e) => {\n              handleAmount(e.target.value, true, '');\n            }}\n            onKeyDown={(evt) =>\n              (evt.key === 'e' ||\n                evt.key === '+' ||\n                evt.key === '-' ||\n                evt.key === '.') &&\n              evt.preventDefault()\n            }\n            value={isCustomAmount ? amount : ''}\n            min=\"5\"\n            max=\"10000\"\n          />\n        </CustomAmountContainer>\n        {Number(amount) < minAmount && isCustomAmount && (\n          <ErrorMessage>\n            {t('paymentProcessing.amount.minimum')}{' '}\n            {props.purchaseType === 'gift_card' ? 'voucher' : 'donation'}{' '}\n            {t('paymentProcessing.amount.amount')}: $5\n          </ErrorMessage>\n        )}\n        {Number(amount) > maxAmount && isCustomAmount && (\n          <ErrorMessage>\n            {t('paymentProcessing.amount.maximum')}{' '}\n            {props.purchaseType === 'gift_card' ? 'voucher' : 'donation'}{' '}\n            {t('paymentProcessing.amount.amount')}: $10000\n          </ErrorMessage>\n        )}\n      </AmountContainer>\n\n      <NextButton\n        type=\"button\"\n        className={'modalButton--filled'}\n        onClick={openModal}\n        disabled={\n          Number(amount) < minAmount ||\n          Number(amount) > maxAmount ||\n          !validAmount(amount)\n        }\n      >\n        {t('paymentProcessing.amount.submit')}\n      </NextButton>\n    </ContentContainer>\n  );\n};\n\nexport default Modal;\n\nconst ContentContainer = styled.form`\n  height: 360px;\n`;\n\nconst AmountContainer = styled.div`\n  background-color: #f7f7f7;\n  padding: 25px 35px;\n  margin-top: 30px;\n`;\n\nconst SelectAmtContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-evenly;\n  flex-wrap: wrap;\n  margin: 15px 0px;\n`;\n\nconst CustomAmountContainer = styled.div`\n  position: relative;\n  display: inline;\n\n  :before {\n    content: '$';\n    position: absolute;\n    top: 0;\n    left: 8px;\n    z-index: 1;\n  }\n`;\n\nconst CustomAmountInput = styled.input`\n  width: 250px;\n  border: 1px solid #121212;\n  margin-top: 8px;\n  padding-left: 2em;\n\n  :invalid {\n    border: 1px solid red;\n  }\n\n  @media (max-width: 450px) {\n    width: 100%;\n  }\n`;\n\nconst ErrorMessage = styled.div`\n  color: red;\n  font-size: 13px;\n`;\n\nconst NextButton = styled.button`\n  position: relative;\n  float: right;\n  right: 0px;\n  bottom: -25px;\n`;\n\nconst Header = styled.div`\n  font-family: 'Open Sans', sans-serif;\n  font-size: 30px;\n  font-weight: 600;\n`;\n","import React from 'react';\nimport styles from './styles.module.scss';\nimport { useTranslation } from 'react-i18next';\n\nimport gam_icon_step1 from '../MerchantsPage/images/gam_icon_step1.svg';\nimport gam_icon_step2 from '../MerchantsPage/images/gam_icon_step2.svg';\nimport gam_icon_step3 from '../MerchantsPage/images/gam_icon_step3.svg';\nimport gam_icon_step4 from '../MerchantsPage/images/gam_icon_step4.svg';\n\nconst CampaignInstructions = () => {\n  const { t } = useTranslation();\n  return (\n    <div className={styles.modalBackground}>\n      <div className={styles.modalInstructionsGrid}>\n        {[\n          [\n            `${t('gamHome.subheading.step1')}`,\n            `${t('gamHome.subheading.step1Text')}`,\n            gam_icon_step1,\n          ],\n          [\n            `${t('gamHome.subheading.step2')}`,\n            `${t('gamHome.subheading.step2Text')}`,\n            gam_icon_step2,\n          ],\n          [\n            `${t('gamHome.subheading.step3')}`,\n            `${t('gamHome.subheading.step3Text')}`,\n            gam_icon_step3,\n          ],\n          [\n            `${t('gamHome.subheading.step4')}`,\n            `${t('gamHome.subheading.step4Text')}`,\n            gam_icon_step4,\n          ],\n        ].map(([step, text, icon], idx) => generateStep(step, text, icon, idx))}\n      </div>\n    </div>\n  );\n};\n\nexport default CampaignInstructions;\n\nconst generateStep = (step, text, icon, idx) => {\n  return (\n    <div className={styles.modalStepGrid} key={idx}>\n      <img src={icon} alt=\"icon\" />\n      <div className={styles.modalStepText}>\n        <p className={styles.uppercase}>{step}</p>\n        <p className={styles.bold}>{text}</p>\n      </div>\n    </div>\n  );\n};\n","import React, { useEffect, useState } from 'react';\nimport classnames from 'classnames';\nimport styles from './styles.module.scss';\nimport { useModalPaymentDispatch } from '../../utilities/hooks/ModalPaymentContext/context';\nimport {\n  SET_MODAL_VIEW,\n  SET_AMOUNT,\n} from '../../utilities/hooks/ModalPaymentContext/constants';\nimport { useTranslation } from 'react-i18next';\nimport CampaignInstructions from './CamapignInstructions';\nimport ReactPixel from 'react-facebook-pixel';\n\nexport interface Props {\n  purchaseType: string;\n  sellerId: string;\n  sellerName: string;\n  costPerMeal: number;\n}\n\nexport const Modal = (props: Props) => {\n  const { t } = useTranslation();\n  const dispatch = useModalPaymentDispatch();\n\n  // set initial number of meals to 1\n  const [numberOfMeals, setNumberOfMeals] = useState(1);\n\n  const handleAmount = (value: string, customAmount: boolean, text: string) => {\n    const valueInt = parseInt(value, 10);\n    setNumberOfMeals(isNaN(valueInt) ? 0 : valueInt);\n    const totalMealPrice = valueInt * props.costPerMeal;\n    dispatch({ type: SET_AMOUNT, payload: String(totalMealPrice) });\n  };\n\n  const openModal = (e: any) => {\n    ReactPixel.trackCustom('GiftMealPaymentNextButtonClick', {\n      numberOfMeals: numberOfMeals,\n    });\n    e.preventDefault();\n    dispatch({ type: SET_MODAL_VIEW, payload: 1 });\n  };\n\n  const totalMealPrice = numberOfMeals * props.costPerMeal;\n  const totalAmount = { value: totalMealPrice, text: '$' + totalMealPrice };\n  const COST_LIMIT = 10000;\n\n  useEffect(() => {\n    dispatch({ type: SET_AMOUNT, payload: String(totalMealPrice) });\n    // eslint-disable-next-line\n  }, []);\n\n  return (\n    <form data-testid=\"ModalBuyMeal\">\n      <div>\n        <div className={styles.header}>\n          {props.sellerId\n            ? t('buyMeal.header') + props.sellerName\n            : t('buyMealPool.header')}\n        </div>\n      </div>\n      <p className={styles.description}>\n        {t('buyMealPool.description.weAre')}\n        <a\n          href=\"https://www.apexforyouth.org/\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className={styles.link}\n        >\n          {' '}\n          APEX for Youth\n        </a>\n        ,\n        <a\n          href=\"http://www.lajornadany.org/\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className={styles.link}\n        >\n          {' '}\n          La Jornada Food Pantry\n        </a>\n        ,\n        <a\n          href=\"https://www.cpc-nyc.org/\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className={styles.link}\n        >\n          {' '}\n          the Chinese-American Planning Council{' '}\n        </a>\n        {t('buyMealPool.description.andRestaurants')}\n        <span className={styles.bold}>\n          {' '}\n          {t('buyMealPool.description.allItTakes')} ${props.costPerMeal}\n        </span>\n      </p>\n\n      <CampaignInstructions />\n\n      <div className={styles.amountContainer}>\n        <label htmlFor=\"select-amount\">{t('buyMeal.prompt')}</label>\n        <br />\n        <div className={styles.selectAmtContainer}>\n          <div className={styles.selectAmt}>\n            <input\n              name=\"custom-amount\"\n              type=\"number\"\n              onFocus={(e) => handleAmount('', true, '')}\n              className={classnames(styles.customAmt, 'modalInput--input')}\n              onChange={(e) => {\n                handleAmount(e.target.value, true, '');\n              }}\n              value={numberOfMeals === 0 ? '' : String(numberOfMeals)}\n              placeholder=\"# of meals\"\n              min=\"1\"\n            />\n            <span className={styles.separator}>✕</span>\n            <button\n              type=\"button\"\n              className={classnames(\n                styles.costPerMeal,\n                'modalButton--nonfunctional'\n              )}\n              disabled={true}\n            >\n              {'$' + props.costPerMeal}\n            </button>\n          </div>\n          <label className={styles.total}>\n            {t('buyMeal.totalLabel')} <b>{totalAmount.text}</b>\n          </label>\n        </div>\n        <br />\n      </div>\n\n      <button\n        type=\"button\"\n        className={classnames(styles.nextBtn, 'modalButton--filled')}\n        onClick={openModal}\n        disabled={\n          numberOfMeals < 1 || numberOfMeals > COST_LIMIT / props.costPerMeal\n        }\n      >\n        {t('paymentProcessing.amount.submit')}\n      </button>\n    </form>\n  );\n};\n\nexport default Modal;\n","import React from 'react';\nimport {\n  CreditCardNumberInput,\n  CreditCardExpirationDateInput,\n  CreditCardPostalCodeInput,\n  CreditCardCVVInput,\n} from 'react-square-payment-form';\nimport 'react-square-payment-form/lib/default.css';\nimport styled from 'styled-components';\n\ntype Props = {};\n\nconst SquareCardForm = (props: Props) => {\n  return (\n    <fieldset className=\"sq-fieldset\">\n      <CreditCardNumberInput />\n\n      <SquareCardRow>\n        <SquareCardItem>\n          <CreditCardExpirationDateInput />\n        </SquareCardItem>\n        <SquareCardItem>\n          <CreditCardCVVInput />\n        </SquareCardItem>\n        <SquareCardItem>\n          <CreditCardPostalCodeInput />\n        </SquareCardItem>\n      </SquareCardRow>\n    </fieldset>\n  );\n};\n\nexport default SquareCardForm;\n\nconst SquareCardRow = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  width: 100% !important;\n`;\n\nconst SquareCardItem = styled.div`\n  width: 30% !important;\n`;\n","import React, { useContext, useState } from 'react';\nimport { Context } from 'react-square-payment-form';\nimport ReactPixel from 'react-facebook-pixel';\n\ntype Props = {\n  canSubmit: boolean;\n};\n\nconst SubmissionButton = ({ canSubmit }: Props) => {\n  const context = useContext(Context);\n  var [submittable] = useState(false);\n\n  const handleSubmit = (evt: { preventDefault: () => void }) => {\n    ReactPixel.trackCustom('PaymentConfirmButtonClick', {});\n    evt.preventDefault();\n    context.onCreateNonce();\n  };\n\n  submittable = canSubmit;\n\n  return (\n    <button\n      type=\"button\"\n      className={'modalButton--filled'}\n      onClick={handleSubmit}\n      disabled={!submittable}\n    >\n      Confirm\n    </button>\n  );\n};\n\nexport default SubmissionButton;\n","const SquareErrors = {\n  ADDRESS_VERIFICATION_FAILURE:\n    'The card issuer declined the request because the postal code is invalid.',\n  ALLOWABLE_PIN_TRIES_EXCEEDED:\n    'The card has exhausted its available pin entry retries set by the card issuer.',\n  BAD_EXPIRATION:\n    'The card expiration date is either missing or incorrectly formatted.',\n  CARDHOLDER_INSUFFICIENT_PERMISSIONS:\n    'The card issuer has declined the transaction due to restrictions on where the card can be used.',\n  CARD_EXPIRED:\n    'The card issuer declined the request because the card is expired.',\n  CARD_PROCESSING_NOT_ENABLED:\n    'The location provided in the API call is not enabled for credit card processing.',\n  CARD_NOT_SUPPORTED: 'The card is not supported in the geographic region.',\n  CARD_TOKEN_EXPIRED: 'The provided card token (nonce) has expired.',\n  CARD_TOKEN_USED:\n    'The provided card token (nonce) was already used to process payment.',\n  CHIP_INSERTION_REQUIRED:\n    'The card issuer requires reading the card using a chip reader.',\n  CVV_FAILURE:\n    'The card issuer declined the request because the CVV value is invalid.',\n  EXPIRATION_FAILURE:\n    'The card expiration date is either invalid or indicates that the card is expired.',\n  GENERIC_DECLINE: 'An unexpected error occurred.',\n  GIFT_CARD_AVAILABLE_AMOUNT:\n    'Voucher does not have sufficient balance for requested amount and tip.',\n  INSUFFICIENT_FUNDS:\n    'This payment source has insufficient funds to cover the payment.',\n  INSUFFICIENT_PERMISSIONS:\n    'This Square account does not have the permissions to accept this payment.',\n  INVALID_ACCOUNT: 'The card issuer was not able to locate account on record.',\n  INVALID_CARD_DATA: 'Generic error - the provided card data is invalid.',\n  INVALID_EMAIL_ADDRESS: 'The provided email address is invalid.',\n  INVALID_EXPIRATION:\n    'The expiration date for the payment card is invalid. For example, it indicates a date in the past.',\n  INVALID_FEES: 'The app_fee_money on a payment is too high.',\n  INVALID_LOCATION:\n    'This Square account cannot take payments in the specified region',\n  INVALID_PIN:\n    'The card issuer declined the request because the PIN is invalid.',\n  INVALID_POSTAL_CODE: 'The postal code is incorrectly formatted.',\n  MANUALLY_ENTERED_PAYMENT_NOT_SUPPORTED:\n    'The card must be swiped, tapped, or dipped.',\n  PAN_FAILURE: 'The specified card number is invalid.',\n  PAYMENT_LIMIT_EXCEEDED:\n    'Square declined the request because the payment amount exceeded the processing limit for this merchant.',\n  TEMPORARY_ERROR: 'A temporary internal error occurred.',\n  TRANSACTION_LIMIT:\n    'The card issuer has determined the payment amount is either too high or too low.',\n  VOICE_FAILURE:\n    'The card issuer declined the request because the issuer requires voice authorization from the cardholder.',\n  CARD_DECLINED_VERIFICATION_REQUIRED:\n    'This payment requires verification. For more information, see SCA Overview.',\n};\n\nfunction hasKey<O>(obj: O, key: keyof any): key is keyof O {\n  return key in obj;\n}\nexport { SquareErrors, hasKey };\n","import React, { useState, useEffect } from 'react';\nimport { times } from 'lodash/fp';\nimport { Checkbox } from '@material-ui/core';\nimport { SquarePaymentForm } from 'react-square-payment-form';\nimport 'react-square-payment-form/lib/default.css';\nimport { useTranslation } from 'react-i18next';\nimport SquareCardForm from './SquareCardForm';\nimport SubmissionButton from './SubmissionButton';\nimport { SquareErrors, hasKey } from '../../consts';\nimport { makeSquarePayment, SquareLineItems, Buyer } from '../../utilities/api';\nimport {\n  useModalPaymentState,\n  useModalPaymentDispatch,\n} from '../../utilities/hooks/ModalPaymentContext/context';\nimport {\n  EMAIL_REGEX,\n  SET_MODAL_VIEW,\n} from '../../utilities/hooks/ModalPaymentContext/constants';\nimport styled from 'styled-components';\n\ntype Props = {\n  purchaseType: string;\n  sellerId: string;\n  sellerName: string;\n  idempotencyKey: string;\n  costPerMeal: number;\n  nonProfitLocationId?: string;\n  campaignId?: string;\n};\n\ntype ErrorMessage = {\n  code: string;\n  detail: string;\n};\n\nconst SquareModal = ({\n  purchaseType,\n  sellerId,\n  sellerName,\n  idempotencyKey,\n  costPerMeal,\n  nonProfitLocationId,\n  campaignId,\n}: Props) => {\n  const { t } = useTranslation();\n  const { amount } = useModalPaymentState();\n  const dispatch = useModalPaymentDispatch();\n\n  const [isTermsChecked, setTermsChecked] = useState(false);\n  const [isSubscriptionChecked, setSubscriptionChecked] = useState(true);\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [errorMessages, setErrorsMessages] = useState<string[]>([]);\n  const [canSubmit, setCanSubmit] = useState(false);\n\n  const checkTermsAgreement = () => setTermsChecked(!isTermsChecked);\n  const checkSubscriptionAgreement = () =>\n    setSubscriptionChecked(!isSubscriptionChecked);\n\n  const numberOfMeals = Number(amount) / costPerMeal;\n  const mealText = numberOfMeals > 1 ? 'meals' : 'meal';\n  const numberOfMealsText =\n    purchaseType === 'buy_meal' ? `(${numberOfMeals} ${mealText})` : '';\n\n  const cardNonceResponseReceived = (errors: any[], nonce: string) => {\n    setErrorsMessages([]);\n\n    if (errors && errors.length > 0 && errors[0]) {\n      setErrorsMessages(errors.map((error) => error.message));\n      return;\n    }\n\n    // 'buy_meal' is still represented as a gift card when calling the API\n    const payment: SquareLineItems =\n      purchaseType === 'buy_meal'\n        ? times(\n            () => ({\n              amount: Number(costPerMeal) * 100,\n              currency: 'usd',\n              item_type: 'gift_card',\n              quantity: 1,\n            }),\n            numberOfMeals\n          )\n        : [\n            {\n              amount: Number(amount) * 100,\n              currency: 'usd',\n              item_type: purchaseType,\n              quantity: 1,\n            },\n          ];\n\n    const is_distribution = purchaseType === 'buy_meal';\n    const buyer: Buyer = {\n      name,\n      email,\n      nonce,\n      idempotency_key: idempotencyKey,\n      is_subscribed: isSubscriptionChecked,\n    };\n\n    setCanSubmit(false);\n    return makeSquarePayment(\n      nonce,\n      sellerId,\n      payment,\n      buyer,\n      is_distribution,\n      campaignId\n    )\n      .then((res) => {\n        if (res.status === 200) {\n          dispatch({ type: SET_MODAL_VIEW, payload: 2 });\n        }\n      })\n      .catch((err) => {\n        if (err.response) {\n          let responseErrors: ErrorMessage[] = [];\n          if (err.response.data.errors)\n            responseErrors = err.response.data.errors;\n          else if (err.response.data.message)\n            responseErrors = [\n              { code: 'GENERIC_DECLINE', detail: err.response.data.message },\n            ];\n\n          const newErrors =\n            responseErrors.length > 0\n              ? responseErrors.map((error: ErrorMessage) => {\n                  if (hasKey(SquareErrors, error.code)) {\n                    return SquareErrors[error.code];\n                  } else {\n                    return error.detail;\n                  }\n                })\n              : [];\n          setErrorsMessages(newErrors);\n        }\n      });\n  };\n\n  let applicationId, locationId;\n  if (\n    purchaseType === 'buy_meal' &&\n    nonProfitLocationId === process.env.REACT_APP_THINK_CHINATOWN_LOCATION_ID\n  ) {\n    applicationId = process.env.REACT_APP_THINK_CHINATOWN_APPLICATION_ID ?? '';\n    locationId = process.env.REACT_APP_THINK_CHINATOWN_LOCATION_ID ?? '';\n  } else {\n    applicationId = process.env.REACT_APP_SQUARE_APPLICATION_ID ?? '';\n    locationId = process.env.REACT_APP_SQUARE_LOCATION_ID ?? '';\n  }\n\n  const purchaseTypePhrase = (shouldLowerCase) => {\n    switch (purchaseType) {\n      case 'donation':\n        return shouldLowerCase ? 'donation' : 'Donation';\n      case 'gift_card':\n        return shouldLowerCase ? 'voucher purchase' : 'Voucher purchase';\n      case 'buy_meal':\n        return 'Gift a Meal purchase';\n      default:\n        return 'Donation';\n    }\n  };\n\n  useEffect(() => {\n    setCanSubmit(\n      isTermsChecked &&\n        name.length > 0 &&\n        email.length > 0 &&\n        EMAIL_REGEX.test(email)\n    );\n  }, [isTermsChecked, name, email]);\n\n  const setDisclaimerLanguage = (type: string) => {\n    if (sellerId === 'send-chinatown-love') type = 'donation-pool';\n\n    switch (type) {\n      case 'donation':\n        return t(`By proceeding with your transaction, you understand that you are\n          making a donation to ${sellerName}. No goods or services were\n          exchanged for this donation.`);\n      case 'donation-pool':\n        return t(`By proceeding with your transaction, you understand that\n          you are making a donation to all merchants partnered with Send Chinatown Love\n          Inc. The full donation pool will be split among these merchants. No goods or\n          services were exchanged for this donation.`);\n      case 'gift_card':\n        return t(`By proceeding with your purchase, you understand that the voucher card\n          is not redeemable for cash and can only be used at ${sellerName}. All\n          purchases are final. In the event that the merchant is no longer open\n          at the time of redemption, Send Chinatown Love Inc. will not be able\n          to refund your purchase. Balance displayed in the voucher may or may not\n          represent the final balance. Final balance information is subject to\n          ${sellerName}'s most recent records.`);\n      default:\n        break;\n    }\n  };\n\n  return (\n    <div>\n      <Header>Complete your {purchaseTypePhrase(true)}</Header>\n      <p>Please add your payment information below</p>\n\n      <PaymentContainer>\n        <Subheader>Payment Information</Subheader>\n        <RowFormat>\n          <LabelText htmlFor=\"name\">Full Name</LabelText>\n          <InputText\n            name=\"name\"\n            type=\"text\"\n            className=\"modalInput--input\"\n            onChange={(e) => setName(e.target.value)}\n            value={name}\n            placeholder=\"Name\"\n          />\n          <LabelText htmlFor=\"email\">Email</LabelText>\n          <InputText\n            name=\"email\"\n            type=\"email\"\n            className=\"modalInput--input\"\n            onChange={(e) => setEmail(e.target.value)}\n            value={email}\n            placeholder=\"Email\"\n            pattern={EMAIL_REGEX.source}\n            required\n          />\n        </RowFormat>\n        <SquareFormContainer>\n          <SquarePaymentForm\n            sandbox={\n              !process.env.NODE_ENV || process.env.NODE_ENV === 'development'\n            }\n            applicationId={applicationId}\n            locationId={locationId}\n            cardNonceResponseReceived={cardNonceResponseReceived}\n            formId=\"SPF\"\n            apiWrapper=\"\"\n          >\n            <SquareCardForm />\n            <div className=\"sq-error-message\">\n              {errorMessages.map((errorMessage) => (\n                <li key={`sq-error-${errorMessage}`}>{errorMessage}</li>\n              ))}\n            </div>\n            <br />\n            <Subheader>Checkout details</Subheader>\n            <span>\n              {' '}\n              {purchaseTypePhrase(false)} of{' '}\n              <b>\n                ${amount} {numberOfMealsText}\n              </b>{' '}\n              to {sellerName}{' '}\n            </span>\n            <p />\n            <CheckboxContainer>\n              <Checkbox\n                value=\"checkedA\"\n                inputProps={{ 'aria-label': 'Checkbox A' }}\n                onClick={checkTermsAgreement}\n                checked={isTermsChecked}\n              />\n              <span>\n                I agree with the <b>Terms & Conditions</b>\n              </span>\n            </CheckboxContainer>\n            <CheckboxContainer>\n              <Checkbox\n                value=\"checkedB\"\n                inputProps={{ 'aria-label': 'Checkbox B' }}\n                onClick={checkSubscriptionAgreement}\n                checked={isSubscriptionChecked}\n              />\n              <span>\n                I'd like to receive email updates from Send Chinatown Love, such\n                as when the merchant receives my donation/purchase or when a new\n                merchant is onboarded\n              </span>\n            </CheckboxContainer>\n            <Disclaimer>{setDisclaimerLanguage(purchaseType)}</Disclaimer>\n            <ButtonRow>\n              <BackButton\n                type=\"button\"\n                className={'modalButton--back'}\n                onClick={() => dispatch({ type: SET_MODAL_VIEW, payload: 0 })}\n              >\n                ᐸ Back\n              </BackButton>\n              <SubmissionButton canSubmit={canSubmit} />\n            </ButtonRow>\n          </SquarePaymentForm>\n        </SquareFormContainer>\n      </PaymentContainer>\n    </div>\n  );\n};\n\nexport default SquareModal;\n\nconst PaymentContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  margin-top: 30px;\n\n  div {\n    width: 100%;\n  }\n`;\n\nconst RowFormat = styled.div`\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;\n  font-size: 14px;\n  text-transform: uppercase;\n`;\n\nconst LabelText = styled.label`\n  color: #373f4a;\n`;\n\nconst InputText = styled.input`\n  font-size: 14px;\n  color: #373f4a;\n  border: 1px solid #dedede;\n  margin: 5px 0 15px;\n  padding: 27px 15px;\n  width: 100%;\n  border-radius: 5px;\n\n  ::placeholder {\n    color: #cdcdcd;\n  }\n\n  :invalid {\n    color: #fa755a;\n  }\n`;\n\nconst CheckboxContainer = styled.label`\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  align-items: center;\n  margin-bottom: 10px;\n\n  :hover {\n    text-decoration: underline;\n  }\n\n  > span {\n    padding: 9px 9px 9px 0px;\n  }\n`;\n\nconst ButtonRow = styled.div`\n  display: flex;\n  flex-direction: row;\n  position: relative;\n  justify-content: space-between;\n  margin-bottom: 25px;\n`;\n\nconst BackButton = styled.button`\n  width: 75px;\n  font-size: 13px;\n  background-color: white;\n`;\n\nconst SquareFormContainer = styled.div`\n  h3,\n  span,\n  p {\n    font-family: 'Open Sans', 'Helvetica Neue', sans-serif;\n    font-size: 15px;\n  }\n\n  h3 {\n    font-size: 24px;\n  }\n`;\n\nconst Header = styled.div`\n  font-family: 'Open Sans', sans-serif;\n  font-size: 32px;\n  font-weight: 600;\n`;\n\nconst Subheader = styled.div`\n  font-family: 'Open Sans', sans-serif;\n  font-size: 18px;\n  font-weight: 700;\n  margin-bottom: 18px;\n`;\n\nconst Disclaimer = styled.div`\n  font-family: 'Open Sans', sans-serif;\n  font-size: 12px;\n  font-weight: 300;\n  padding: 0px 0px 0px 0px;\n  margin: 30px 0px 30px 0px;\n  opacity: 0.7;\n`;\n","import * as React from 'react';\nimport confirmationPic from './chinatown-logo.png';\nimport styled from 'styled-components';\n\nexport type Props = {\n  purchaseType: string;\n  sellerId: string;\n  sellerName: string;\n  closeModal: Function;\n};\n\nconst ModalConfirmation = (props: Props) => {\n  const confirmationText = () => {\n    switch (props.purchaseType) {\n      case 'donation':\n        return `We appreciate your support. We'll let you know when ${props.sellerName} receives your donation!`;\n      case 'gift_card':\n        return `We appreciate your support. We'll email you your voucher when ${props.sellerName} opens back up!`;\n      case 'buy_meal':\n        return `We appreciate your support for ${props.sellerName} and for those in need! Please check your email for your receipt.`;\n      default:\n        return `Unexpected occurrence.`;\n    }\n  };\n\n  return (\n    <Container data-testid=\"Modal Confirmation\">\n      <h2>Thank you!</h2>\n      <p>{confirmationText()}</p>\n\n      <ThankYouImage src={confirmationPic} alt=\"Logo\" />\n\n      <FinishButton\n        className=\"modalButton--filled\"\n        onClick={(e) => props.closeModal(e)}\n      >\n        Finish\n      </FinishButton>\n    </Container>\n  );\n};\n\nexport default ModalConfirmation;\n\nconst Container = styled.div`\n  max-height: 80%;\n  margin-bottom: 25px;\n`;\n\nconst ThankYouImage = styled.img`\n  position: relative;\n  width: 100%;\n`;\n\nconst FinishButton = styled.button`\n  position: relative;\n  margin-top: 35px;\n  float: right;\n  right: 0px;\n`;\n","import React from 'react';\nimport { v4 as uuid } from 'uuid';\nimport ModalAmount from '../ModalAmount';\nimport ModalBuyMealNew from '../ModalBuyMealNew';\nimport { SquareModal } from '../ModalPayment';\nimport ModalConfirmation from '../ModalConfirmation';\nimport {\n  useModalPaymentState,\n  useModalPaymentDispatch,\n} from '../../utilities/hooks/ModalPaymentContext/context';\nimport {\n  CLOSE_MODAL,\n  UPDATE_SELLER_DATA,\n} from '../../utilities/hooks/ModalPaymentContext/constants';\nimport { getSeller } from '../../utilities';\nimport styled from 'styled-components';\nimport ReactPixel from 'react-facebook-pixel';\n\nexport interface Props {\n  purchaseType: string;\n  sellerId: string;\n  sellerName: string;\n  costPerMeal: number;\n  nonProfitLocationId?: string;\n  campaignId?: string;\n}\n\nexport interface ModalProps {\n  modalView: number;\n}\n\nexport const Modal = (props: Props) => {\n  const idempotencyKey = uuid();\n  const { modalView } = useModalPaymentState();\n  const dispatch = useModalPaymentDispatch();\n\n  const closeModal = async (e: any) => {\n    ReactPixel.trackCustom('ModalCloseButtonClick', {});\n    e.preventDefault();\n    if (modalView === 2) {\n      const { data } = props.sellerId && (await getSeller(props.sellerId));\n      dispatch({ type: UPDATE_SELLER_DATA, payload: data.amount_raised });\n    }\n    dispatch({ type: CLOSE_MODAL, payload: undefined });\n  };\n\n  return (\n    <ModalContainer modalView={modalView}>\n      <CloseButtonContainer>\n        <CloseButton onClick={closeModal}>×</CloseButton>\n      </CloseButtonContainer>\n      <ViewContainer>\n        {modalView === 0 && props.purchaseType !== 'buy_meal' && (\n          <ModalAmount {...props} />\n        )}\n        {modalView === 0 && props.purchaseType === 'buy_meal' && (\n          <ModalBuyMealNew {...props} />\n        )}\n        {modalView === 1 && (\n          <SquareModal {...props} idempotencyKey={idempotencyKey} />\n        )}\n        {modalView === 2 && (\n          <ModalConfirmation {...props} closeModal={closeModal} />\n        )}\n      </ViewContainer>\n    </ModalContainer>\n  );\n};\n\nexport default Modal;\n\nconst ModalContainer = styled.div`\n  display: ${(props: ModalProps) => (props.modalView > -1 ? 'flex' : 'none')};\n  flex-direction: column;\n  margin: 0 auto;\n\n  background-color: white;\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 5;\n  padding-bottom: 40px;\n\n  max-height: 85vh;\n  width: 725px;\n  box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.5);\n  height: 65%;\n\n  @media only screen and (max-width: 799px) {\n    width: 85%;\n  }\n\n  @media only screen and (max-width: 450px) {\n    width: 100%;\n    height: 100%;\n    max-height: 100%;\n  }\n`;\nconst ViewContainer = styled.div`\n  overflow-y: scroll;\n  margin: 0 auto;\n  height: 100%;\n  width: 100%;\n  padding: 0 50px;\n\n  @media only screen and (max-width: 450px) {\n    width: 100%;\n    height: 100%;\n    overflow-x: hidden;\n  }\n`;\nconst CloseButtonContainer = styled.div`\n  display: flex;\n  justify-content: flex-end;\n  width: 100%;\n`;\nconst CloseButton = styled.button`\n  width: 40px;\n  font-weight: bold;\n  font-size: 30px;\n  border: none;\n  outline: none;\n  cursor: pointer;\n  background-color: transparent;\n`;\n","module.exports = __webpack_public_path__ + \"static/media/chinatown-logo.f9e716ba.png\";"],"sourceRoot":""}