{"version":3,"sources":["utilities/api/endpoints.ts","utilities/api/interactionManager.ts","../node_modules/@material-ui/core/esm/utils/useForkRef.js","../node_modules/@material-ui/core/esm/utils/setRef.js","pages/PassportRedemption/CircleLogo.png","../node_modules/react-transition-group/esm/TransitionGroupContext.js","../node_modules/@material-ui/core/esm/utils/useControlled.js","../node_modules/@material-ui/core/esm/utils/useIsFocusVisible.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","pages/PassportRedemption/CrawlInfoIcon.png","pages/PassportRedemption/PassportDashboardBackground.png","pages/PassportRedemption/passportIcon.png","pages/PassportRedemption/CrawlMap.png","pages/PassportRedemption/style.tsx","pages/PassportRedemption/TrackScreen.tsx","pages/PassportRedemption/RedemptionFooters.tsx","pages/PassportRedemption/RedemptionSelectScreen.tsx","pages/PassportRedemption/RedemptionClaimScreen.tsx","pages/PassportRedemption/TicketRow.tsx","utilities/general/textFormatter.ts","pages/PassportRedemption/Faq.tsx","pages/PassportRedemption/InstagramDisabled.tsx","pages/PassportRedemption/InstagramEnabled.tsx","pages/PassportRedemption/Passport.tsx","pages/PassportRedemption/PassportDashboard.tsx"],"names":["baseUrl","process","sellers","charges","vouchers","passportVouchers","contacts","sponsorSellers","getSellers","lang","a","axios","get","params","locale","localeFromLanguage","getSeller","id","makeSquarePayment","nonce","sellerId","payment","buyer","isDistribution","campaignId","email","name","idempotencyKey","idempotency_key","isSubscribed","is_subscribed","post","is_square","line_items","seller_id","is_distribution","campaign_id","headers","then","res","catch","err","getVoucher","updateVoucher","amount","put","getMerchantGiftCards","secret","language","getCampaigns","getCampaignsForMerchant","getDistributor","getParticipatingMerchant","getParticipatingMerchantTickets","tickets_secret","getPassportEmailId","getContactInfo","passportId","createPassportEmailId","instagram","updatePassportInstagram","checkForValidTicket","ticket_id","updateTicketContactId","contact_id","getPassportTickets","getParticipatingSeller","sendRedeemTicketsEmail","getLocationById","locationId","getAllSponsors","getOneSponsor","rewardId","redeemReward","auth_token","tickets","useForkRef","refA","refB","React","refValue","setRef","ref","value","current","module","exports","createContext","useControlled","_ref","controlled","defaultProp","default","isControlled","state","undefined","_React$useState","valueState","setValue","newValue","hadKeyboardEvent","hadFocusVisibleRecently","hadFocusVisibleRecentlyTimeout","inputTypesWhitelist","text","search","url","tel","password","number","date","month","week","time","datetime","handleKeyDown","event","metaKey","altKey","ctrlKey","handlePointerDown","handleVisibilityChange","this","visibilityState","isFocusVisible","target","matches","error","node","type","tagName","readOnly","isContentEditable","focusTriggersKeyboardModality","handleBlurVisible","window","clearTimeout","setTimeout","useIsFocusVisible","onBlurVisible","instance","doc","ReactDOM","ownerDocument","addEventListener","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","CardContainer","styled","div","props","mainView","TitleRow","Title","span","color","SubTitle","isMainTitle","size","bold","align","Button","button","ErrorMessage","CardText","p","letterSpacing","Track","setCurrentScreenView","push","useHistory","useState","setEmail","isEmailValid","setIsEmailValid","ticketCode","setTicketCode","isTicketValid","setIsTicketValid","instagramHandle","setinstagramHandle","findOrCreateUser","viewTickets","data","length","contactId","findTicketCode","code","formattedCode","split","join","toUpperCase","newContactId","SupporterTooltip","withStyles","theme","tooltip","backgroundColor","width","fontSize","typography","pxToRem","border","Tooltip","Container","PassportCard","Logo","src","CircleLogo","alt","InputContainer","className","Column","Label","htmlFor","InputField","onChange","e","pattern","EMAIL_REGEX","source","test","maxLength","Row","title","Fragment","ToolTipTable","enterTouchDelay","leaveTouchDelay","placement","CrawlInfoIcon","placeholder","disabled","onClick","ExternalLinks","href","LinksContainer","platform","map","social","Icon","img","label","input","table","NoRewardsFooter","preventDefault","location","RedeemRewardsFooter","selectedSponsor","access_token","DefaultFooter","allSponsors","PassportSelected","useParams","setTickets","numRewards","Math","floor","setAllSponsors","reward_cost","setSelectedSponsor","fetchTickets","allTickets","availableTickets","filter","ticket","sponsor_seller_id","console","fetchSponsors","Promise","all","sponsor","location_id","allSponsorsWithLocations","useEffect","Header","numSponsors","Heading","SubHeading","RewardsContainer","SingleRewardContainer","selected","checked","reward","SingleRewardInfo","reward_detail","LogoImage","logo_url","address1","Buffer","Footer","RowStatuses","PassportRedemptionClaim","address2","city","zip_code","selectedReward","setSelectedReward","fetchSponsor","handleRedemption","ticketsToRedeem","slice","status","timeLeft","setTimeLeft","timer","ScreenName","Redemption","Shadow","ContentContainer","style","fontWeight","sec","pad","val","toString","padStart","formatTime","TicketRow","Inactive","setStatus","redeemedOn","setRedeemedOn","stamps","some","stamp","redeemed_at","find","Redeemed","Active","TableRow","key","index","TableIndex","TableStamp","StampColumn","SendEmailButton","sendEmail","StampRow","filledStamps","ticketInfo","Stamp","stamp_url","EmptyStamp","createStamps","RedeemedRow","newDate","Date","getMonth","getDate","getUTCFullYear","dateFormatter","showRedeemRow","tr","td","FaqContent","RewardsLink","Question","BulletPoint","li","Faq","showFaq","toggleView","hidden","open","rel","height","viewBox","fill","xmlns","mask-type","maskUnits","x","y","fill-rule","clip-rule","d","mask","Passport","setShowFaq","showInstagram","setShowInstagram","showEmailSent","setShowEmailSent","hash","contactInfo","ticketIds","promises","forEach","participating_seller_id","seller","passportTickets","sortedTickets","sort","b","dateA","associated_with_contact_at","getTime","reverse","log","HeaderContainer","RedirectionLinks","BodyContainer","pathname","PassportContainer","SubHeader","InstagramEnabled","InstagramDisabled","SendEmailContainer","PassportIcon","PassportIconImg","SendEmailButtonClose","rows","tempTickets","splice","createTicketRows","TableContainer","Table","row","createRows","AddNewTicket","PassportDashboardBackground","PassportRedemption","screen","currentScreenView","includes","Dashboard","RedemptionSelectScreen","TrackScreen","Claim","RedemptionClaimScreen","showCurrentScreen","CrawlMap"],"mappings":"09BAAMA,G,OAAUC,sCAEHC,EAAUF,EAAU,WACpBG,EAAUH,EAAU,UACpBI,EAAWJ,EAAU,cAGrBK,EAAmBL,EAAU,yBAC7BM,EAAWN,EAAU,YAGrBO,EAAiBP,EAAU,mBCO3BQ,EAAU,uCAAG,WAAOC,GAAP,SAAAC,EAAA,sEACXC,IAAMC,IAAIV,EAAS,CAC9BW,OAAQ,CAAEC,OAAQC,EAAmBN,MAFf,mFAAH,sDAOVO,EAAS,uCAAG,WAAOC,EAAYR,GAAnB,SAAAC,EAAA,sEACVC,IAAMC,IAAIV,EAAUe,EAAI,CACnCJ,OAAQ,CAAEC,OAAQC,EAAmBN,MAFhB,mFAAH,wDA4DTS,EAAiB,uCAAG,WAC/BC,EACAC,EACAC,EACAC,EACAC,EACAC,GAN+B,qBAAAd,EAAA,6DAQvBe,EAAgBH,EAAhBG,MAAOC,EAASJ,EAATI,KACTC,EAAiBL,EAAMM,gBACvBC,EAAeP,EAAMQ,cAVI,SAYlBnB,IACVoB,KACC5B,EACA,CACE6B,WAAW,EACXb,QACAc,WAAYZ,EACZI,QACAC,OACAQ,UAAWd,EACXQ,gBAAiBD,EACjBG,cAAeD,EACfM,gBAAiBZ,EACjBa,YAAaZ,GAEf,CAAEa,QAAS,CAAE,8BAA+B,OAE7CC,KAjBU,+BAAA5B,EAAA,MAiBL,WAAO6B,GAAP,SAAA7B,EAAA,+EACG6B,GADH,2CAjBK,uDAoBVC,OAAM,SAACC,GACN,MAAMA,KAjCqB,mFAAH,gEAqCjBC,EAAU,uCAAG,WAAOzB,GAAP,SAAAP,EAAA,+EACxBC,IACGC,IAAIR,EAAWa,GACfqB,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,MAJM,2CAAH,sDAMVE,EAAa,uCAAG,WAAO1B,EAAY2B,GAAnB,SAAAlC,EAAA,+EAC3BC,IACGkC,IAAIzC,EAAWa,EAAI,CAAE2B,WACrBN,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,MAJS,2CAAH,wDAMbK,EAAoB,uCAAG,WAAOZ,EAAmBa,GAA1B,SAAArC,EAAA,+EAClCC,IAAMC,IAAIV,EAAUgC,EAAY,eAAiBa,GAAQT,MAAK,SAACC,GAAD,OAASA,MADrC,2CAAH,wDAGjC,SAASxB,EAAmBiC,GAC1B,OAAQA,GACN,IAAK,KACH,MAAO,QACT,IAAK,KACL,QACE,MAAO,MAIN,IAAMC,EAAY,uCAAG,sBAAAvC,EAAA,sEACbC,IACVC,IDhJoBZ,gDCiJpBsC,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,KAJQ,mFAAH,qDAOZS,EAAuB,uCAAG,WACrChB,GADqC,SAAAxB,EAAA,sEAGxBC,IACVC,IAAIV,EAAUgC,EAAY,cAC1BI,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,KANmB,mFAAH,sDASvBU,EAAc,uCAAG,WAAOlC,GAAP,SAAAP,EAAA,sEACfC,IACVC,ID/JuBZ,kDC+JJiB,GACnBqB,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,KAJU,mFAAH,sDAQdW,EAAwB,uCAAG,WAAOnC,GAAP,SAAAP,EAAA,+EACtCC,IACGC,IAAIP,EAAmBY,GACvBqB,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,MAJoB,2CAAH,sDAMxBY,EAA+B,uCAAG,WAC7CpC,EACAqC,GAF6C,SAAA5C,EAAA,+EAI7CC,IACGC,IAAIP,EAAmBY,EAAK,YAAcqC,GAC1ChB,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,MAP2B,2CAAH,wDAU/Bc,EAAkB,uCAAG,WAAO9B,GAAP,SAAAf,EAAA,+EAChCC,IACGC,IAAIN,EAAU,CACbO,OAAQ,CAAEY,WAEXa,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,MANc,2CAAH,sDAQlBe,EAAc,uCAAG,WAAOC,GAAP,SAAA/C,EAAA,+EAC5BC,IACGC,IAAIN,EAAWmD,GACfnB,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,MAJU,2CAAH,sDAMdiB,EAAqB,uCAAG,WACnCjC,EACAkC,GAFmC,eAAAjD,EAAA,6DAI/BG,EAAS,GAEEA,EAAX8C,EAAoB,CAAElC,QAAOkC,aACnB,CAAElC,SAPmB,kBAS5Bd,IACJoB,KAAKzB,EAAUO,GACfyB,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,MAZiB,2CAAH,wDAerBmB,EAAuB,uCAAG,WACrC3C,EACA0C,GAFqC,SAAAjD,EAAA,+EAI9BC,IACJkC,IAAIvC,EAAWW,EAAI,CAAE0C,cACrBrB,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,MAPmB,2CAAH,wDAUvBoB,EAAmB,uCAAG,WAAOC,GAAP,SAAApD,EAAA,+EACjCC,IACGC,ID3NkBZ,6CC2NJ8D,GACdxB,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,MAJe,2CAAH,sDAMnBsB,EAAqB,uCAAG,WACnCD,EACAE,GAFmC,SAAAtD,EAAA,+EAInCC,IACGkC,IDpOkB7C,6CCoOJ8D,EAAW,CAAEE,eAC3B1B,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,MAPiB,2CAAH,wDASrBwB,EAAkB,uCAAG,WAAOR,GAAP,SAAA/C,EAAA,+EAChCC,IACGC,IAAIN,EAAWmD,EAAa,YAC5BnB,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,MAJc,2CAAH,sDAMlByB,EAAsB,uCAAG,WAAO9C,GAAP,SAAAV,EAAA,+EACpCC,IACGC,ID/O+BZ,2DC+OJoB,GAC3BkB,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,MAJkB,2CAAH,sDAMtB0B,EAAsB,uCAAG,WAAOV,GAAP,SAAA/C,EAAA,+EACpCC,IACGoB,KAAKzB,EAAWmD,EAAa,YAC7BnB,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,MAJkB,2CAAH,sDAMtB2B,EAAe,uCAAG,WAAOC,GAAP,SAAA3D,EAAA,+EAC7BC,IACGC,IDzPoBZ,+CCyPJqE,GAChB/B,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,MAJW,2CAAH,sDAMf6B,EAAc,uCAAG,sBAAA5D,EAAA,+EAC5BC,IACGC,IAAIL,GACJ+B,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,MAJU,2CAAH,qDAMd8B,EAAa,uCAAG,WAAOC,GAAP,SAAA9D,EAAA,+EAC3BC,IACGC,IAAIL,EAAiBiE,GACrBlC,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,MAJS,2CAAH,sDAMbgC,EAAY,uCAAG,WAC1BT,EACAU,EACAC,GAH0B,SAAAjE,EAAA,+EAK1BC,IACGkC,IAAIvC,EAAW0D,EAAa,YAAcU,EAAY,CAAEC,YACxDrC,MAAK,SAACC,GAAD,OAASA,KACdC,OAAM,SAACC,GAAD,OAASA,MARQ,2CAAH,2D,iCCrRzB,sDAEe,SAASmC,EAAWC,EAAMC,GAMvC,OAAOC,WAAc,WACnB,OAAY,MAARF,GAAwB,MAARC,EACX,KAGF,SAAUE,GACfC,YAAOJ,EAAMG,GACbC,YAAOH,EAAME,MAEd,CAACH,EAAMC,M,iCChBG,SAASG,EAAOC,EAAKC,GACf,oBAARD,EACTA,EAAIC,GACKD,IACTA,EAAIE,QAAUD,GALlB,mC,oBCAAE,EAAOC,QAAU,IAA0B,wC,iCCA3C,oBACeP,QAAMQ,cAAc,O,iCCDnC,6CAEe,SAASC,EAAcC,GACpC,IAAIC,EAAaD,EAAKC,WAClBC,EAAcF,EAAKG,QAMnBC,GALOJ,EAAK/D,KACC+D,EAAKK,MAGFf,cAA4BgB,IAAfL,GACAN,SAE7BY,EAAkBjB,WAAeY,GACjCM,EAAaD,EAAgB,GAC7BE,EAAWF,EAAgB,GA0B/B,MAAO,CAxBKH,EAAeH,EAAaO,EAmBXlB,eAAkB,SAAUoB,GAClDN,GACHK,EAASC,KAEV,O,iCCvCL,qDAGIC,GAAmB,EACnBC,GAA0B,EAC1BC,EAAiC,KACjCC,EAAsB,CACxBC,MAAM,EACNC,QAAQ,EACRC,KAAK,EACLC,KAAK,EACLlF,OAAO,EACPmF,UAAU,EACVC,QAAQ,EACRC,MAAM,EACNC,OAAO,EACPC,MAAM,EACNC,MAAM,EACNC,UAAU,EACV,kBAAkB,GAqCpB,SAASC,EAAcC,GACjBA,EAAMC,SAAWD,EAAME,QAAUF,EAAMG,UAI3CnB,GAAmB,GAWrB,SAASoB,IACPpB,GAAmB,EAGrB,SAASqB,IACsB,WAAzBC,KAAKC,iBAKHtB,IACFD,GAAmB,GAqBzB,SAASwB,EAAeR,GACtB,IAAIS,EAAST,EAAMS,OAEnB,IACE,OAAOA,EAAOC,QAAQ,kBACtB,MAAOC,IAQT,OAAO3B,GAxFT,SAAuC4B,GACrC,IAAIC,EAAOD,EAAKC,KACZC,EAAUF,EAAKE,QAEnB,QAAgB,UAAZA,IAAuB3B,EAAoB0B,IAAUD,EAAKG,YAI9C,aAAZD,IAA2BF,EAAKG,YAIhCH,EAAKI,mBA4EkBC,CAA8BR,GAO3D,SAASS,IAKPjC,GAA0B,EAC1BkC,OAAOC,aAAalC,GACpBA,EAAiCiC,OAAOE,YAAW,WACjDpC,GAA0B,IACzB,KAGU,SAASqC,IActB,MAAO,CACLd,eAAgBA,EAChBe,cAAeL,EACfpD,IAhBQH,eAAkB,SAAU6D,GACpC,IAlDaC,EAkDTb,EAAOc,cAAqBF,GAEpB,MAARZ,KApDSa,EAqDHb,EAAKe,eApDbC,iBAAiB,UAAW7B,GAAe,GAC/C0B,EAAIG,iBAAiB,YAAaxB,GAAmB,GACrDqB,EAAIG,iBAAiB,cAAexB,GAAmB,GACvDqB,EAAIG,iBAAiB,aAAcxB,GAAmB,GACtDqB,EAAIG,iBAAiB,mBAAoBvB,GAAwB,MAkD9D,O,2FC3IU,SAASwB,EAAmBC,GACzC,OCJa,SAA4BA,GACzC,GAAIC,MAAMC,QAAQF,GAAM,OAAO,OAAAG,EAAA,GAAiBH,GDGzC,CAAkBA,IELZ,SAA0BI,GACvC,GAAsB,qBAAXC,QAA0BA,OAAOC,YAAYC,OAAOH,GAAO,OAAOH,MAAMO,KAAKJ,GFIvD,CAAgBJ,IAAQ,OAAAS,EAAA,GAA2BT,IGLvE,WACb,MAAM,IAAIU,UAAU,wIHIwE,K,kBIL9FvE,EAAOC,QAAU,szB,oBCAjBD,EAAOC,QAAU,IAA0B,yD,oBCA3CD,EAAOC,QAAU,IAA0B,0C,oBCA3CD,EAAOC,QAAU,IAA0B,sC,ioECc3C,IAAMuE,EAAgBC,IAAOC,IAAV,KAeH,SAACC,GAAD,OAA2BA,EAAMC,SAAW,IAAM,UACrD,SAACD,GAAD,OAA2BA,EAAMC,SAAW,KAAO,OACvD,SAACD,GAAD,OAA2BA,EAAMC,SAAW,OAAS,OAkBxDC,GAfeJ,IAAOpJ,EAAV,KAeDoJ,IAAOC,IAAV,MAORI,EAAQL,IAAOM,KAAV,KACA,SAACJ,GAAD,OAAYA,EAAMK,MAAQL,EAAMK,MAAQ,WAY7CC,GAJYR,YAAOK,EAAPL,CAAH,KACJ,SAACE,GAAD,OAAmBA,EAAMO,YAAc,QAAU,UAG3CT,IAAOM,KAAV,KACH,SAACJ,GAAD,OAAmBA,EAAMK,MAAQL,EAAMK,MAAQ,WAC3C,SAACL,GAAD,OAAmBA,EAAMQ,KAAOR,EAAMQ,KAAO,UAC3C,SAACR,GAAD,OAAmBA,EAAMS,KAAOT,EAAMS,KAAO,SAC9C,SAACT,GAAD,OAAmBA,EAAMU,MAAQV,EAAMU,MAAQ,aAIzDC,EAASb,IAAOc,OAAV,KAcNC,EAAef,IAAOC,IAAV,KAYZe,EAAWhB,IAAOiB,EAAV,KAKG,SAACf,GAAD,OAA2BA,EAAMS,KAAOT,EAAMS,KAAO,SACvD,SAACT,GAAD,OAA2BA,EAAMQ,KAAOR,EAAMQ,KAAO,UACzD,SAACR,GAAD,OAA2BA,EAAMK,MAAQL,EAAMK,MAAQ,UAC9C,SAACL,GAAD,OAChBA,EAAMgB,cAAgBhB,EAAMgB,cAAgB,M,sgFCxFhD,IA2OeC,EA3OD,SAAC,GAAoC,EAAlCC,qBAAmC,IAC1CC,EAASC,cAATD,KADyC,EAEvBE,mBAAS,IAFc,mBAE1C5J,EAF0C,KAEnC6J,EAFmC,OAGTD,oBAAS,GAHA,mBAG1CE,EAH0C,KAG5BC,EAH4B,OAKbH,mBAAS,IALI,mBAK1CI,EAL0C,KAK9BC,EAL8B,OAMPL,oBAAS,GANF,mBAM1CM,EAN0C,KAM3BC,EAN2B,OAQHP,mBAAS,IARN,mBAQ1CQ,EAR0C,KAQzBC,EARyB,KAU3CC,EAAgB,uCAAG,WAAOtK,EAAOuK,GAAd,yBAAAtL,EAAA,sEACA6C,YAAmB9B,GADnB,mBACfwK,EADe,EACfA,MAGJD,GAAgBC,EAJG,wBAKrBT,GAAgB,GAChBF,EAAS,IANY,+BAQZU,IAAeC,EARH,kCASchI,YAAmBgI,EAAKhL,IATtC,0BASbgL,KACOC,OAAQf,EAAK,aAAD,OAAcc,EAAKhL,GAAnB,aACtBuK,GAAgB,GAXA,8BAgBnBW,EAAY,IACZF,EAjBmB,oBAkBrBE,EAAYF,EAAKhL,IAEb4K,EApBiB,kCAqBbjI,YAAwBuI,EAAWN,GArBtB,iDA0BXnI,YAAsBjC,EAAOoK,GA1BlB,iBAyBX5K,EAzBW,EAyBnBgL,KAAQhL,GAEVkL,EAAYlL,EA3BS,yBA6BjBmL,EAAeX,EAAYU,GA7BV,4CAAH,wDAgChBC,EAAc,uCAAG,WAAOC,EAAMF,GAAb,uBAAAzL,EAAA,6DACf4L,EAAgBD,EAAKE,MAAM,KAAKC,KAAK,IADtB,SAGE3I,YAAoByI,EAAcG,eAHpC,qBAGbR,EAHa,EAGbA,OACKA,EAAKjI,WAJG,iCAKkBD,YACnCuI,EACAH,GAPiB,iBAKLO,EALK,EAKXT,OAIQd,EAAK,aAAD,OAAcuB,EAAa1I,WAA3B,aATD,wBAWnB4H,GAAiB,GACjBF,EAAc,IAZK,4CAAH,wDAsBdiB,EAAmBC,aAAW,SAACC,GAAD,MAAmB,CACrDC,QAAS,CACPC,gBAAiB,UACjB1C,MAAO,sBACP2C,MAAO,OACPC,SAAUJ,EAAMK,WAAWC,QAAQ,IACnCC,OAAQ,wBANaR,CAQrBS,KAeJ,OACE,kBAACC,EAAD,KACE,kBAACC,EAAD,KACE,kBAACC,EAAD,CAAMC,IAAKC,IAAYC,IAAI,YAC3B,kBAACC,EAAD,CAAgBC,UAAU,mBACxB,kBAAC1D,EAAD,CAAOE,MAAM,WAAb,yBACA,kBAACC,EAAD,sFAKA,kBAACwD,GAAD,MAEA,kBAACA,GAAD,KACE,kBAACC,EAAD,CAAOC,QAAQ,eAAf,iBACA,kBAACC,GAAD,CACEvM,KAAK,cACLuG,KAAK,QACLiG,SAAU,SAACC,GACT7C,EAAS6C,EAAEtG,OAAO1C,OAClBqG,GAAgB,IAElBrG,MAAO1D,EACP2M,QAASC,IAAYC,WAEpB7M,IAAU4M,IAAYE,KAAK9M,IAC5B,kBAACoJ,EAAD,6CAEAU,GACA,kBAACV,EAAD,+DAMJ,kBAACiD,GAAD,KACE,kBAACC,EAAD,CAAOC,QAAQ,eAAf,eACA,kBAACC,GAAD,CACEvM,KAAK,cACLuG,KAAK,OACLiG,SAAU,SAACC,GACTzC,EAAcyC,EAAEtG,OAAO1C,OACvByG,GAAiB,IAOnBzG,MAAOsG,EACP+C,UAAW,KAEX7C,GACA,kBAACd,EAAD,kIAOJ,kBAACiD,GAAD,KACE,kBAACW,GAAD,CAAKZ,UAAU,iBACb,kBAACE,EAAD,CAAOC,QAAQ,oBAAf,oBACmB,2DAEnB,kBAACrB,EAAD,CACE+B,MACE,kBAAC,IAAMC,SAAP,KACE,kBAACC,GAAD,KACE,+BACE,kHAE+B,IAC7B,sDAHF,gHAYRC,gBAAiB,GACjBC,gBAAiB,IACjBC,UAAU,QAEV,6BACE,yBAAKtB,IAAKuB,IAAerB,IAAI,4BAInC,kBAACM,GAAD,CACEvM,KAAK,mBACLuG,KAAK,OACLiG,SAAU,SAACC,GAAD,OAAOrC,EAAmBqC,EAAEtG,OAAO1C,QAC7CA,MAAO0G,EACPoD,YAAY,MAEd,kBAAC3E,EAAD,CAAUD,MAAM,OAAOG,KAAK,OAAOE,MAAM,QAAzC,cAMJ,kBAACkD,EAAD,CAAgBC,UAAU,UACxB,kBAAClD,EAAD,CACExF,MAAM,sBACN0I,UAAU,qBACVqB,UAAWzN,IAAUgK,IAAeE,EACpCwD,QAAS,WACPpD,EAAiBtK,GAAO,KAL5B,gBAUGA,GAAS4M,IAAYE,KAAK9M,IAC3B,kBAACkJ,EAAD,CACEkD,UAAU,aACVqB,UAAWzN,EACX0N,QAAS,WACPpD,EAAiBtK,GAAO,KAJ5B,qBAaN,kBAACgN,GAAD,KACE,kBAACW,GAAD,CACEC,KAAK,oDACLxH,OAAO,UAFT,cAMA,kBAACyH,GAAD,KArJmB,CACvB,CACEC,SAAU,WACV7I,IAAK,gEAEP,CAAE6I,SAAU,YAAa7I,IAAK,2CAC9B,CACE6I,SAAU,SACV7I,IACE,+EA6IoB8I,KAAI,SAACC,GAAD,OACpB,kBAACC,GAAD,CAAML,KAAMI,EAAO/I,IAAKmB,OAAO,UAC7B,0BAAMgG,UAAS,gBAAW4B,EAAOF,oBAWzCjC,EAAYxD,IAAOC,IAAV,KAOTwD,EAAezD,IAAOC,IAAV,KAWZyD,EAAO1D,IAAO6F,IAAV,KASG/B,EAAiB9D,IAAOC,IAAV,KA8BrBgE,EAAQjE,IAAO8F,MAAV,KAIL9B,GAAShE,IAAOC,IAAV,KAINkE,GAAanE,IAAO+F,MAAV,KAeVjB,GAAe9E,IAAOgG,MAAV,KAKLrB,GAAM3E,IAAOC,IAAV,KAYHqF,GAAgBtF,IAAOpJ,EAAV,KAUpB4O,GAAiBxF,IAAOC,IAAV,KAOd2F,GAAO5F,IAAOpJ,EAAV,K,SCnXGqP,GAAkB,WAC7B,OACE,oCACE,kBAACzF,EAAD,CAAUG,KAAK,OAAf,6BAEA,kBAACE,EAAD,CACExF,MAAM,6BACN0I,UAAU,qBACVsB,QAAS,SAAChB,GACRA,EAAE6B,iBACFzH,OAAO0H,SAASZ,KAAO,cAL3B,qBAoBOa,GAAsB,SAAClG,GAClC,OACE,oCACE,kBAACM,EAAD,CAAUG,KAAK,OAAf,yDAIA,kBAACE,EAAD,CACExF,MAAM,6BACN0I,UAAU,qBACVqB,UAAWlF,EAAMmG,gBACjBhB,QAAS,SAAChB,GACRA,EAAE6B,iBACFzH,OAAO0H,SAASZ,KAAhB,oBAAoCrF,EAAM/I,GAA1C,mBAAuD+I,EAAMoG,aAA7D,oBAAqFpG,EAAMmG,gBAAgBlP,MAN/G,gBAoBOoP,GAAgB,SAACrG,GAC5B,OACE,oCACE,kBAACM,EAAD,CAAUG,KAAK,OAAf,+EAICT,EAAMsG,YAAYpE,QAAU,GAC3B,kBAACvB,EAAD,CACEkD,UAAU,aACVsB,QAAS,SAAChB,GACRA,EAAE6B,iBACFzH,OAAO0H,SAASZ,KAAhB,oBAAoCrF,EAAM/I,GAA1C,cAJJ,wB,ixEC1CR,IAkIesP,GAlIU,SAAC,GAAoC,EAAlCrF,qBAAmC,IAAD,EAC/BsF,cAArBvP,EADoD,EACpDA,GAAImP,EADgD,EAChDA,aADgD,EAG9B/E,mBAAgB,IAHc,mBAGrD1G,EAHqD,KAG5C8L,EAH4C,KAItDC,EAAaC,KAAKC,MAAMjM,EAAQuH,OAAS,GAJa,EAMtBb,mBAAgB,IANM,mBAMrDiF,EANqD,KAMxCO,EANwC,OAOdxF,mBAAS,CACrDpK,GAAI,KACJ6P,YAAa,OAT6C,mBAOrDX,EAPqD,KAOpCY,EAPoC,KAYtDC,EAAY,uCAAG,gCAAAtQ,EAAA,+EAEkBuD,YAAmBhD,GAFrC,gBAEHgQ,EAFG,EAEThF,KACFiF,EAAmBD,EAAWE,QAClC,SAACC,GAAD,OAAyC,OAA7BA,EAAOC,qBAErBZ,EAAWS,GANM,gDAQjBI,QAAQvJ,MAAM,yBARG,yDAAH,qDAYZwJ,EAAa,uCAAG,gCAAA7Q,EAAA,+EAEkB4D,cAFlB,uBAEJgM,EAFI,EAEVrE,KAFU,SAGqBuF,QAAQC,IAC7CnB,EAAYd,IAAZ,+BAAA9O,EAAA,MAAgB,WAAOgR,GAAP,iBAAAhR,EAAA,sEACmB0D,YAAgBsN,EAAQC,aAD3C,uBACA1B,EADA,EACNhE,KADM,kCAEFyF,EAFE,CAEOzB,SAAUA,KAFjB,2CAAhB,wDAJgB,OAGZ2B,EAHY,OASlBf,EAAee,GATG,kDAWlBN,QAAQvJ,MAAM,yBAXI,0DAAH,qDAenB8J,qBAAU,WACRb,IACAO,MAGC,IAeH,OACE,kBAAC,GAAD,KACE,kBAACO,GAAD,CAAQC,YAAazB,EAAYpE,QAC/B,kBAAC,GAAD,CAAMuB,IAAKC,IAAYC,IAAI,YAC3B,kBAACqE,GAAD,KACGtB,EADH,UACqC,IAAfA,GAAoBA,EAAa,EAAI,IAAM,GAAI,IADrE,aAIA,kBAACuB,GAAD,2CAGF,kBAACC,GAAD,KACG5B,EAAYpE,OAAS,GACpBoE,EAAYd,KAAI,SAACkC,GACf,OACE,kBAACS,GAAD,CACEC,SAAUjC,EAAgBlP,KAAOyQ,EAAQzQ,GACzCyP,WAAYA,EACZvB,QAAS,WACY,IAAfuB,IAGAP,EAAgBlP,KAAOyQ,EAAQzQ,GACjC8P,EAAmB,CACjB9P,GAAIyQ,EAAQzQ,GACZ6P,YAAaY,EAAQZ,cAGvBC,EAAmB,CACjB9P,GAAI,KACJ6P,YAAa,UAKH,IAAfJ,GACC,2BACEzI,KAAK,QACLoK,QAASlC,EAAgBlP,KAAOyQ,EAAQzQ,GACxCA,GAAIyQ,EAAQY,SAIhB,kBAACC,GAAD,KACE,6BACE,kBAACzH,EAAD,CAAUL,KAAK,MAAMD,KAAK,QACvBkH,EAAQY,QAEX,kBAACxH,EAAD,CAAUL,KAAK,MAAMD,KAAK,QACvBkH,EAAQc,gBAGb,kBAACC,GAAD,CAAWhF,IAAKiE,EAAQgB,SAAU/E,IAAI,gBACtC,kBAAC7C,EAAD,CAAUL,KAAK,MAAMD,KAAK,QACvBkH,EAAQhQ,MAEVgQ,GAAWA,EAAQzB,UAClB,kBAACnF,EAAD,CAAUN,KAAK,QAAQkH,EAAQzB,SAAS0C,eAMnDrC,EAAYpE,OAAS,GAAK,kBAAC0G,GAAD,OAG7B,kBAACC,GAAD,CAAQd,YAAazB,EAAYpE,QA9EhB,IAAfwE,EAAyB,kBAAC,GAAD,MAClBP,EAAgBlP,GAEvB,kBAAC,GAAD,CACEA,GAAIA,EACJmP,aAAcA,EACdD,gBAAiBA,IAGX,kBAAC,GAAD,CAAeG,YAAaA,EAAarP,GAAIA,OA4EvDqM,GAAYxD,IAAOC,IAAV,MAUT+H,GAAShI,IAAOC,IAAV,MASR,SAACC,GAAD,OACAA,EAAM+H,YAAc,EAApB,2PAaI,MAGFvE,GAAO1D,IAAO6F,IAAV,MAWJqC,GAAUlI,IAAOM,KAAV,MASP6H,GAAanI,IAAOM,KAAV,MAOVyI,GAAS/I,IAAOC,IAAV,MAaR,SAACC,GAAD,OACAA,EAAM+H,YAAc,EAApB,+KAQI,MAGFG,GAAmBpI,IAAOC,IAAV,MAahBoI,GAAwBrI,IAAOc,OAAV,MAMf,SAACZ,GAAD,OACRA,EAAMoI,SAAW,kBAAoB,uBACzB,SAACpI,GAAD,OACZA,EAAM0G,WAAa,EAAI,mCAAqC,UAOpD,SAAC1G,GAAD,OAAYA,EAAM0G,WAAa,EAAI,UAAY,UAMrD6B,GAAmBzI,IAAOC,IAAV,MAShB0I,GAAY3I,IAAO6F,IAAV,MAKTiD,GAAS9I,IAAOC,IAAV,M,qpCC9QZ,ICGK+I,GD6IUC,GAhJiB,SAAC,GAAqC,IAAnC7H,EAAkC,EAAlCA,qBACzBC,EAASC,cAATD,KAD2D,EAEnBqF,cAAxCvP,EAF2D,EAE3DA,GAAImP,EAFuD,EAEvDA,aAAciB,EAFyC,EAEzCA,kBAFyC,EAIvBhG,mBAAS,CACnDpK,GAAI,GACJS,KAAM,GACNuO,SAAU,CACR0C,SAAU,GACVK,SAAU,GACVC,KAAM,GACNnN,MAAO,GACPoN,SAAU,IAEZR,SAAU,GACVJ,OAAQ,GACRE,cAAe,KAhBkD,mBAI5DW,EAJ4D,KAI5CC,EAJ4C,KAmB7DC,EAAY,uCAAG,kCAAA3S,EAAA,+EAEe6D,YAAc8M,GAF7B,uBAEHK,EAFG,EAETzF,KAFS,SAGgB7H,YAAgBiN,GAHhC,gBAGHpB,EAHG,EAGThE,KACRmH,EAAkB,gBACb1B,EADY,CAEfzB,SAAUA,KANK,kDASjBqB,QAAQvJ,MAAM,yBATG,0DAAH,qDAaZuL,EAAgB,uCAAG,kCAAA5S,EAAA,+EAEcuD,YAAmBhD,GAFjC,uBAEPgQ,EAFO,EAEbhF,KACFsH,EAAkBtC,EACrBE,QAAO,SAACC,GAAD,OAAyC,OAA7BA,EAAOC,qBAC1BmC,MAAM,EAAG,GACThE,KAAI,SAAC4B,GACJ,MAAO,CAAEnQ,GAAImQ,EAAOnQ,GAAIoQ,wBAPP,SASI5M,YAAaxD,EAAImP,EAAcmD,GATnC,gBAWN,MAXM,EASbE,QAEYtI,EAAK,aAAD,OAAclK,EAAd,aAXH,kDAarBqQ,QAAQvJ,MAAM,yBAbO,0DAAH,qDAiBtB8J,qBAAU,WACRwB,IACAC,MAEC,IArDgE,MAuDnCjI,mBAAS,KAvD0B,mBAuD5DqI,EAvD4D,KAuDlDC,EAvDkD,KAyDnE9B,qBAAU,WACR,IAAM+B,EAAQnL,YAAW,WACvBkL,EAAYD,EAAW,KACtB,KAEH,OADKA,GAAUxI,EAAqB2I,KAAWC,YACxC,kBAAMtL,aAAaoL,MAEzB,CAACF,IAWJ,OACE,kBAAC,GAAD,KACE,kBAAC,GAAD,CAAMjG,IAAKC,IAAYC,IAAI,YAC3B,kBAACoG,GAAD,KACE,kBAACnG,EAAD,CAAgBC,UAAU,cACxB,kBAACmG,GAAD,KACE,kBAAClJ,EAAD,CAAUL,KAAK,MAAMD,KAAK,OAAOQ,cAAc,WAC5CmI,EAAeb,QAElB,kBAACxH,EAAD,CAAUL,KAAK,MAAMD,KAAK,QACvB2I,EAAeX,eAElB,6BACA,kBAAC,GAAD,CAAW/E,IAAK0F,EAAeT,SAAU/E,IAAI,gBAC7C,6BACA,6BACE,kBAAC7C,EAAD,CAAUL,KAAK,MAAMD,KAAK,QACvB2I,EAAezR,MAEjByR,GAAkBA,EAAelD,UAChC,oCACE,kBAACnF,EAAD,CAAUN,KAAK,QACZ2I,EAAelD,SAAS0C,SACxBQ,EAAelD,SAAS+C,UAAY,KACpCG,EAAelD,SAAS+C,UACvBG,EAAelD,SAAS+C,UAE5B,kBAAClI,EAAD,CAAUN,KAAK,QACZ2I,EAAelD,SAASgD,KAD3B,IACkC,IAC/BE,EAAelD,SAASnK,MAAO,IAC/BqN,EAAelD,SAASiD,cAOrC,kBAACtF,EAAD,CAAgBC,UAAU,iBACxB,kBAACmG,GAAD,KACE,kBAAClJ,EAAD,CAAUN,KAAK,OAAOH,MAAM,WAA5B,yBAEE,0BAAM4J,MAAO,CAAEC,WAAY,SACxB,IAnDI,SAACjN,GAClB,IAAMkN,EAAMlN,EAAO,GAIbmN,EAAM,SAACC,GAAD,OAASA,EAAIC,WAAWC,SAAS,EAAG,MAChD,MAAM,GAAN,OAAUH,GAJVnN,GAAQA,EAAOkN,GAAO,IACH,IAGnB,YAAsBC,EAAID,IA8CbK,CAAWd,QAOtB,kBAAC,GAAD,KACE,kBAACpJ,EAAD,CAAUG,KAAK,OAAf,wEAGA,kBAACE,EAAD,CACExF,MAAM,6BACN0I,UAAU,qBACVsB,QAAS,SAAChB,GACRA,EAAE6B,iBACFzH,OAAO0H,SAASZ,KAAhB,oBAAoCpO,EAApC,mBAAiDmP,KALrD,mBAiBF9C,GAAYxD,IAAOC,IAAV,MAYTyD,GAAO1D,IAAO6F,IAAV,MAUJqE,GAAmBlK,IAAOC,IAAV,MAQhBgK,GAASjK,IAAOC,IAAV,MAKN0I,GAAY3I,IAAO6F,IAAV,MAKTkD,GAAS/I,IAAOC,IAAV,M,+xDCvLP+I,O,uBAAAA,I,mBAAAA,I,wBAAAA,Q,KAML,IA+De2B,GA/DG,SAACzK,GAAkB,IAAD,EACNqB,mBAAsByH,GAAY4B,UAD5B,mBAC3BjB,EAD2B,KACnBkB,EADmB,OAEEtJ,mBAAS,IAFX,mBAE3BuJ,EAF2B,KAEfC,EAFe,KAIlChD,qBAAU,WACR,GAAI7H,EAAM8K,OAAOC,MAAK,SAACC,GAAD,OAAWA,EAAMC,eAAc,CACnD,IAAMnO,EAAOkD,EAAM8K,OAAOI,MAAK,SAACF,GAAD,QAAaA,EAAMC,eAC5CnO,GAAM+N,EAAc/N,EAAKmO,aAC/BN,EAAU7B,GAAYqC,eACW,IAAxBnL,EAAM8K,OAAO5I,OACtByI,EAAU7B,GAAYsC,QAEtBT,EAAU7B,GAAY4B,YAEvB,CAAC1K,EAAM8K,SA4BV,OACE,kBAACO,GAAD,CAAUC,IAAKtL,EAAMuL,MAAO9B,OAAQA,GAClC,kBAAC+B,GAAD,SAAcxL,EAAMuL,MAAQ,EAA5B,KACA,kBAACE,GAAD,KACE,kBAACC,GAAD,KACGjC,IAAWX,GAAYsC,QACtB,kBAACO,GAAD,CACE9H,UAAU,qBACVsB,QAASnF,EAAM4L,WAFjB,iBAOF,kBAACC,GAAD,OAAa7L,EAAM8K,QAzBN,SAACA,GAKpB,IAJA,IAAMgB,EAAehB,EAAOtF,KAAI,SAACuG,GAAD,OAC9B,kBAACC,GAAD,CAAOV,IAAKS,EAAW9U,GAAIwM,IAAKsI,EAAWE,eAGtCH,EAAa5J,OAAS,GAC3B4J,EAAa3K,KAAK,kBAAC+K,GAAD,OAGpB,OAAOJ,EAgB4BK,CAAanM,EAAM8K,UAElD,kBAACsB,GAAD,CAAa3C,OAAQA,GAzCL,SAACA,GACrB,OAAQA,GACN,KAAKX,GAAYqC,SACf,MAAM,kBAAN,OCjDD,SAAuBrO,GAC5B,IAAMuP,EAAU,IAAIC,KAAKxP,GAEzB,MAAM,GAAN,OAAUuP,EAAQE,WAAlB,YAAgCF,EAAQG,UAAxC,YAAqDH,EAAQI,kBD8C9BC,CAAc9B,IACzC,KAAK9B,GAAYsC,OACf,MAAM,kBACR,QACE,GAA4B,IAAxBpL,EAAM8K,OAAO5I,OAAc,OAC/B,MAAM,GAAN,OAAU,EAAIlC,EAAM8K,OAAO5I,OAA3B,iBACE,EAAIlC,EAAM8K,OAAO5I,OAAS,EAAI,SAAW,QAD3C,6BAiC8ByK,CAAclD,OAQ9C4B,GAAWvL,IAAO8M,GAAV,MAGV,SAAC5M,GACD,OAAQA,EAAMyJ,QACZ,KAAKX,GAAYqC,SACf,MAAM,mFAIR,KAAKrC,GAAYsC,OACf,MAAM,wFAIR,QACE,MAAM,mFAORI,GAAa1L,IAAO+M,GAAV,MAWVpB,GAAa3L,IAAO+M,GAAV,MAKVnB,GAAc5L,IAAOC,IAAV,MASX8L,GAAW/L,IAAOC,IAAV,MASRqM,GAActM,IAAOC,IAAV,MAUb,SAACC,GAAD,OACAA,EAAMyJ,SAAWX,GAAYsC,QAAU,uBAErCY,GAAQlM,IAAO6F,IAAV,MAGLuG,GAAapM,IAAOC,IAAV,MAGV4L,GAAkB7L,YAAOa,EAAPb,CAAH,M,soBEjKrB,IA8OMgN,GAAahN,IAAOC,IAAV,MAOVgN,GAAcjN,IAAOM,KAAV,MAWX4M,GAAWlN,IAAOiB,EAAV,MAKRkM,GAAcnN,IAAOoN,GAAV,MAIFC,GAzQH,SAAC,GAAoC,IAAlCC,EAAiC,EAAjCA,QAASC,EAAwB,EAAxBA,WAKtB,OACE,kBAACxN,EAAD,CAAeI,SAAUmN,EAASjI,QAASkI,GACzC,kBAACnN,EAAD,KACE,kBAACC,EAAD,CAAOE,MAAO+M,EAAU,QAAU,QAAlC,wBAEAA,GACA,oCACE,6BACA,8BAGJ,kBAACN,GAAD,CAAYQ,QAASF,GACnB,kBAACL,GAAD,CAAa5H,QAhBO,SAAChB,GACzB5F,OAAOgP,KAAK,oDAAqD,YAe7D,mCAGA,kBAACP,GAAD,uDAJF,WAKU,sDALV,+UAWE,kBAACA,GAAD,sEAGA,kBAACC,GAAD,+RAOA,kBAACA,GAAD,4LAKA,kBAACA,GAAD,6FAEsB,qDAFtB,uIAMA,kBAACD,GAAD,uBACiB,qDADjB,KAhCF,OAmCM,qDAnCN,yPAuCE,kBAACA,GAAD,+BACyB,qDADzB,KAGA,kBAACC,GAAD,sDACiD,IAC/C,qDAFF,6EAKA,kBAACA,GAAD,+FAEkB,wCAFlB,gDAIA,kBAACD,GAAD,kCAnDF,0LAuDE,kBAACA,GAAD,mDACA,kBAACC,GAAD,8JAKA,kBAACA,GAAD,iEAGA,kBAACD,GAAD,qCAhEF,iPAqEE,kBAACA,GAAD,uDACA,kBAACC,GAAD,0BACoB,8DADpB,yHAGgD,IAC9C,iDAJF,qBAImD,IACjD,gCACE,oCACQ,IAPZ,oEAUA,kBAACA,GAAD,+KAKA,kBAACA,GAAD,4MAKA,kBAACA,GAAD,qDACgD,IAC9C,mEAFF,aAE6D,IAC3D,qDAHF,KAKA,kBAACD,GAAD,oEACA,kBAACC,GAAD,gOAMA,kBAACA,GAAD,iFAEQ,IACN,uBACE5H,KAAK,oDACLxH,OAAO,SACP2P,IAAI,uBAHN,uCAKuC,MAGzC,kBAACR,GAAD,uCACA,kBAACC,GAAD,uEACkE,IAChE,qDAFF,mGAKA,kBAACA,GAAD,iHAEuC,wCAFvC,kFAGoE,IAClE,uBACE5H,KAAK,oDACLxH,OAAO,SACP2P,IAAI,uBAHN,wCAJF,KAaA,kBAACP,GAAD,gEAGA,kBAACD,GAAD,gDACA,kBAACC,GAAD,kLAG4B,qDAH5B,mCAMA,kBAACA,GAAD,8GAEsC,IACpC,uBACE5H,KAAK,oDACLxH,OAAO,SACP2P,IAAI,uBAHN,wCAMK,IATP,2BAYA,kBAACR,GAAD,mDA1JF,+LA8JE,kBAACA,GAAD,yDACA,kBAACC,GAAD,6EACmE,IACjE,qDAFF,iFAKA,kBAACA,GAAD,6OAMA,kBAACD,GAAD,0FA1KF,kKAiLE,kBAACA,GAAD,6EACmE,KAEnE,kBAACC,GAAD,uDACkD,IAChD,qDAFF,gaAUA,kBAACA,GAAD,4FAIA,kBAACD,GAAD,kFAlMF,mGAwME,kBAACA,GAAD,kCACA,kBAACC,GAAD,KACE,wCADF,uUAOA,kBAACA,GAAD,KACE,yCADF,4IAKA,kBAACA,GAAD,KACE,uDADF,uE,0CC7OO,qBACb,yBACEjK,MAAM,KACNyK,OAAO,KACPC,QAAQ,YACRC,KAAK,OACLC,MAAM,8BAEN,0BACE3W,GAAG,QACH4W,YAAU,QACVC,UAAU,iBACVC,EAAE,IACFC,EAAE,IACFhL,MAAM,KACNyK,OAAO,MAEP,0BACEQ,YAAU,UACVC,YAAU,UACVC,EAAE,ssCACFR,KAAK,WAGT,uBAAGS,KAAK,eACN,0BAAMpL,MAAM,KAAKyK,OAAO,KAAKE,KAAK,eCzBzB,qBACb,yBACE3K,MAAM,KACNyK,OAAO,KACPC,QAAQ,YACRC,KAAK,OACLC,MAAM,8BAEN,0BACE3W,GAAG,QACH4W,YAAU,QACVC,UAAU,iBACVC,EAAE,IACFC,EAAE,IACFhL,MAAM,KACNyK,OAAO,MAEP,0BACEQ,YAAU,UACVC,YAAU,UACVC,EAAE,ssCACFR,KAAK,WAGT,uBAAGS,KAAK,eACN,0BAAMpL,MAAM,KAAKyK,OAAO,KAAKE,KAAK,WAEpC,0BACEQ,EAAE,yOACFR,KAAK,c,ygFCCX,IA+LeU,GA/LE,SAACrO,GAAkB,IAC1B/I,EAAOuP,cAAPvP,GADyB,EAENmK,cAAnBD,EAFyB,EAEzBA,KAAM8E,EAFmB,EAEnBA,SAFmB,EAGH5E,oBAAS,GAHN,mBAG1B+L,EAH0B,KAGjBkB,EAHiB,OAISjN,oBAAS,GAJlB,mBAI1BkN,EAJ0B,KAIXC,EAJW,OAKSnN,oBAAS,GALlB,mBAK1BoN,EAL0B,KAKXC,EALW,OAMHrN,mBAAgB,IANb,mBAM1B1G,EAN0B,KAMjB8L,EANiB,KAQjCoB,qBAAU,WACc,SAAlB5B,EAAS0I,KACXL,GAAW,GAEXA,GAAW,KAEZ,CAACrI,IAEJ4B,qBAAU,WACJ5Q,GACFuC,YAAevC,GACZqB,MAAK,SAACsW,GAEL,OADAJ,EAAiBI,EAAY3M,KAAKtI,WAC3BM,YAAmBhD,MAE3BqB,MAAK,SAACuW,GACL,IAAIC,EAAkB,GAYtB,OAXAD,EAAU5M,KAAK8M,SAAQ,SAAC3H,GACtB0H,EAAS3N,KACPjH,YAAuBkN,EAAO4H,yBAAyB1W,MACrD,SAAC2W,GAAD,qBACEhD,UAAWgD,EAAOhN,KAAKgK,WACpB7E,UAMJI,QAAQC,IAAIqH,MAEpBxW,MAAK,SAAC4W,GACL,GAAIA,EAAgBhN,OAAS,EAAG,CAC9B,IAAMiN,EAAgBD,EAAgBE,MAAK,SAAC1Y,EAAG2Y,GAC7C,IAAMC,EAAQ,IAAIhD,KAAK5V,EAAE6Y,4BAGzB,OAFc,IAAIjD,KAAK+C,EAAEE,4BAEZC,UAAYF,EAAME,aAGjC/I,EAAW0I,EAAcM,eAG5BjX,OAAM,SAACC,GACN6O,QAAQoI,IAAI,mBAAqBjX,QAGtC,CAACxB,IAEJ,IAyBM2U,EAAY,WAChBzR,YAAuBlD,GAAIqB,MAAK,SAACC,GAC/BmW,GAAiB,OA6BrB,OACE,kBAAC,GAAD,KACE,kBAACiB,GAAD,KACE,kBAACC,GAAD,CAAkBvK,KAAK,oDAAoDxH,OAAO,UAAlF,cAGA,kBAAC,GAAD,CAAM4F,IAAKC,IAAYC,IAAI,YAC3B,kBAACiM,GAAD,CAAkBvK,KAAK,sCAAvB,eAIF,kBAACwK,GAAD,KACE,kBAAC,GAAD,CACEzC,QAASA,EACTC,WAAY,kBAAMlM,EAAK8E,EAAS6J,SAAW,WAE7C,kBAACC,GAAD,CACE9P,UAAWmN,EACXjI,QAAS,kBAAMhE,EAAK8E,EAAS6J,YAE7B,kBAAC5P,EAAD,KACE,kBAACC,EAAD,CAAOE,MAAO+M,EAAU,OAAS,SAAjC,yBACCA,EACC,oCACE,6BACA,6BACA,8BAGF,oCACE,kBAAC4C,GAAD,CAAW3P,MAAO+M,EAAU,cAAgB,SACzCmB,EACG,+BACA,wBAEN,kBAAC,GAAD,KACGA,EACC,kBAAC0B,GAAD,MAEA,kBAACC,GAAD,SAOTzB,GACC,kBAAC0B,GAAD,KACE,kBAACC,GAAD,CAAc3M,IAAK4M,OACnB,kBAACnQ,EAAD,KACE,kBAACC,EAAD,0BACA,kBAACG,EAAD,CAAUG,KAAK,OAAf,wEAGE,6BACA,6BAJF,yCAQF,kBAAC6P,GAAD,CACEzM,UAAU,qBACVsB,QAAS,SAAChB,GAAD,OAAOuK,GAAiB,KAFnC,WAQFtB,GA5FS,SAACtC,GAClB,IAAMyF,EAhCiB,SAAC5V,GACxB,IAAI4V,EAAc,GAElB,GAAI5V,EAAQuH,OAAS,EAKnB,IAHA,IAAIsO,EAAW,aAAO7V,GAGf6V,EAAYtO,QACjBqO,EAAKpP,KAAKqP,EAAYC,OAAO,EAAG,IAKpC,GAAIF,EAAKrO,OAAS,EAChB,KAAOqO,EAAKrO,OAAS,GACnBqO,EAAKpP,KAAK,SAGZoP,EAAKpP,KAAK,IAGZ,OAAOoP,EAUMG,CAAiB5F,GAC9B,OACE,kBAAC6F,GAAD,KACE,kBAACC,GAAD,KACE,+BACGL,EAAK/K,KAAI,SAACqL,EAAKtF,GAAN,OACR,kBAAC,GAAD,CACET,OAAQ+F,EACRtF,MAAOA,EACPD,IAAKC,EACLK,UAAWA,UAiFJkF,CAAWnW,MAG1ByS,GACA,kBAAC2D,GAAD,CAAclN,UAAU,iBAAiBsB,QA5E7B,SAAChB,GACjBA,EAAE6B,iBACF7E,EAAK,eA0ED,oBAUFmC,GAAYxD,IAAOC,IAAV,MASTgQ,GAAoBjQ,YAAOD,EAAPC,CAAH,KAEGkR,MAIpBhB,GAAYlQ,YAAOQ,EAAPR,CAAH,MAIT6P,GAAkB7P,IAAOC,IAAV,MAQf6P,GAAmB9P,IAAOpJ,EAAV,MAQhB8M,GAAO1D,IAAO6F,IAAV,MAMJkK,GAAgB/P,IAAOC,IAAV,MAOb4Q,GAAiB7Q,IAAOC,IAAV,MAMd6Q,GAAQ9Q,IAAOgG,MAAV,MAOLiL,GAAejR,YAAOa,EAAPb,CAAH,MAUZqQ,GAAqBrQ,IAAOC,IAAV,MAiBlBqQ,GAAetQ,IAAO6F,IAAV,MAKZ2K,GAAuBxQ,YAAOa,EAAPb,CAAH,MAUpB4F,GAAO5F,IAAOC,IAAV,M,kUCxTV,IAuCekR,GAvCY,SAACjR,GAAkB,IACpCiG,EAAa7E,cAAb6E,SADmC,EAEO5E,mBAChDrB,EAAMkR,QAHmC,mBAEpCC,EAFoC,KAEjBjQ,EAFiB,KAM3C2G,qBAAU,WACkB,cAAtB5B,EAAS6J,SACX5O,EAAqB2I,KAAW5I,OACvBgF,EAAS6J,SAASsB,SAAS,aACpClQ,EAAqB2I,KAAWwH,aAEjC,CAACpL,EAAS6J,WAwBb,OAAO,kBAAC,GAAD,KAtBmB,SAACoB,GAIzB,OAAQA,GACN,KAAKrH,KAAWC,WACd,OACE,kBAACwH,GAAD,CAAwBpQ,qBAAsBA,IAElD,KAAK2I,KAAW5I,MACd,OAAO,kBAACsQ,EAAD,CAAarQ,qBAAsBA,IAC5C,KAAK2I,KAAWwH,UACd,OAAO,kBAAC,GAAD,CAAgBnQ,qBAAsBA,IAC/C,KAAK2I,KAAW2H,MACd,OACE,kBAACC,GAAD,CAAuBvQ,qBAAsBA,IAEjD,QACE,OAAO,kBAACqQ,EAAD,CAAarQ,qBAAsBA,KAI7BwQ,CAAkBP,KAKjC7N,GAAYxD,IAAOC,IAAV,KAGW4R","file":"static/js/10.73ceffa1.chunk.js","sourcesContent":["const baseUrl = process.env.REACT_APP_API_ENDPOINT!;\n\nexport const sellers = baseUrl + 'sellers/';\nexport const charges = baseUrl + 'charges';\nexport const vouchers = baseUrl + 'gift_cards/';\nexport const campaigns = baseUrl + 'campaigns/';\nexport const distributors = baseUrl + 'distributors/';\nexport const passportVouchers = baseUrl + 'participating_sellers/';\nexport const contacts = baseUrl + 'contacts/';\nexport const tickets = baseUrl + 'tickets/';\nexport const participatingSellers = baseUrl + 'participating_sellers/';\nexport const sponsorSellers = baseUrl + 'sponsor_sellers/';\nexport const locations = baseUrl + 'locations/';\n","import axios from 'axios';\nimport { CardElement } from '@stripe/react-stripe-js';\nimport { Buyer, PaymentParams, SquareLineItems } from './types';\nimport {\n  charges,\n  sellers,\n  vouchers,\n  campaigns,\n  distributors,\n  passportVouchers,\n  contacts,\n  tickets,\n  participatingSellers,\n  sponsorSellers,\n  locations,\n} from './endpoints';\n\n// Fix return typing\nexport const getSellers = async (lang?: string): Promise<any> => {\n  return await axios.get(sellers, {\n    params: { locale: localeFromLanguage(lang) },\n  });\n};\n\n// Fix return typing\nexport const getSeller = async (id: string, lang?: string): Promise<any> => {\n  return await axios.get(sellers + id, {\n    params: { locale: localeFromLanguage(lang) },\n  });\n};\n\n// TODO(ArtyEmsee): add typing for stripe elements\nexport const makePayment = async (\n  stripe: any,\n  elements: any,\n  payment: PaymentParams,\n  buyer: Buyer\n) => {\n  const { email, name } = buyer;\n\n  // TODO(ArtyEmsee): abstract api call, create global object for headers\n  await axios\n    .post(\n      charges,\n      {\n        is_square: false,\n        line_items: [payment],\n        email: email,\n      },\n      { headers: { 'Access-Control-Allow-Origin': '*' } }\n    )\n    .then(async (res) => {\n      // TODO(ArtyEmsee): fix response to success\n      if (!stripe || !elements) return;\n      else {\n        const cardElement = elements!.getElement(CardElement);\n        const result = await stripe!.confirmCardPayment(\n          `${res.data.client_secret}`,\n          {\n            payment_method: {\n              card: cardElement!,\n              billing_details: {\n                name: name,\n                email: email,\n              },\n            },\n          }\n        );\n\n        if (result.error) {\n          console.log(result.error.message);\n        } else {\n          if (result.paymentIntent?.status === 'succeeded') {\n            console.log(\n              result.paymentIntent?.status,\n              'The payment has been processed!'\n            );\n          }\n        }\n      }\n    });\n\n  // TODO(ArtyEmsee): fix response to error\n};\n\nexport const makeSquarePayment = async (\n  nonce: string,\n  sellerId: string,\n  payment: SquareLineItems,\n  buyer: Buyer,\n  isDistribution: boolean,\n  campaignId?: string\n) => {\n  const { email, name } = buyer;\n  const idempotencyKey = buyer.idempotency_key;\n  const isSubscribed = buyer.is_subscribed;\n\n  return await axios\n    .post(\n      charges,\n      {\n        is_square: true,\n        nonce,\n        line_items: payment,\n        email,\n        name,\n        seller_id: sellerId,\n        idempotency_key: idempotencyKey,\n        is_subscribed: isSubscribed,\n        is_distribution: isDistribution, // TODO: deprecate this in favor of campaignId\n        campaign_id: campaignId,\n      },\n      { headers: { 'Access-Control-Allow-Origin': '*' } }\n    )\n    .then(async (res) => {\n      return res;\n    })\n    .catch((err) => {\n      throw err;\n    });\n};\n\nexport const getVoucher = async (id: string) =>\n  axios\n    .get(vouchers + id)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const updateVoucher = async (id: string, amount: number) =>\n  axios\n    .put(vouchers + id, { amount })\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getMerchantGiftCards = async (seller_id: string, secret: string) =>\n  axios.get(sellers + seller_id + '/gift_cards/' + secret).then((res) => res); // don't catch error, throw it up the stack\n\nfunction localeFromLanguage(language?: string) {\n  switch (language) {\n    case 'cn':\n      return 'zh-CN';\n    case 'en':\n    default:\n      return 'en';\n  }\n}\n\nexport const getCampaigns = async (): Promise<any> => {\n  return await axios\n    .get(campaigns)\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const getCampaignsForMerchant = async (\n  seller_id: string\n): Promise<any> => {\n  return await axios\n    .get(sellers + seller_id + '/campaigns')\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const getDistributor = async (id: string): Promise<any> => {\n  return await axios\n    .get(distributors + id)\n    .then((res) => res)\n    .catch((err) => err);\n};\n\n// for passport crawl voucher print outs\nexport const getParticipatingMerchant = async (id: string) =>\n  axios\n    .get(passportVouchers + id)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getParticipatingMerchantTickets = async (\n  id: string,\n  tickets_secret: string\n) =>\n  axios\n    .get(passportVouchers + id + '/tickets/' + tickets_secret)\n    .then((res) => res)\n    .catch((err) => err);\n\n// validate passport email\nexport const getPassportEmailId = async (email: string) =>\n  axios\n    .get(contacts, {\n      params: { email },\n    })\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getContactInfo = async (passportId: string) =>\n  axios\n    .get(contacts + passportId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const createPassportEmailId = async (\n  email: string,\n  instagram: string\n) => {\n  let params = {};\n\n  if (instagram) params = { email, instagram };\n  else params = { email };\n\n  return axios\n    .post(contacts, params)\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const updatePassportInstagram = async (\n  id: string,\n  instagram: string\n) => {\n  return axios\n    .put(contacts + id, { instagram })\n    .then((res) => res)\n    .catch((err) => err);\n};\n\nexport const checkForValidTicket = async (ticket_id: string) =>\n  axios\n    .get(tickets + ticket_id)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const updateTicketContactId = async (\n  ticket_id: string,\n  contact_id: string\n) =>\n  axios\n    .put(tickets + ticket_id, { contact_id })\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getPassportTickets = async (passportId: string) =>\n  axios\n    .get(contacts + passportId + '/tickets')\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getParticipatingSeller = async (sellerId: string) =>\n  axios\n    .get(participatingSellers + sellerId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const sendRedeemTicketsEmail = async (passportId: string) =>\n  axios\n    .post(contacts + passportId + '/rewards')\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getLocationById = async (locationId: number) =>\n  axios\n    .get(locations + locationId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getAllSponsors = async () =>\n  axios\n    .get(sponsorSellers)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getOneSponsor = async (rewardId: number) =>\n  axios\n    .get(sponsorSellers + rewardId)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const redeemReward = async (\n  contact_id: number,\n  auth_token: string,\n  tickets: Array<any>\n) =>\n  axios\n    .put(contacts + contact_id + '/tickets/' + auth_token, { tickets })\n    .then((res) => res)\n    .catch((err) => err);\n","import * as React from 'react';\nimport setRef from './setRef';\nexport default function useForkRef(refA, refB) {\n  /**\n   * This will create a new function if the ref props change and are defined.\n   * This means react will call the old forkRef with `null` and the new forkRef\n   * with the ref. Cleanup naturally emerges from this behavior\n   */\n  return React.useMemo(function () {\n    if (refA == null && refB == null) {\n      return null;\n    }\n\n    return function (refValue) {\n      setRef(refA, refValue);\n      setRef(refB, refValue);\n    };\n  }, [refA, refB]);\n}","// TODO v5: consider to make it private\nexport default function setRef(ref, value) {\n  if (typeof ref === 'function') {\n    ref(value);\n  } else if (ref) {\n    ref.current = value;\n  }\n}","module.exports = __webpack_public_path__ + \"static/media/CircleLogo.0fc95748.png\";","import React from 'react';\nexport default React.createContext(null);","/* eslint-disable react-hooks/rules-of-hooks, react-hooks/exhaustive-deps */\nimport * as React from 'react';\nexport default function useControlled(_ref) {\n  var controlled = _ref.controlled,\n      defaultProp = _ref.default,\n      name = _ref.name,\n      _ref$state = _ref.state,\n      state = _ref$state === void 0 ? 'value' : _ref$state;\n\n  var _React$useRef = React.useRef(controlled !== undefined),\n      isControlled = _React$useRef.current;\n\n  var _React$useState = React.useState(defaultProp),\n      valueState = _React$useState[0],\n      setValue = _React$useState[1];\n\n  var value = isControlled ? controlled : valueState;\n\n  if (process.env.NODE_ENV !== 'production') {\n    React.useEffect(function () {\n      if (isControlled !== (controlled !== undefined)) {\n        console.error([\"Material-UI: A component is changing the \".concat(isControlled ? '' : 'un', \"controlled \").concat(state, \" state of \").concat(name, \" to be \").concat(isControlled ? 'un' : '', \"controlled.\"), 'Elements should not switch from uncontrolled to controlled (or vice versa).', \"Decide between using a controlled or uncontrolled \".concat(name, \" \") + 'element for the lifetime of the component.', \"The nature of the state is determined during the first render, it's considered controlled if the value is not `undefined`.\", 'More info: https://fb.me/react-controlled-components'].join('\\n'));\n      }\n    }, [controlled]);\n\n    var _React$useRef2 = React.useRef(defaultProp),\n        defaultValue = _React$useRef2.current;\n\n    React.useEffect(function () {\n      if (!isControlled && defaultValue !== defaultProp) {\n        console.error([\"Material-UI: A component is changing the default \".concat(state, \" state of an uncontrolled \").concat(name, \" after being initialized. \") + \"To suppress this warning opt to use a controlled \".concat(name, \".\")].join('\\n'));\n      }\n    }, [JSON.stringify(defaultProp)]);\n  }\n\n  var setValueIfUncontrolled = React.useCallback(function (newValue) {\n    if (!isControlled) {\n      setValue(newValue);\n    }\n  }, []);\n  return [value, setValueIfUncontrolled];\n}","// based on https://github.com/WICG/focus-visible/blob/v4.1.5/src/focus-visible.js\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nvar hadKeyboardEvent = true;\nvar hadFocusVisibleRecently = false;\nvar hadFocusVisibleRecentlyTimeout = null;\nvar inputTypesWhitelist = {\n  text: true,\n  search: true,\n  url: true,\n  tel: true,\n  email: true,\n  password: true,\n  number: true,\n  date: true,\n  month: true,\n  week: true,\n  time: true,\n  datetime: true,\n  'datetime-local': true\n};\n/**\n * Computes whether the given element should automatically trigger the\n * `focus-visible` class being added, i.e. whether it should always match\n * `:focus-visible` when focused.\n * @param {Element} node\n * @return {boolean}\n */\n\nfunction focusTriggersKeyboardModality(node) {\n  var type = node.type,\n      tagName = node.tagName;\n\n  if (tagName === 'INPUT' && inputTypesWhitelist[type] && !node.readOnly) {\n    return true;\n  }\n\n  if (tagName === 'TEXTAREA' && !node.readOnly) {\n    return true;\n  }\n\n  if (node.isContentEditable) {\n    return true;\n  }\n\n  return false;\n}\n/**\n * Keep track of our keyboard modality state with `hadKeyboardEvent`.\n * If the most recent user interaction was via the keyboard;\n * and the key press did not include a meta, alt/option, or control key;\n * then the modality is keyboard. Otherwise, the modality is not keyboard.\n * @param {KeyboardEvent} event\n */\n\n\nfunction handleKeyDown(event) {\n  if (event.metaKey || event.altKey || event.ctrlKey) {\n    return;\n  }\n\n  hadKeyboardEvent = true;\n}\n/**\n * If at any point a user clicks with a pointing device, ensure that we change\n * the modality away from keyboard.\n * This avoids the situation where a user presses a key on an already focused\n * element, and then clicks on a different element, focusing it with a\n * pointing device, while we still think we're in keyboard modality.\n */\n\n\nfunction handlePointerDown() {\n  hadKeyboardEvent = false;\n}\n\nfunction handleVisibilityChange() {\n  if (this.visibilityState === 'hidden') {\n    // If the tab becomes active again, the browser will handle calling focus\n    // on the element (Safari actually calls it twice).\n    // If this tab change caused a blur on an element with focus-visible,\n    // re-apply the class when the user switches back to the tab.\n    if (hadFocusVisibleRecently) {\n      hadKeyboardEvent = true;\n    }\n  }\n}\n\nfunction prepare(doc) {\n  doc.addEventListener('keydown', handleKeyDown, true);\n  doc.addEventListener('mousedown', handlePointerDown, true);\n  doc.addEventListener('pointerdown', handlePointerDown, true);\n  doc.addEventListener('touchstart', handlePointerDown, true);\n  doc.addEventListener('visibilitychange', handleVisibilityChange, true);\n}\n\nexport function teardown(doc) {\n  doc.removeEventListener('keydown', handleKeyDown, true);\n  doc.removeEventListener('mousedown', handlePointerDown, true);\n  doc.removeEventListener('pointerdown', handlePointerDown, true);\n  doc.removeEventListener('touchstart', handlePointerDown, true);\n  doc.removeEventListener('visibilitychange', handleVisibilityChange, true);\n}\n\nfunction isFocusVisible(event) {\n  var target = event.target;\n\n  try {\n    return target.matches(':focus-visible');\n  } catch (error) {// browsers not implementing :focus-visible will throw a SyntaxError\n    // we use our own heuristic for those browsers\n    // rethrow might be better if it's not the expected error but do we really\n    // want to crash if focus-visible malfunctioned?\n  } // no need for validFocusTarget check. the user does that by attaching it to\n  // focusable events only\n\n\n  return hadKeyboardEvent || focusTriggersKeyboardModality(target);\n}\n/**\n * Should be called if a blur event is fired on a focus-visible element\n */\n\n\nfunction handleBlurVisible() {\n  // To detect a tab/window switch, we look for a blur event followed\n  // rapidly by a visibility change.\n  // If we don't see a visibility change within 100ms, it's probably a\n  // regular focus change.\n  hadFocusVisibleRecently = true;\n  window.clearTimeout(hadFocusVisibleRecentlyTimeout);\n  hadFocusVisibleRecentlyTimeout = window.setTimeout(function () {\n    hadFocusVisibleRecently = false;\n  }, 100);\n}\n\nexport default function useIsFocusVisible() {\n  var ref = React.useCallback(function (instance) {\n    var node = ReactDOM.findDOMNode(instance);\n\n    if (node != null) {\n      prepare(node.ownerDocument);\n    }\n  }, []);\n\n  if (process.env.NODE_ENV !== 'production') {\n    // eslint-disable-next-line react-hooks/rules-of-hooks\n    React.useDebugValue(isFocusVisible);\n  }\n\n  return {\n    isFocusVisible: isFocusVisible,\n    onBlurVisible: handleBlurVisible,\n    ref: ref\n  };\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAASCAYAAAC9+TVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHqSURBVHgBrVS/L0NRFP7u9avxo3kWrYakJkI0jYhBIioWFhHEYqDxB2CRWPyabLoLJSESSQ0Wix9tLJgaImGrEKlJKUGF69xHeX3eZXGSl/tyz/e+e953vnOBfwhm3ghqbs2Wbx8SQvgEmJcAmgASDCIqBJZSeAn746cxJclKqWeIlkn5IdQRowOm+uLHi+mNrPTLqsszQcsMEdjwe2iMsc4euwOh5HXki2TFWTtARQXM6JLGev0pKHfh7Yl+5C5pTPu6ixy3ofvrfRZ0VrnzWO4ubbqNiKaFAMraWvBweYVcexFIF+x0D+Lm5MwISzw/8gomq6DyguYq5Omp26R+uiTpONzExeYODkbGM3Ak9lQ2Y+iHRTxcXH0DP9eXu/sfOMZEM5dtxC+RQ1W0hub1qs7mli0QzMv/aCfat9b0dZv0kPpYhJb9YSRrIqlLQZkLe/5eFYGMBJdOVGWlLhsN7eaOZIYQUS4Ei6jyspK66VEU11SqOYAlnrLxgPwlK0BxdaXuFU1NEuPICuuzs1zqGebArGU1pIlKD5ohv5wh3fbrZN2uQgd5Dj4z0GR1AwHkEOqj8jWARBTuKiw5JybpG2XbP7s51hc/mknv/bhPVp1e9xtefZToF8xwn1AXyJiR1BMP+BPRDA3fAS2WtmfQGnaeAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/PassportDashboardBackground.fb69d2d4.png\";","module.exports = __webpack_public_path__ + \"static/media/passportIcon.e16097f4.png\";","module.exports = __webpack_public_path__ + \"static/media/CrawlMap.79d9382b.png\";","import styled from 'styled-components';\n\ntype Props = {\n  color?: string;\n  bold?: string;\n  align?: string;\n  size?: string;\n  isMainTitle?: boolean;\n};\n\ntype PassportProps = {\n  mainView?: boolean;\n};\n\nconst CardContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 367px;\n  margin: 0 auto;\n  background: #ffffff;\n\n  box-shadow: 0 0 10px rgba(0, 0, 0, 0.25);\n  border: 1px solid #dedede;\n  border-radius: 20px;\n  box-sizing: border-box;\n  overflow: hidden;\n\n  position: absolute;\n  // opacity: ${(props: PassportProps) => (props.mainView ? '1' : '0.85')};\n  z-index: ${(props: PassportProps) => (props.mainView ? '10' : '0')};\n  top: ${(props: PassportProps) => (props.mainView ? '50px' : '0')};\n`;\n\nconst ExternalLink = styled.a`\n  font-weight: bold;\n  text-transform: uppercase;\n  color: black;\n  font-size: 12px;\n  margin: 20px;\n  letter-spacing: .15em;\n\n  &.faq {\n      @media (max-width: 365px) {\n          margin-left: 8px;\n          margin-right: 8px;\n  }\n`;\n\nconst TitleRow = styled.div`\n  text-align: center;\n  padding: 10px 20px;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Title = styled.span`\n  color: ${(props) => (props.color ? props.color : 'black')};\n  font-size: 14px;\n  font-weight: bold;\n  text-align: center;\n  letter-spacing: 0.15em;\n  margin: 5px auto;\n`;\n\nconst MainTitle = styled(Title)`\n  color: ${(props: Props) => (props.isMainTitle ? 'black' : 'grey')};\n`;\n\nconst SubTitle = styled.span`\n  color: ${(props: Props) => (props.color ? props.color : 'black')};\n  font-size: ${(props: Props) => (props.size ? props.size : '12px')};\n  font-weight: ${(props: Props) => (props.bold ? props.bold : '400')};\n  text-align: ${(props: Props) => (props.align ? props.align : 'center')};\n  letter-spacing: 0.1em;\n`;\n\nconst Button = styled.button`\n  margin: 10px auto;\n  outline: none;\n  cursor: pointer;\n\n  &.linkButton {\n    background-color: transparent;\n    border: none;\n    letter-spacing: 0.1em;\n    font-weight: bold;\n    text-transform: uppercase;\n  }\n`;\n\nconst ErrorMessage = styled.div`\n  color: red;\n  padding-top: 5px;\n`;\n\ninterface CardTextProps {\n  bold?: string;\n  size?: string;\n  color?: string;\n  letterSpacing?: string;\n}\n\nconst CardText = styled.p`\n  text-transform: uppercase;\n  text-align: center;\n  letter-spacing: 0.1em;\n  margin: 0;\n  font-weight: ${(props: CardTextProps) => (props.bold ? props.bold : '400')};\n  font-size: ${(props: CardTextProps) => (props.size ? props.size : '12px')};\n  color: ${(props: CardTextProps) => (props.color ? props.color : '12px')};\n  letter-spacing; ${(props: CardTextProps) =>\n    props.letterSpacing ? props.letterSpacing : ''};\n`;\n\nexport {\n  CardContainer,\n  TitleRow,\n  Title,\n  MainTitle,\n  SubTitle,\n  Button,\n  ErrorMessage,\n  ExternalLink,\n  CardText,\n};\n","import React, { useState } from 'react';\nimport styled from 'styled-components';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { withStyles, Theme } from '@material-ui/core/styles';\nimport { useHistory } from 'react-router-dom';\n\nimport { Title, SubTitle, Button, ErrorMessage } from './style';\nimport { EMAIL_REGEX } from '../../utilities/hooks/ModalPaymentContext/constants';\nimport {\n  getPassportEmailId,\n  createPassportEmailId,\n  updatePassportInstagram,\n  checkForValidTicket,\n  updateTicketContactId,\n  getPassportTickets,\n} from '../../utilities/api/interactionManager';\n\nimport CrawlInfoIcon from './CrawlInfoIcon.png';\nimport CircleLogo from './CircleLogo.png';\n\ninterface Props {\n  setCurrentScreenView: Function;\n}\n\nconst Track = ({ setCurrentScreenView }: Props) => {\n  const { push } = useHistory();\n  const [email, setEmail] = useState('');\n  const [isEmailValid, setIsEmailValid] = useState(true);\n\n  const [ticketCode, setTicketCode] = useState('');\n  const [isTicketValid, setIsTicketValid] = useState(true);\n\n  const [instagramHandle, setinstagramHandle] = useState('');\n\n  const findOrCreateUser = async (email, viewTickets) => {\n    const { data } = await getPassportEmailId(email);\n\n    // (to view tickets): sets error message for non-existent users and users with no tickets\n    if (viewTickets && !data) {\n      setIsEmailValid(false);\n      setEmail('');\n      return;\n    } else if (viewTickets && data) {\n      const { data: hasTickets } = await getPassportTickets(data.id);\n      if (hasTickets.length) push(`/passport/${data.id}/tickets`);\n      else setIsEmailValid(false);\n      return;\n    }\n\n    // (to add tickets): searches for existing user or creates new user\n    let contactId = '';\n    if (data) {\n      contactId = data.id;\n      // updates instagram handle for existing users\n      if (instagramHandle) {\n        await updatePassportInstagram(contactId, instagramHandle);\n      }\n    } else {\n      const {\n        data: { id },\n      } = await createPassportEmailId(email, instagramHandle);\n      contactId = id;\n    }\n    await findTicketCode(ticketCode, contactId);\n  };\n\n  const findTicketCode = async (code, contactId) => {\n    const formattedCode = code.split('-').join('');\n\n    const { data } = await checkForValidTicket(formattedCode.toUpperCase());\n    if (data && !data.contact_id) {\n      const { data: newContactId } = await updateTicketContactId(\n        formattedCode,\n        contactId\n      );\n      newContactId && push(`/passport/${newContactId.contact_id}/tickets`);\n    } else {\n      setIsTicketValid(false);\n      setTicketCode('');\n    }\n  };\n\n  // const formatTicketCode = (code) => {\n  //   if (code.length === 3) {\n  //     setTicketCode(code + '-');\n  //   }\n  // };\n\n  const SupporterTooltip = withStyles((theme: Theme) => ({\n    tooltip: {\n      backgroundColor: '#ffffff',\n      color: 'rgba(0, 0, 0, 0.87)',\n      width: '100%',\n      fontSize: theme.typography.pxToRem(14),\n      border: '1px solid #dadde9',\n    },\n  }))(Tooltip);\n\n  const socialMediaLinks = [\n    {\n      platform: 'facebook',\n      url: 'https://www.facebook.com/Send-Chinatown-Love-100872288240891',\n    },\n    { platform: 'instagram', url: 'https://instagram.com/sendchinatownlove' },\n    {\n      platform: 'wechat',\n      url:\n        'https://www.sendchinatownlove.com/uploads/1/3/1/9/131935948/wechat_scl.png',\n    },\n  ];\n\n  return (\n    <Container>\n      <PassportCard>\n        <Logo src={CircleLogo} alt=\"scl-log\" />\n        <InputContainer className=\"trackScreen top\">\n          <Title color=\"#a8192e\">PASSPORT TO CHINATOWN</Title>\n          <SubTitle>\n            Enter your ticket code to start accumulating rewards you can use in\n            Chinatown\n          </SubTitle>\n\n          <Column />\n\n          <Column>\n            <Label htmlFor=\"email-input\">Email Address</Label>\n            <InputField\n              name=\"email-input\"\n              type=\"email\"\n              onChange={(e) => {\n                setEmail(e.target.value);\n                setIsEmailValid(true);\n              }}\n              value={email}\n              pattern={EMAIL_REGEX.source}\n            />\n            {!!email && !EMAIL_REGEX.test(email) && (\n              <ErrorMessage>Please enter a valid email address.</ErrorMessage>\n            )}\n            {!isEmailValid && (\n              <ErrorMessage>\n                Sorry, there are no saved tickets tied to this email.\n              </ErrorMessage>\n            )}\n          </Column>\n\n          <Column>\n            <Label htmlFor=\"ticket-code\">Ticket Code</Label>\n            <InputField\n              name=\"ticket-code\"\n              type=\"text\"\n              onChange={(e) => {\n                setTicketCode(e.target.value);\n                setIsTicketValid(true);\n              }}\n              // onKeyUp={(e) => {\n              //   if (e.key !== 'Backspace' || e.keyCode !== 8) {\n              //     formatTicketCode(e.target['value']);\n              //   }\n              // }}\n              value={ticketCode}\n              maxLength={6}\n            />\n            {!isTicketValid && (\n              <ErrorMessage>\n                This is not a valid Ticket Code. Please check your ticket again\n                and make sure you haven’t added this ticket before.\n              </ErrorMessage>\n            )}\n          </Column>\n\n          <Column>\n            <Row className=\"row-no-margin\">\n              <Label htmlFor=\"instagram-handle\">\n                Instagram Handle <strong>(for Digital Giveaway)</strong>\n              </Label>\n              <SupporterTooltip\n                title={\n                  <React.Fragment>\n                    <ToolTipTable>\n                      <tbody>\n                        <tr>\n                          To be entered into our weekly Digital Giveaways, visit\n                          3 merchants and post and tag{' '}\n                          <strong>@sendchinatownlove</strong>\n                          &nbsp;with your food crawl pictures on Instagram.\n                          Enter your Instagram handle so we can track your\n                          entries.\n                        </tr>\n                      </tbody>\n                    </ToolTipTable>\n                  </React.Fragment>\n                }\n                enterTouchDelay={10}\n                leaveTouchDelay={6000}\n                placement=\"left\"\n              >\n                <div>\n                  <img src={CrawlInfoIcon} alt=\"instagram-crawl-info\" />\n                </div>\n              </SupporterTooltip>\n            </Row>\n            <InputField\n              name=\"instagram-handle\"\n              type=\"text\"\n              onChange={(e) => setinstagramHandle(e.target.value)}\n              value={instagramHandle}\n              placeholder=\"@\"\n            />\n            <SubTitle color=\"grey\" size=\"11px\" align=\"left\">\n              Optional\n            </SubTitle>\n          </Column>\n        </InputContainer>\n\n        <InputContainer className=\"bottom\">\n          <Button\n            value=\"track-screen-button\"\n            className=\"button--red-filled\"\n            disabled={!email || !ticketCode || !isTicketValid}\n            onClick={() => {\n              findOrCreateUser(email, false);\n            }}\n          >\n            Add Ticket\n          </Button>\n          {!!email && EMAIL_REGEX.test(email) && (\n            <Button\n              className=\"linkButton\"\n              disabled={!email}\n              onClick={() => {\n                findOrCreateUser(email, true);\n              }}\n            >\n              View my tickets\n            </Button>\n          )}\n        </InputContainer>\n      </PassportCard>\n\n      <Row>\n        <ExternalLinks\n          href=\"https://www.sendchinatownlove.com/food-crawl.html\"\n          target=\"_blank\"\n        >\n          Learn More\n        </ExternalLinks>\n        <LinksContainer>\n          {socialMediaLinks.map((social) => (\n            <Icon href={social.url} target=\"_blank\">\n              <span className={`fa fa-${social.platform}`} />\n            </Icon>\n          ))}\n        </LinksContainer>\n      </Row>\n    </Container>\n  );\n};\n\nexport default Track;\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  width: 367px;\n  margin: 0 auto;\n`;\n\nconst PassportCard = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: 12px;\n  width: 367px;\n  margin: 50px 0px 0px;\n  z-index: 0;\n  filter: drop-shadow(0px 0px 2px rgba(0, 0, 0, 0.25));\n`;\n\nconst Logo = styled.img`\n  z-index: 10;\n  width: 100px;\n  height: 100px;\n  background-color: white;\n  border-radius: 50%;\n  margin-bottom: -50px;\n`;\n\nexport const InputContainer = styled.div`\n  background-color: white;\n  padding: 25px 20px;\n  box-sizing: border-box;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n\n  &.trackScreen {\n    padding-top: 60px;\n  }\n\n  &.top {\n    border-radius: 20px 20px 0px 0px;\n    border-bottom: 1px dashed #dedede;\n  }\n\n  &.bottom {\n    padding-top: 25px;\n    border-radius: 0px 0px 20px 20px;\n    border-top: 1px dashed #dedede;\n    text-align: center;\n  }\n\n  &.red {\n    color: #a8192e;\n  }\n`;\n\nconst Label = styled.label`\n  font-size: 13px;\n`;\n\nconst Column = styled.div`\n  margin: 15px 0;\n`;\n\nconst InputField = styled.input`\n  width: 100%;\n  height: 45px;\n  border: 1px solid #dadada;\n  margin-top: 8px;\n  padding-left: 1em;\n  border-radius: 5px;\n  outline: none;\n  -webkit-appearance: none;\n\n  :invalid {\n    border: 1px solid red;\n  }\n`;\n\nconst ToolTipTable = styled.table`\n  width: 100%;\n`;\n\n// FOOTER\nexport const Row = styled.div`\n  display: flex;\n  align-items: center;\n  margin: 15px 0 25px;\n  width: 100%;\n  justify-content: space-between;\n\n  &.row-no-margin {\n    margin: 0 auto;\n  }\n`;\n\nexport const ExternalLinks = styled.a`\n  font-weight: bold;\n  text-transform: uppercase;\n  color: black;\n  font-size: 12px;\n  margin: 20px;\n  cursor: pointer;\n  letter-spacing: 2px;\n`;\n\nconst LinksContainer = styled.div`\n  padding: 0;\n  list-style: none;\n  display: flex;\n  flex-direction: row;\n`;\n\nconst Icon = styled.a`\n  text-decoration: none;\n  color: #a8192e;\n  padding: 0 15px;\n  font-size: 22px;\n`;\n","import React from 'react';\n\nimport { SubTitle, Button } from './style';\n\nexport const NoRewardsFooter = () => {\n  return (\n    <>\n      <SubTitle bold=\"700\">Have more tickets to add?</SubTitle>\n\n      <Button\n        value=\"redemption-selected-button\"\n        className=\"button--red-filled\"\n        onClick={(e) => {\n          e.preventDefault();\n          window.location.href = '/passport';\n        }}\n      >\n        ADD NEW TICKETS\n      </Button>\n    </>\n  );\n};\n\ninterface RedeemRewardsProps {\n  id: number;\n  access_token: string;\n  selectedSponsor: null | any;\n}\n\nexport const RedeemRewardsFooter = (props: RedeemRewardsProps) => {\n  return (\n    <>\n      <SubTitle bold=\"700\">\n        When redeemed, you have 5 minutes to use your reward.\n      </SubTitle>\n\n      <Button\n        value=\"redemption-selected-button\"\n        className=\"button--red-filled\"\n        disabled={!props.selectedSponsor}\n        onClick={(e) => {\n          e.preventDefault();\n          window.location.href = `/passport/${props.id}/redeem/${props.access_token}/sponsor/${props.selectedSponsor.id}`;\n        }}\n      >\n        REDEEM NOW\n      </Button>\n    </>\n  );\n};\n\ninterface defaultProps {\n  allSponsors: any[];\n  id: number;\n}\n\nexport const DefaultFooter = (props: defaultProps) => {\n  return (\n    <>\n      <SubTitle bold=\"700\">\n        Select an offer and be ready to show this screen when you’re ordering.\n      </SubTitle>\n\n      {props.allSponsors.length <= 4 && (\n        <Button\n          className=\"linkButton\"\n          onClick={(e) => {\n            e.preventDefault();\n            window.location.href = `/passport/${props.id}/tickets`;\n          }}\n        >\n          RETURN TO PASSPORT\n        </Button>\n      )}\n    </>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useParams } from 'react-router-dom';\n\nimport {\n  NoRewardsFooter,\n  RedeemRewardsFooter,\n  DefaultFooter,\n} from './RedemptionFooters';\nimport { CardText } from './style';\nimport CircleLogo from './CircleLogo.png';\n\nimport {\n  getPassportTickets,\n  getAllSponsors,\n  getLocationById,\n} from '../../utilities/api/interactionManager';\n\ninterface Props {\n  setCurrentScreenView: Function;\n}\n\nconst PassportSelected = ({ setCurrentScreenView }: Props) => {\n  const { id, access_token } = useParams();\n\n  const [tickets, setTickets] = useState<any[]>([]);\n  const numRewards = Math.floor(tickets.length / 3);\n\n  const [allSponsors, setAllSponsors] = useState<any[]>([]);\n  const [selectedSponsor, setSelectedSponsor] = useState({\n    id: null,\n    reward_cost: null,\n  });\n\n  const fetchTickets = async () => {\n    try {\n      const { data: allTickets } = await getPassportTickets(id);\n      const availableTickets = allTickets.filter(\n        (ticket) => ticket.sponsor_seller_id === null\n      );\n      setTickets(availableTickets);\n    } catch (err) {\n      console.error('passport error: ' + err);\n    }\n  };\n\n  const fetchSponsors = async () => {\n    try {\n      const { data: allSponsors } = await getAllSponsors();\n      const allSponsorsWithLocations = await Promise.all(\n        allSponsors.map(async (sponsor) => {\n          const { data: location } = await getLocationById(sponsor.location_id);\n          return { ...sponsor, location: location };\n        })\n      );\n      setAllSponsors(allSponsorsWithLocations);\n    } catch (err) {\n      console.error('passport error: ' + err);\n    }\n  };\n\n  useEffect(() => {\n    fetchTickets();\n    fetchSponsors();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleFooter = () => {\n    if (numRewards === 0) return <NoRewardsFooter />;\n    else if (!!selectedSponsor.id)\n      return (\n        <RedeemRewardsFooter\n          id={id}\n          access_token={access_token}\n          selectedSponsor={selectedSponsor}\n        />\n      );\n    else return <DefaultFooter allSponsors={allSponsors} id={id} />;\n  };\n\n  return (\n    <Container>\n      <Header numSponsors={allSponsors.length}>\n        <Logo src={CircleLogo} alt=\"scl-log\" />\n        <Heading>\n          {numRewards} REWARD{numRewards === 0 || numRewards > 1 ? 'S' : ''}{' '}\n          AVAILABLE\n        </Heading>\n        <SubHeading>Rewards available until 9/30/2020</SubHeading>\n      </Header>\n\n      <RewardsContainer>\n        {allSponsors.length > 0 &&\n          allSponsors.map((sponsor: any) => {\n            return (\n              <SingleRewardContainer\n                selected={selectedSponsor.id === sponsor.id}\n                numRewards={numRewards}\n                onClick={() => {\n                  if (numRewards === 0) {\n                    return;\n                  }\n                  if (selectedSponsor.id !== sponsor.id) {\n                    setSelectedSponsor({\n                      id: sponsor.id,\n                      reward_cost: sponsor.reward_cost,\n                    });\n                  } else {\n                    setSelectedSponsor({\n                      id: null,\n                      reward_cost: null,\n                    });\n                  }\n                }}\n              >\n                {numRewards !== 0 && (\n                  <input\n                    type=\"radio\"\n                    checked={selectedSponsor.id === sponsor.id}\n                    id={sponsor.reward}\n                  />\n                )}\n\n                <SingleRewardInfo>\n                  <div>\n                    <CardText bold=\"700\" size=\"14px\">\n                      {sponsor.reward}\n                    </CardText>\n                    <CardText bold=\"700\" size=\"10px\">\n                      {sponsor.reward_detail}\n                    </CardText>\n                  </div>\n                  <LogoImage src={sponsor.logo_url} alt=\"reward-logo\" />\n                  <CardText bold=\"700\" size=\"10px\">\n                    {sponsor.name}\n                  </CardText>\n                  {sponsor && sponsor.location && (\n                    <CardText size=\"10px\">{sponsor.location.address1}</CardText>\n                  )}\n                </SingleRewardInfo>\n              </SingleRewardContainer>\n            );\n          })}\n        {allSponsors.length > 4 && <Buffer />}\n      </RewardsContainer>\n\n      <Footer numSponsors={allSponsors.length}>{handleFooter()}</Footer>\n    </Container>\n  );\n};\n\nexport default PassportSelected;\n\nconst Container = styled.div`\n  width: 375px;\n  height: 100vh;\n  margin: 0 auto;\n  font-size: 12px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst Header = styled.div<{\n  numSponsors: number;\n}>`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 100vw;\n  position: relative;\n\n  ${(props) =>\n    props.numSponsors > 4\n      ? `    \n      &::after {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 0;\n        height: 90%;\n        width: 100%;\n        background-color: white;\n        box-shadow: 0px 25px 27px 22px white;\n      }\n    `\n      : ''}\n`;\n\nconst Logo = styled.img`\n  z-index: 10;\n  width: 70px;\n  height: 70px;\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.25);\n  background-color: white;\n  border-radius: 50%;\n  margin-top: 10px;\n  margin-bottom: 10px;\n`;\n\nconst Heading = styled.span`\n  letter-spacing: 0.15em;\n  text-transform: uppercase;\n  margin-top: 10px;\n  z-index: 2;\n  font-weight: bold;\n  font-size: 13px;\n`;\n\nconst SubHeading = styled.span`\n  letter-spacing: 0.15em;\n  text-transform: uppercase;\n  margin-top: 10px;\n  z-index: 2;\n`;\n\nconst Footer = styled.div<{\n  numSponsors: number;\n}>`\n  display: flex;\n  flex-direction: column;\n  width: 100vw;\n  padding: 20px;\n\n  & > * {\n    z-index: 2;\n    padding: 10px;\n  }\n\n  ${(props) =>\n    props.numSponsors > 4\n      ? `  \n      height: calc(min-content - 20px);\n      postion: relative;\n      background-color: white;\n      box-shadow: 0px -10px 27px 20px white;\n      z-index: 1;\n    `\n      : ''}\n`;\n\nconst RewardsContainer = styled.div`\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  overflow-y: scroll;\n  padding-top: 20px;\n  padding-bottom: 30px;\n\n  ::-webkit-scrollbar {\n    width: 0px;\n    background: transparent;\n  }\n`;\n\nconst SingleRewardContainer = styled.button<{\n  selected: boolean;\n  numRewards: number;\n}>`\n  width: 160px;\n  height: 220px;\n  border: ${(props) =>\n    props.selected ? '1px solid black' : '1px solid #e5e5e5'};\n  box-shadow: ${(props) =>\n    props.numRewards > 0 ? '0px 0px 10px rgba(0, 0, 0, 0.25)' : 'none'};\n  background-color: white;\n  padding: 5px 5px;\n  box-sizing: border-box;\n  margin: 8px;\n  outline: none;\n  border-radius: 5px;\n  cursor: ${(props) => (props.numRewards > 0 ? 'pointer' : 'auto')};\n\n  display: flex;\n  flex-direction: column;\n`;\n\nconst SingleRewardInfo = styled.div`\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  align-items: center;\n`;\n\nconst LogoImage = styled.img`\n  width: 130px;\n  border-radius: 20px;\n`;\n\nconst Buffer = styled.div`\n  height: 50px;\n  grid-column: 1 / span 2;\n`;\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useParams, useHistory } from 'react-router-dom';\n\nimport { InputContainer } from './TrackScreen';\nimport { CardText, Button, SubTitle } from './style';\nimport CircleLogo from './CircleLogo.png';\n\nimport ScreenName from './ScreenName';\n\nimport {\n  getPassportTickets,\n  getOneSponsor,\n  getLocationById,\n  redeemReward,\n} from '../../utilities/api/interactionManager';\n\ninterface Props {\n  setCurrentScreenView: Function;\n}\n\nconst PassportRedemptionClaim = ({ setCurrentScreenView }: Props) => {\n  const { push } = useHistory();\n  const { id, access_token, sponsor_seller_id } = useParams();\n\n  const [selectedReward, setSelectedReward] = useState({\n    id: '',\n    name: '',\n    location: {\n      address1: '',\n      address2: '',\n      city: '',\n      state: '',\n      zip_code: '',\n    },\n    logo_url: '',\n    reward: '',\n    reward_detail: '',\n  });\n\n  const fetchSponsor = async () => {\n    try {\n      const { data: sponsor } = await getOneSponsor(sponsor_seller_id);\n      const { data: location } = await getLocationById(sponsor_seller_id);\n      setSelectedReward({\n        ...sponsor,\n        location: location,\n      });\n    } catch (err) {\n      console.error('passport error: ' + err);\n    }\n  };\n\n  const handleRedemption = async () => {\n    try {\n      const { data: allTickets } = await getPassportTickets(id);\n      const ticketsToRedeem = allTickets\n        .filter((ticket) => ticket.sponsor_seller_id === null)\n        .slice(0, 3)\n        .map((ticket) => {\n          return { id: ticket.id, sponsor_seller_id };\n        });\n      const { status } = await redeemReward(id, access_token, ticketsToRedeem);\n      // figure out how to handle invalid redemption with this page\n      if (status !== 200) push(`/passport/${id}/tickets`);\n    } catch (err) {\n      console.error('passport error: ' + err);\n    }\n  };\n\n  useEffect(() => {\n    fetchSponsor();\n    handleRedemption();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const [timeLeft, setTimeLeft] = useState(60 * 5);\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      setTimeLeft(timeLeft - 1);\n    }, 1000);\n    if (!timeLeft) setCurrentScreenView(ScreenName.Redemption);\n    return () => clearTimeout(timer);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [timeLeft]);\n\n  const formatTime = (time) => {\n    const sec = time % 60;\n    time = (time - sec) / 60;\n    const min = time % 60;\n\n    const pad = (val) => val.toString().padStart(2, '0');\n    return `${pad(min)}:${pad(sec)}`;\n  };\n\n  return (\n    <Container>\n      <Logo src={CircleLogo} alt=\"scl-log\" />\n      <Shadow>\n        <InputContainer className=\"top shadow\">\n          <ContentContainer>\n            <CardText bold=\"700\" size=\"30px\" letterSpacing=\"0.15em;\">\n              {selectedReward.reward}\n            </CardText>\n            <CardText bold=\"700\" size=\"25px\">\n              {selectedReward.reward_detail}\n            </CardText>\n            <br />\n            <LogoImage src={selectedReward.logo_url} alt=\"reward-logo\" />\n            <br />\n            <div>\n              <CardText bold=\"700\" size=\"15px\">\n                {selectedReward.name}\n              </CardText>\n              {selectedReward && selectedReward.location && (\n                <>\n                  <CardText size=\"15px\">\n                    {selectedReward.location.address1}\n                    {selectedReward.location.address2 && ', '}\n                    {selectedReward.location.address2 &&\n                      selectedReward.location.address2}\n                  </CardText>\n                  <CardText size=\"15px\">\n                    {selectedReward.location.city},{' '}\n                    {selectedReward.location.state}{' '}\n                    {selectedReward.location.zip_code}\n                  </CardText>\n                </>\n              )}\n            </div>\n          </ContentContainer>\n        </InputContainer>\n        <InputContainer className=\"bottom shadow\">\n          <ContentContainer>\n            <CardText size=\"15px\" color=\"#a8192e\">\n              Offer must be used in:\n              <span style={{ fontWeight: 'bold' }}>\n                {' '}\n                {formatTime(timeLeft)}\n              </span>\n            </CardText>\n          </ContentContainer>\n        </InputContainer>\n      </Shadow>\n\n      <Footer>\n        <SubTitle bold=\"700\">\n          Please show this screen to the host when you are placing your order.\n        </SubTitle>\n        <Button\n          value=\"redemption-selected-button\"\n          className=\"button--red-filled\"\n          onClick={(e) => {\n            e.preventDefault();\n            window.location.href = `/passport/${id}/redeem/${access_token}`;\n          }}\n        >\n          MARK AS USED\n        </Button>\n      </Footer>\n    </Container>\n  );\n};\n\nexport default PassportRedemptionClaim;\n\nconst Container = styled.div`\n  position: relative;\n  width: 375px;\n  hidden: 100vh;\n  margin: 0 auto;\n  padding-top: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  font-size: 12px;\n`;\n\nconst Logo = styled.img`\n  z-index: 10;\n  width: 100px;\n  height: 100px;\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.25);\n  background-color: white;\n  border-radius: 50%;\n  margin-bottom: 25px;\n`;\n\nconst ContentContainer = styled.div`\n  max-width: 300px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n`;\n\nconst Shadow = styled.div`\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.25);\n  border-radius: 20px;\n`;\n\nconst LogoImage = styled.img`\n  width: 260px;\n  border-radius: 20px;\n`;\n\nconst Footer = styled.div`\n  margin: 20px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n\n  & > * {\n    padding: 10px;\n  }\n`;\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { Button } from './style';\nimport { dateFormatter } from '../../utilities/general/textFormatter';\n\ninterface Props {\n  stamps: participatingSellerProps[];\n  index: number;\n  sendEmail: () => void;\n}\n\ntype participatingSellerProps = {\n  created_at: string;\n  id: number;\n  name: string;\n  seller_id: number;\n  stamp_url: string;\n  updated_at: string;\n  redeemed_at: string;\n};\ntype redeemRowProp = {\n  status?: RowStatuses;\n};\n\nenum RowStatuses {\n  Inactive,\n  Active,\n  Redeemed,\n}\n\nconst TicketRow = (props: Props) => {\n  const [status, setStatus] = useState<RowStatuses>(RowStatuses.Inactive);\n  const [redeemedOn, setRedeemedOn] = useState('');\n\n  useEffect(() => {\n    if (props.stamps.some((stamp) => stamp.redeemed_at)) {\n      const date = props.stamps.find((stamp) => !!stamp.redeemed_at);\n      if (!!date) setRedeemedOn(date.redeemed_at);\n      setStatus(RowStatuses.Redeemed);\n    } else if (props.stamps.length === 3) {\n      setStatus(RowStatuses.Active);\n    } else {\n      setStatus(RowStatuses.Inactive);\n    }\n  }, [props.stamps]);\n\n  const showRedeemRow = (status) => {\n    switch (status) {\n      case RowStatuses.Redeemed:\n        return `PRIZE REDEEMED ${dateFormatter(redeemedOn)}`;\n      case RowStatuses.Active:\n        return `READY TO REDEEM`;\n      default:\n        if (props.stamps.length === 0) return;\n        return `${3 - props.stamps.length} MORE ${\n          3 - props.stamps.length > 1 ? 'STAMPS' : 'STAMP'\n        }  UNTIL YOUR NEXT REWARD`;\n    }\n  };\n\n  const createStamps = (stamps) => {\n    const filledStamps = stamps.map((ticketInfo) => (\n      <Stamp key={ticketInfo.id} src={ticketInfo.stamp_url} />\n    ));\n\n    while (filledStamps.length < 3) {\n      filledStamps.push(<EmptyStamp />);\n    }\n\n    return filledStamps;\n  };\n\n  return (\n    <TableRow key={props.index} status={status}>\n      <TableIndex> {props.index + 1} </TableIndex>\n      <TableStamp>\n        <StampColumn>\n          {status === RowStatuses.Active && (\n            <SendEmailButton\n              className=\"button--red-filled\"\n              onClick={props.sendEmail}\n            >\n              Send to Email\n            </SendEmailButton>\n          )}\n          <StampRow>{!!props.stamps && createStamps(props.stamps)}</StampRow>\n        </StampColumn>\n        <RedeemedRow status={status}>{showRedeemRow(status)}</RedeemedRow>\n      </TableStamp>\n    </TableRow>\n  );\n};\n\nexport default TicketRow;\n\nconst TableRow = styled.tr`\n  height: 90px;\n  border: 2px solid #a5a5a5;\n  ${(props: redeemRowProp) => {\n    switch (props.status) {\n      case RowStatuses.Redeemed:\n        return `\n          opacity: 0.75;\n          background: rgba(0, 0, 0, 0.05);\n        `;\n      case RowStatuses.Active:\n        return `\n          background: rgba(168, 25, 46, 0.05);\n          color: #A8192E;\n        `;\n      default:\n        return `\n          background: rgba(0, 0, 0, 0);\n          color: black;\n        `;\n    }\n  }};\n`;\nconst TableIndex = styled.td`\n  display: flex;\n  width: 40px;\n  height: 90px;\n  text-align: center;\n  align-items: flex-start;\n  justify-content: center;\n  padding-top: 12px;\n  border-right: 2px solid #a5a5a5;\n  font-weight: bold;\n`;\nconst TableStamp = styled.td`\n  width: 100%;\n  position: relative;\n  padding: 0;\n`;\nconst StampColumn = styled.div`\n  position: relative;\n  width: 100%;\n  height: 70px;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\nconst StampRow = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  margin: 0 auto;\n  width: 80%;\n  height: 100%;\n`;\nconst RedeemedRow = styled.div`\n  border-top: 1px dotted #a5a5a5;\n  width: 100%;\n  margin: 0 auto;\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 10px;\n  height: 20px;\n  ${(props: redeemRowProp) =>\n    props.status === RowStatuses.Active && 'font-weight: 700;'};\n`;\nconst Stamp = styled.img`\n  width: 55px;\n`;\nconst EmptyStamp = styled.div`\n  width: 55px;\n`;\nconst SendEmailButton = styled(Button)`\n  padding: 0;\n  height: 25px;\n  width: 300px;\n  margin: 0 auto;\n  display: flex;\n  justify-content: center;\n  position: absolute;\n\n  font-weight: bold;\n  font-size: 11px;\n  line-height: 15px;\n  align-items: center;\n  text-align: center;\n  letter-spacing: 0.15em;\n  text-transform: uppercase;\n`;\n","export function dateFormatter(date) {\n  const newDate = new Date(date);\n\n  return `${newDate.getMonth()}/${newDate.getDate()}/${newDate.getUTCFullYear()}`;\n}\n","import React from 'react';\nimport styled from 'styled-components';\n\nimport { CardContainer, TitleRow, Title } from './style';\n\ntype Props = {\n  showFaq: boolean;\n  toggleView: () => void;\n};\n\nconst Faq = ({ showFaq, toggleView }: Props) => {\n  const goToFoodCrawlInfo = (e) => {\n    window.open('https://www.sendchinatownlove.com/food-crawl.html', '_blank');\n  };\n\n  return (\n    <CardContainer mainView={showFaq} onClick={toggleView}>\n      <TitleRow>\n        <Title color={showFaq ? 'black' : 'grey'}>HOW TO WIN REWARDS</Title>\n      </TitleRow>\n      {!showFaq && (\n        <>\n          <br />\n          <br />\n        </>\n      )}\n      <FaqContent hidden={!showFaq}>\n        <RewardsLink onClick={goToFoodCrawlInfo}>\n          VIEW ACTIVE REWARDS & GIVEAWAYS\n        </RewardsLink>\n        <Question>1. What is the Send Chinatown Love Food Crawl?</Question>\n        For the <strong>month of September</strong>, Send Chinatown Love is\n        hosting a food crawl in Manhattan’s Chinatown, highlighting 13\n        incredible restaurants, bakeries, cafes and more throughout the\n        neighborhood. Come with your friends and family to explore locally and\n        savor all the incredible things Chinatown has to offer and earn rewards\n        for shopping with our merchants!\n        <Question>\n          2. What is the purpose of the Send Chinatown Love Food Crawl?\n        </Question>\n        <BulletPoint>\n          Chinatown was disproportionately impacted by the lack of tourism and\n          foot traffic resulting from COVID-19. To sustain long-term growth for\n          the businesses in Chinatown, we have planned a food crawl for the\n          entire month of September to bring foot traffic back to the\n          neighborhood.\n        </BulletPoint>\n        <BulletPoint>\n          Unlike a traditional food crawl, we encourage you to participate at\n          your own pace and on your own schedule throughout the month to better\n          ensure everyone’s health and safety.\n        </BulletPoint>\n        <BulletPoint>\n          Collect tickets as you visit our 13 vendors around Chinatown and\n          record them in your <em>Passport to Chinatown</em>. Your tickets will\n          unlock rewards at local businesses in the neighborhood! Visit all 13\n          vendors for a chance to win a grand prize!\n        </BulletPoint>\n        <Question>\n          3. What is the <em>Passport to Chinatown</em>?\n        </Question>\n        The <em>Passport to Chinatown</em> is a mobile site that will be your\n        ultimate guide to the Send Chinatown Love Food Crawl. It will track\n        which vendors you’ve visited and provide a full list of local rewards\n        you can redeem once you’ve submitted your unique ticket codes.\n        <Question>\n          4. How can I access my <em>Passport to Chinatown</em>?\n        </Question>\n        <BulletPoint>\n          Scan the QR code on your ticket to access your{' '}\n          <em>Passport to Chinatown</em>. You will be prompted to submit your\n          email address and your ticket code.\n        </BulletPoint>\n        <BulletPoint>\n          You can then view all of your collected tickets by entering your email\n          address in your <em>Passport</em>, then clicking “View My Tickets.”\n        </BulletPoint>\n        <Question>5. How do I get a ticket?</Question>\n        Spend at least $5 at any one of our 13 participating vendors and you\n        will be issued a ticket. Each ticket has a unique ticket code that\n        cannot be replaced — don’t lose this!\n        <Question>6. How many tickets do I get per purchase?</Question>\n        <BulletPoint>\n          You get one (1) ticket per purchase over $5. You must spend a minimum\n          of $5 to get one (1) ticket, and are limited to one (1) ticket per\n          transaction.\n        </BulletPoint>\n        <BulletPoint>\n          You will not get multiple tickets for purchases over $5.\n        </BulletPoint>\n        <Question>7. What are the tickets for?</Question>\n        The tickets are used to track the vendors you’ve visited. Be sure to\n        submit your unique ticket code to your Passport to Chinatown. Once\n        submitted, every three (3) tickets will unlock rewards from a list of\n        our local rewards partners.\n        <Question>8. How many tickets do I need to win a reward?</Question>\n        <BulletPoint>\n          You must submit a <strong>total of three (3) tickets</strong> to\n          redeem your reward at one of our local reward partners. Each of your\n          three (3) tickets must be obtained from three{' '}\n          <strong>(3) different</strong> vendors. You will{' '}\n          <strong>\n            <em>not</em>\n          </strong>{' '}\n          be eligible if you submit multiple tickets from the same vendor.\n        </BulletPoint>\n        <BulletPoint>\n          Every three (3) tickets qualifies you for one (1) local reward. You\n          can get as many tickets as you want, as long as your three (3) tickets\n          are from different vendors.\n        </BulletPoint>\n        <BulletPoint>\n          For example, if you collect a second ticket from a Food Crawl vendor\n          you’ve already visited, you can use this ticket in combination with\n          two other different vendors to redeem another reward.\n        </BulletPoint>\n        <BulletPoint>\n          You can only redeem your reward once you have{' '}\n          <strong>entered your unique ticket code</strong> into your{' '}\n          <em>Passport to Chinatown</em>.\n        </BulletPoint>\n        <Question>9. What is a “rewards partner,” and who are they?</Question>\n        <BulletPoint>\n          We have partnered with other local businesses to offer rewards to food\n          crawl participants who have successfully collected three (3) tickets.\n          These rewards range from discounts to complimentary items with a\n          purchase.\n        </BulletPoint>\n        <BulletPoint>\n          See the full list of our reward partners and their offerings on our\n          site,{' '}\n          <a\n            href=\"https://www.sendchinatownlove.com/food-crawl.html\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            www.sendchinatownlove.com/food-crawl{' '}\n          </a>\n        </BulletPoint>\n        <Question>10. How do I redeem my reward?</Question>\n        <BulletPoint>\n          Scan the QR code on the back side of your ticket to access your{' '}\n          <em>Passport to Chinatown</em>. You will be able to keep track of the\n          vendors you have visited and redeem your rewards there.\n        </BulletPoint>\n        <BulletPoint>\n          Once you have submitted three (3) tickets (one (1) ticket each from\n          three (3) different vendors) to your <em>Passport</em>, you will be\n          able to redeem a reward from one of our reward partners listed at{' '}\n          <a\n            href=\"https://www.sendchinatownlove.com/food-crawl.html\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            www.sendchinatownlove.com/food-crawl\n          </a>\n          .\n        </BulletPoint>\n        <BulletPoint>\n          Visit one of our reward partners to redeem your reward!\n        </BulletPoint>\n        <Question>11. How long are the rewards valid for?</Question>\n        <BulletPoint>\n          The rewards are redeemable from our local reward partners’ stores for\n          the entire duration of the food crawl (September 1 - 30, 2020). Once\n          you redeem a reward, your <em>Passport to Chinatown</em> will mark\n          that reward as used.\n        </BulletPoint>\n        <BulletPoint>\n          Please note that some of our reward partners are only open certain\n          days of the week. Check our website{' '}\n          <a\n            href=\"https://www.sendchinatownlove.com/food-crawl.html\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            www.sendchinatownlove.com/food-crawl\n          </a>{' '}\n          for the latest updates.\n        </BulletPoint>\n        <Question>12. What are the weekly digital giveaways?</Question>\n        As an added bonus, once you have collected your three (3) tickets, you\n        will be entered into a digital raffle to win our item of the week! These\n        raffle items will be announced every Sunday.\n        <Question>13. How do I enter the weekly digital giveaways?</Question>\n        <BulletPoint>\n          Once you’ve collected three (3) tickets and logged them into the{' '}\n          <em>Passport to Chinatown</em>, you will also be entered into the\n          digital giveaway with just one more step:\n        </BulletPoint>\n        <BulletPoint>\n          Post about the Food Crawl and tag us on Instagram\n          (@sendchinatownlove). This can be an in-feed post or a story. You must\n          include your Instagram username when submitting at least one of your\n          tickets to your Passport to Chinatown.\n        </BulletPoint>\n        <Question>\n          14. How many times can I enter the digital giveaway? Can I have\n          multiple entries?\n        </Question>\n        Every three (3) tickets qualifies you for one (1) entry into our digital\n        giveaway for the month. We’ll select winners four (4) times throughout\n        the month.\n        <Question>\n          15. Will the tickets I’ve collected carry over into other weeks?{' '}\n        </Question>\n        <BulletPoint>\n          Yes! Once you input your ticket codes into your{' '}\n          <em>Passport to Chinatown</em>, they are automatically saved to your\n          email. The tickets collected during one week of the Food Crawl can\n          roll over to other weeks. For example, if you collect one (1) ticket\n          during the first week of September, you can get two (2) more tickets\n          during another week in September to have a total of three (3) tickets.\n          You can now use these three (3) tickets to redeem a local reward from\n          one of our reward partners.\n        </BulletPoint>\n        <BulletPoint>\n          We’ll select winners for digital giveaway four (4) times throughout\n          the month.\n        </BulletPoint>\n        <Question>\n          16. Do I get a grand prize for visiting ALL 13 vendors on the Food\n          Crawl?\n        </Question>\n        YES! Visit all 13 vendors in the month of September to be entered into\n        our grand prize giveaway!\n        <Question>17. What should I bring? </Question>\n        <BulletPoint>\n          <strong>PPE.</strong> Please bring and wear your mask at all times\n          when you’re not eating or drinking. We want to encourage more foot\n          traffic in the area, but not at the expense of others’ safety. Your\n          own personal hand sanitizer is recommended, but not required, as many\n          businesses will already have hand sanitizer available for you.\n        </BulletPoint>\n        <BulletPoint>\n          <strong>Cash.</strong> Remember to bring cash, since many businesses\n          are cash only. If you forget, refer to our Food Crawl map for ATMs in\n          the Chinatown area.\n        </BulletPoint>\n        <BulletPoint>\n          <strong>Friends and family.</strong> Food is always more enjoyable\n          when shared with your loved ones!\n        </BulletPoint>\n      </FaqContent>\n    </CardContainer>\n  );\n};\n\nconst FaqContent = styled.div`\n  padding: 10px 30px 15px;\n  font-size: 12px;\n  overflow: auto;\n  height: calc(100vh - 230px);\n`;\n\nconst RewardsLink = styled.span`\n  text-transform: uppercase;\n  color: black;\n  font-weight: 700;\n  letter-spacing: 0.15em;\n  font-size: 14px;\n  text-decoration: underline;\n  cursor: pointer;\n  font-size: 12px;\n`;\n\nconst Question = styled.p`\n  font-weight: bold;\n  margin-bottom: 1px;\n`;\n\nconst BulletPoint = styled.li`\n  margin-bottom: 12px;\n`;\n\nexport default Faq;\n","import React from \"react\";\n\nexport default () => (\n  <svg\n    width=\"20\"\n    height=\"20\"\n    viewBox=\"0 0 20 20\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <mask\n      id=\"mask0\"\n      mask-type=\"alpha\"\n      maskUnits=\"userSpaceOnUse\"\n      x=\"0\"\n      y=\"0\"\n      width=\"20\"\n      height=\"20\"\n    >\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        d=\"M10.0045 4.91117C7.17786 4.91117 4.89785 7.19117 4.89785 10.0178C4.89785 12.8445 7.17786 15.1245 10.0045 15.1245C12.8312 15.1245 15.1112 12.8445 15.1112 10.0178C15.1112 7.19117 12.8312 4.91117 10.0045 4.91117ZM10.0043 13.338C8.17763 13.338 6.68429 11.8491 6.68429 10.018C6.68429 8.18686 8.17319 6.69797 10.0043 6.69797C11.8354 6.69797 13.3243 8.18686 13.3243 10.018C13.3243 11.8491 11.831 13.338 10.0043 13.338ZM16.5112 4.7022C16.5112 5.36442 15.9778 5.89331 15.3201 5.89331C14.6578 5.89331 14.129 5.35998 14.129 4.7022C14.129 4.04442 14.6623 3.51109 15.3201 3.51109C15.9778 3.51109 16.5112 4.04442 16.5112 4.7022ZM19.8937 5.9114C19.8182 4.31584 19.4537 2.90251 18.2848 1.73806C17.1204 0.573618 15.7071 0.209174 14.1115 0.129174C12.4671 0.0358402 7.53817 0.0358402 5.89373 0.129174C4.30262 0.204729 2.88928 0.569174 1.72039 1.73362C0.551504 2.89806 0.191504 4.3114 0.111504 5.90695C0.0181706 7.5514 0.0181706 12.4803 0.111504 14.1247C0.187059 15.7203 0.551504 17.1336 1.72039 18.2981C2.88928 19.4625 4.29817 19.827 5.89373 19.907C7.53817 20.0003 12.4671 20.0003 14.1115 19.907C15.7071 19.8314 17.1204 19.467 18.2848 18.2981C19.4493 17.1336 19.8137 15.7203 19.8937 14.1247C19.9871 12.4803 19.9871 7.55584 19.8937 5.9114Z\"\n        fill=\"white\"\n      />\n    </mask>\n    <g mask=\"url(#mask0)\">\n      <rect width=\"20\" height=\"20\" fill=\"#9E9E9E\" />\n    </g>\n  </svg>\n);\n\n","import React from \"react\";\n\nexport default () => (\n  <svg\n    width=\"25\"\n    height=\"26\"\n    viewBox=\"0 0 25 26\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <mask\n      id=\"mask0\"\n      mask-type=\"alpha\"\n      maskUnits=\"userSpaceOnUse\"\n      x=\"0\"\n      y=\"0\"\n      width=\"20\"\n      height=\"20\"\n    >\n      <path\n        fill-rule=\"evenodd\"\n        clip-rule=\"evenodd\"\n        d=\"M10.0045 4.91117C7.17786 4.91117 4.89785 7.19117 4.89785 10.0178C4.89785 12.8445 7.17786 15.1245 10.0045 15.1245C12.8312 15.1245 15.1112 12.8445 15.1112 10.0178C15.1112 7.19117 12.8312 4.91117 10.0045 4.91117ZM10.0043 13.338C8.17763 13.338 6.68429 11.8491 6.68429 10.018C6.68429 8.18686 8.17319 6.69797 10.0043 6.69797C11.8354 6.69797 13.3243 8.18686 13.3243 10.018C13.3243 11.8491 11.831 13.338 10.0043 13.338ZM16.5112 4.7022C16.5112 5.36442 15.9778 5.89331 15.3201 5.89331C14.6578 5.89331 14.129 5.35998 14.129 4.7022C14.129 4.04442 14.6623 3.51109 15.3201 3.51109C15.9778 3.51109 16.5112 4.04442 16.5112 4.7022ZM19.8937 5.9114C19.8182 4.31584 19.4537 2.90251 18.2848 1.73806C17.1204 0.573618 15.7071 0.209174 14.1115 0.129174C12.4671 0.0358402 7.53817 0.0358402 5.89373 0.129174C4.30262 0.204729 2.88928 0.569174 1.72039 1.73362C0.551504 2.89806 0.191504 4.3114 0.111504 5.90695C0.0181706 7.5514 0.0181706 12.4803 0.111504 14.1247C0.187059 15.7203 0.551504 17.1336 1.72039 18.2981C2.88928 19.4625 4.29817 19.827 5.89373 19.907C7.53817 20.0003 12.4671 20.0003 14.1115 19.907C15.7071 19.8314 17.1204 19.467 18.2848 18.2981C19.4493 17.1336 19.8137 15.7203 19.8937 14.1247C19.9871 12.4803 19.9871 7.55584 19.8937 5.9114Z\"\n        fill=\"white\"\n      />\n    </mask>\n    <g mask=\"url(#mask0)\">\n      <rect width=\"20\" height=\"20\" fill=\"black\" />\n    </g>\n    <path\n      d=\"M19 14C15.6864 14 13 16.6863 13 20C13 23.3137 15.6864 26 19 26C22.3139 26 25 23.3137 25 20C25 16.6863 22.3138 14 19 14ZM17.8994 23.0821L15.2574 20.4403L16.138 19.5597L17.8994 21.3209L21.862 17.3582L22.7426 18.2388L17.8994 23.0821Z\"\n      fill=\"#6AC259\"\n    />\n  </svg>\n);","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\nimport { useParams, useHistory } from 'react-router-dom';\n\nimport {\n  getPassportTickets,\n  getParticipatingSeller,\n  sendRedeemTicketsEmail,\n  getContactInfo,\n} from '../../utilities/api/interactionManager';\nimport {\n  CardContainer,\n  TitleRow,\n  Title,\n  SubTitle,\n  Button\n} from './style';\n\nimport TicketRow from './TicketRow';\nimport FAQ from './Faq';\n\nimport PassportDashboardBackground from './PassportDashboardBackground.png';\nimport PassportIconImg from './passportIcon.png';\nimport CircleLogo from './CircleLogo.png';\nimport InstagramDisabled from './InstagramDisabled';\nimport InstagramEnabled from './InstagramEnabled';\n\n\ninterface Props {\n  setCurrentScreenView: Function;\n}\n\nconst Passport = (props: Props) => {\n  const { id } = useParams();\n  const { push, location } = useHistory();\n  const [showFaq, setShowFaq] = useState(false);\n  const [showInstagram, setShowInstagram] = useState(false);\n  const [showEmailSent, setShowEmailSent] = useState(false);\n  const [tickets, setTickets] = useState<any[]>([]);\n\n  useEffect(() => {\n    if (location.hash === '#faq') {\n      setShowFaq(true);\n    } else {\n      setShowFaq(false);\n    }\n  }, [location]);\n\n  useEffect(() => {\n    if (id) {\n      getContactInfo(id)\n        .then((contactInfo) => {\n          setShowInstagram(contactInfo.data.instagram);\n          return getPassportTickets(id);\n        })\n        .then((ticketIds) => {\n          let promises: any[] = [];\n          ticketIds.data.forEach((ticket) => {\n            promises.push(\n              getParticipatingSeller(ticket.participating_seller_id).then(\n                (seller) => ({\n                  stamp_url: seller.data.stamp_url,\n                  ...ticket,\n                })\n              )\n            );\n          });\n\n          return Promise.all(promises);\n        })\n        .then((passportTickets) => {\n          if (passportTickets.length > 0) {\n            const sortedTickets = passportTickets.sort((a, b) => {\n              const dateA = new Date(a.associated_with_contact_at);\n              const dateB = new Date(b.associated_with_contact_at);\n\n              return dateB.getTime() - dateA.getTime();\n            });\n\n            setTickets(sortedTickets.reverse());\n          }\n        })\n        .catch((err) => {\n          console.log('passport error: ' + err);\n        });\n    }\n  }, [id]);\n\n  const createTicketRows = (tickets) => {\n    let rows: any[] = [];\n\n    if (tickets.length > 0) {\n      // make a temp ticket that sorts the tickets by sponsor seller, then redemption date\n      let tempTickets = [...tickets];\n\n      // push the stamps to rows of 3, if there arent 3, then push the left over amount\n      while (tempTickets.length) {\n        rows.push(tempTickets.splice(0, 3));\n      }\n    }\n\n    // if there are less than 6 rows, make 6 rows, other wise make one extra row\n    if (rows.length < 6) {\n      while (rows.length < 6) {\n        rows.push([]);\n      }\n    } else {\n      rows.push([]);\n    }\n\n    return rows;\n  };\n\n  const sendEmail = () => {\n    sendRedeemTicketsEmail(id).then((res) => {\n      setShowEmailSent(true);\n    });\n  };\n\n  const createRows = (stamps) => {\n    const rows = createTicketRows(stamps);\n    return (\n      <TableContainer>\n        <Table>\n          <tbody>\n            {rows.map((row, index) => (\n              <TicketRow\n                stamps={row}\n                index={index}\n                key={index}\n                sendEmail={sendEmail}\n              />\n            ))}\n          </tbody>\n        </Table>\n      </TableContainer>\n    );\n  };\n\n  const addTicket = (e) => {\n    e.preventDefault();\n    push('/passport');\n  };\n\n  return (\n    <Container>\n      <HeaderContainer>\n        <RedirectionLinks href=\"https://www.sendchinatownlove.com/food-crawl.html\" target=\"_blank\">\n          Learn More\n        </RedirectionLinks>\n        <Logo src={CircleLogo} alt=\"scl-log\" />\n        <RedirectionLinks href=\"mailto:hello@sendchinatownlove.com\">\n          contact us\n        </RedirectionLinks>\n      </HeaderContainer>\n      <BodyContainer>\n        <FAQ\n          showFaq={showFaq}\n          toggleView={() => push(location.pathname + '#faq')}\n        />\n        <PassportContainer\n          mainView={!showFaq}\n          onClick={() => push(location.pathname)}\n        >\n          <TitleRow>\n            <Title color={showFaq ? 'grey' : 'black'}>PASSPORT TO CHINATOWN</Title>\n            {showFaq ? (\n              <>\n                <br />\n                <br />\n                <br />\n              </>\n            ) : (\n              <>\n                <SubHeader color={showFaq ? 'transparent' : 'black'}>\n                  {showInstagram\n                    ? 'INSTAGRAM FOR GIVEAWAY ADDED'\n                    : '9/1/2020 - 9/30/2020'}\n                </SubHeader>\n                <Icon>\n                  {showInstagram ? (\n                    <InstagramEnabled />\n                  ) : (\n                    <InstagramDisabled />\n                  )}\n                </Icon>\n              </>\n            )}\n          </TitleRow>\n\n          {showEmailSent && (\n            <SendEmailContainer>\n              <PassportIcon src={PassportIconImg} />\n              <TitleRow>\n                <Title>REWARD EMAIL SENT</Title>\n                <SubTitle bold=\"700\">\n                  Check your inbox shortly for a link to access your available\n                  rewards!\n                  <br />\n                  <br />\n                  This link will expire in 30 minutes.\n                </SubTitle>\n              </TitleRow>\n              <SendEmailButtonClose\n                className=\"button--red-filled\"\n                onClick={(e) => setShowEmailSent(false)}\n              >\n                CLOSE\n              </SendEmailButtonClose>\n            </SendEmailContainer>\n          )}\n          {!showFaq && createRows(tickets)}\n        </PassportContainer>\n      </BodyContainer>\n      {!showFaq && (\n        <AddNewTicket className=\"button--filled\" onClick={addTicket}>\n          Add New Ticket\n        </AddNewTicket>\n      )}\n    </Container>\n  );\n};\n\nexport default Passport;\n\nconst Container = styled.div`\n  position: relative;\n  width: 375px;\n  hidden: 100vh;\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst PassportContainer = styled(CardContainer)`\n  background-size: 400px;\n  background-image: url(${PassportDashboardBackground});\n  max-height: 650px;\n`;\n\nconst SubHeader = styled(SubTitle)`\n  font-style: italic;\n`;\n\nconst HeaderContainer = styled.div`\n  width: 100%;\n  height: 100px;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  margin: 12px auto;\n`;\nconst RedirectionLinks = styled.a`\n  text-transform: uppercase;\n  color: black;\n  font-weight: bold;\n  letter-spacing: 0.15em;\n  font-size: 12px;\n`;\n\nconst Logo = styled.img`\n  width: 100px;\n  height: 100px;\n  filter: drop-shadow(0 0mm 2px #cdcdcd);\n`;\n\nconst BodyContainer = styled.div`\n  width: 375px;\n  position: relative;\n  display: flex;\n  justify-content: center;\n`;\n\nconst TableContainer = styled.div`\n  width: 100%;\n  overflow: auto;\n  height: calc(100vh - 300px);\n`;\n\nconst Table = styled.table`\n  width: 100%;\n  border-collapse: collapse;\n  border-spacing: 0;\n  font-size: 12px;\n`;\n\nconst AddNewTicket = styled(Button)`\n  position: fixed;\n  margin-left: -150px;\n  bottom: 0;\n  left: 50%;\n  width: 300px;\n  z-index: 100;\n  font-weight: bold;\n`;\n\nconst SendEmailContainer = styled.div`\n  position: absolute;\n  width: 340px;\n  margin: 0 auto;\n  height: 260px;\n  z-index: 20;\n  top: 70px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  align-items: center;\n\n  background: #f2eae8;\n  box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.25);\n  backdrop-filter: blur(4px);\n`;\n\nconst PassportIcon = styled.img`\n  width: 59px;\n  height: 76px;\n`;\n\nconst SendEmailButtonClose = styled(Button)`\n  height: 32px;\n  width: 115px;\n  margin: 0 auto;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  text-transform: uppercase;\n`;\n\nconst Icon = styled.div`\n  position: absolute;\n  right: 10px;\n  text-decoration: none;\n  color: black;\n  padding: 10px 15px;\n  font-size: 22px;\n`;\n","import React, { useState, useEffect } from 'react';\nimport styled from 'styled-components';\n\nimport TrackScreen from './TrackScreen';\nimport RedemptionSelectScreen from './RedemptionSelectScreen';\nimport RedemptionClaimScreen from './RedemptionClaimScreen';\n\nimport ScreenName from './ScreenName';\nimport PassportScreen from './Passport';\nimport CrawlMap from './CrawlMap.png';\nimport { useHistory } from 'react-router-dom';\n\ninterface Props {\n  screen: ScreenName;\n}\n\nconst PassportRedemption = (props: Props) => {\n  const { location } = useHistory();\n  const [currentScreenView, setCurrentScreenView] = useState<ScreenName>(\n    props.screen\n  );\n\n  useEffect(() => {\n    if (location.pathname === '/passport') {\n      setCurrentScreenView(ScreenName.Track);\n    } else if (location.pathname.includes('/tickets')) {\n      setCurrentScreenView(ScreenName.Dashboard);\n    }\n  }, [location.pathname]);\n\n  const showCurrentScreen = (screen) => {\n    // TODO: Update case #s when all screens are built out\n    // NOTE: not sure if this is the right flow,\n    // but currently set up like this for now for ease of editing\n    switch (screen) {\n      case ScreenName.Redemption:\n        return (\n          <RedemptionSelectScreen setCurrentScreenView={setCurrentScreenView} />\n        );\n      case ScreenName.Track:\n        return <TrackScreen setCurrentScreenView={setCurrentScreenView} />;\n      case ScreenName.Dashboard:\n        return <PassportScreen setCurrentScreenView={setCurrentScreenView} />;\n      case ScreenName.Claim:\n        return (\n          <RedemptionClaimScreen setCurrentScreenView={setCurrentScreenView} />\n        );\n      default:\n        return <TrackScreen setCurrentScreenView={setCurrentScreenView} />;\n    }\n  };\n\n  return <Container>{showCurrentScreen(currentScreenView)}</Container>;\n};\n\nexport default PassportRedemption;\n\nconst Container = styled.div`\n  background-color: #e5e5e5;\n  min-height: 100vh;\n  background-image: url(${CrawlMap});\n  width: 100%;\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  @media (max-width: 475px) {\n    background-size: 500px;\n  }\n`;\n"],"sourceRoot":""}