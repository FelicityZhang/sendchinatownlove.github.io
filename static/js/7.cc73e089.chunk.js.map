{"version":3,"sources":["utilities/api/endpoints.ts","utilities/api/interactionManager.ts","utilities/api/index.ts","utilities/index.ts","utilities/general/responsive.tsx","components/MerchantsPage/gam/styles.module.scss","components/MerchantsPage/images/illustrated_flatlay_hero.png","components/MerchantsPage/images/gam_icon_step1.svg","components/MerchantsPage/images/gam_icon_step2.svg","components/MerchantsPage/images/gam_icon_step3.svg","components/MerchantsPage/images/gam_icon_step4.svg","components/MerchantsPage/images/campaign_default.png","components/MerchantsPage/gam/CampaignProgressBar.tsx","components/MerchantsPage/gam/CampaignListItem.tsx","components/MerchantsPage/gam/VideoComponent.tsx","components/MerchantsPage/gam/GiftAMealPage.tsx"],"names":["baseUrl","process","sellers","charges","vouchers","getSellers","lang","a","axios","get","params","locale","localeFromLanguage","getSeller","id","makeSquarePayment","nonce","sellerId","payment","buyer","isDistribution","email","name","idempotencyKey","idempotency_key","isSubscribed","is_subscribed","post","is_square","line_items","seller_id","is_distribution","headers","then","res","catch","err","getVoucher","updateVoucher","amount","put","getMerchantGiftCards","secret","language","getCampaigns","getDistributor","smallScreens","tabletScreens","module","exports","CampaignProgressBar","raised","target","isActive","numContributions","targetAmount","progressBarColor","lastContributionTime","endDate","t","useTranslation","progressPercent","Math","floor","timeUntilEnd","getTime","Date","now","daysUntilEnd","timeSinceLastContribution","ProgressBarContainer","TimeStamp","minutesSinceLastConstribution","hoursSinceLastContribution","daysSinceLastContribution","lastContributionTimeAsPresentable","TargetAmountBar","className","CurrentProgressBar","style","width","backgroundColor","ProgressTextContainer","color","ceil","styled","div","span","props","CampaignListItem","useState","distributor","setDistributor","merchant","setMerchant","campaign","fetchData","distributor_id","distributorData","merchantData","data","useEffect","mealsRaised","amount_raised","price_per_meal","targetMeals","target_amount","campaignImageUrls","gallery_image_urls","Container","ColumnContainer","length","src","campaignDefaultImage","alt","locations","Location","city","Name","Description","description","href","website_url","active","last_contribution","end_date","ImagesContainer","image_url","margin","logo_image_url","Button","onClick","e","preventDefault","window","location","VideoComponent","videoId","size","height","windowSize","setWindowSize","handleResize","innerWidth","innerHeight","addEventListener","removeEventListener","useWindowSize","min","opts","toString","playerVars","autoplay","generateStep","GiftAMealPage","activeCampaigns","setActiveCampaigns","pastCampaigns","setPastCampaigns","campaignData","filter","valid","past","styles","container","display","menuOpen","header","illustrated_flatlay_hero","hero","main","fontWeight","sub","instructions","gam_icon_step1","gam_icon_step2","gam_icon_step3","gam_icon_step4","map","idx","text","icon","backButton","campaignHeader","videoContainer","videoDescription","n","step","key","stepText"],"mappings":"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","file":"static/js/7.cc73e089.chunk.js","sourcesContent":["const baseUrl = process.env.REACT_APP_API_ENDPOINT!;\n\nexport const sellers = baseUrl + 'sellers/';\nexport const charges = baseUrl + 'charges';\nexport const vouchers = baseUrl + 'gift_cards/';\nexport const campaigns = baseUrl + 'campaigns/';\nexport const distributors = baseUrl + 'distributors/';\n","import axios from 'axios';\nimport { CardElement } from '@stripe/react-stripe-js';\nimport { Buyer, PaymentParams, SquareLineItems } from './types';\nimport { charges, sellers, vouchers, campaigns, distributors } from './endpoints';\n\n// Fix return typing\nexport const getSellers = async (lang?: string): Promise<any> => {\n  return await axios.get(sellers, {\n    params: { locale: localeFromLanguage(lang) },\n  });\n};\n\n// Fix return typing\nexport const getSeller = async (id: string, lang?: string): Promise<any> => {\n  return await axios.get(sellers + id, {\n    params: { locale: localeFromLanguage(lang) },\n  });\n};\n\n// TODO(ArtyEmsee): add typing for stripe elements\nexport const makePayment = async (\n  stripe: any,\n  elements: any,\n  payment: PaymentParams,\n  buyer: Buyer\n) => {\n  const { email, name } = buyer;\n\n  // TODO(ArtyEmsee): abstract api call, create global object for headers\n  await axios\n    .post(\n      charges,\n      {\n        is_square: false,\n        line_items: [payment],\n        email: email,\n      },\n      { headers: { 'Access-Control-Allow-Origin': '*' } }\n    )\n    .then(async (res) => {\n      // TODO(ArtyEmsee): fix response to success\n      if (!stripe || !elements) return;\n      else {\n        const cardElement = elements!.getElement(CardElement);\n        const result = await stripe!.confirmCardPayment(\n          `${res.data.client_secret}`,\n          {\n            payment_method: {\n              card: cardElement!,\n              billing_details: {\n                name: name,\n                email: email,\n              },\n            },\n          }\n        );\n\n        if (result.error) {\n          console.log(result.error.message);\n        } else {\n          if (result.paymentIntent?.status === 'succeeded') {\n            console.log(\n              result.paymentIntent?.status,\n              'The payment has been processed!'\n            );\n          }\n        }\n      }\n    });\n\n  // TODO(ArtyEmsee): fix response to error\n};\n\nexport const makeSquarePayment = async (\n  nonce: string,\n  sellerId: string,\n  payment: SquareLineItems,\n  buyer: Buyer,\n  isDistribution: boolean\n) => {\n  const { email, name } = buyer;\n  const idempotencyKey = buyer.idempotency_key;\n  const isSubscribed = buyer.is_subscribed;\n\n  return await axios\n    .post(\n      charges,\n      {\n        is_square: true,\n        nonce,\n        line_items: payment,\n        email,\n        name,\n        seller_id: sellerId,\n        idempotency_key: idempotencyKey,\n        is_subscribed: isSubscribed,\n        is_distribution: isDistribution,\n      },\n      { headers: { 'Access-Control-Allow-Origin': '*' } }\n    )\n    .then(async (res) => {\n      return res;\n    })\n    .catch((err) => {\n      throw err;\n    });\n};\n\nexport const getVoucher = async (id: string) =>\n  axios\n    .get(vouchers + id)\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const updateVoucher = async (id: string, amount: number) =>\n  axios\n    .put(vouchers + id, { amount })\n    .then((res) => res)\n    .catch((err) => err);\n\nexport const getMerchantGiftCards = async (seller_id: string, secret: string) =>\n  axios.get(sellers + seller_id + '/gift_cards/' + secret).then((res) => res); // don't catch error, throw it up the stack\n\nfunction localeFromLanguage(language?: string) {\n  switch (language) {\n    case 'cn':\n      return 'zh-CN';\n    case 'en':\n    default:\n      return 'en';\n  }\n}\n\nexport const getCampaigns = async (): Promise<any> => {\n  return await axios.get(campaigns);\n};\n\nexport const getDistributor = async (id: string): Promise<any> => {\n  return await axios.get(distributors + id)\n    .then((res) => res)\n    .catch((err) => err);\n}\n","export * from './types';\nexport * from './interactionManager';\n","export * from './api';\nexport * from './hooks';\n","/*\n * Responsive screen sizes\n */\nconst phoneScreens = 'max-width: 450px';\nconst smallScreens = 'max-width: 599px';\nconst tabletScreens = 'max-width: 899px';\nconst desktopScreens = 'max-width: 1299px';\nconst bigDesktopScreens = 'min-width: 1300px';\n\nexport {\n  phoneScreens,\n  smallScreens,\n  tabletScreens,\n  desktopScreens,\n  bigDesktopScreens,\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button--filled\":\"styles_button--filled__1Q_a1\",\"button--red-filled\":\"styles_button--red-filled__30C9L\",\"button--outlined\":\"styles_button--outlined__T1S4e\",\"button--redfilled\":\"styles_button--redfilled__1aPRb\",\"modalButton--back\":\"styles_modalButton--back__SqQbc\",\"modalButton--outlined\":\"styles_modalButton--outlined__2rGur\",\"modalButton--filled\":\"styles_modalButton--filled__1u791\",\"modalButton--nonfunctional\":\"styles_modalButton--nonfunctional__3b7y_\",\"modalButton--selected\":\"styles_modalButton--selected__120By\",\"modalButton--outline\":\"styles_modalButton--outline__1nxQS\",\"closeButton--close\":\"styles_closeButton--close__2-Gq4\",\"modalForm--form\":\"styles_modalForm--form__1r_3v\",\"modalInput--input\":\"styles_modalInput--input__1yGue\",\"filterable-table-container\":\"styles_filterable-table-container__3yuTM\",\"header-row\":\"styles_header-row__13pcb\",\"filter-container\":\"styles_filter-container__3R7V3\",\"filter-input\":\"styles_filter-input__2pKZl\",\"clear-filter\":\"styles_clear-filter__2DOt6\",\"record-count\":\"styles_record-count__3tJgl\",\"fa\":\"styles_fa__1dVUs\",\"active\":\"styles_active__ZQhyR\",\"disabled\":\"styles_disabled__yy9aR\",\"container\":\"styles_container__3QdrG\",\"header\":\"styles_header__2e_gf\",\"main\":\"styles_main__3sUmr\",\"hero\":\"styles_hero__30ZVS\",\"sub\":\"styles_sub__2EdKv\",\"instructions\":\"styles_instructions__14KX8\",\"step\":\"styles_step__1RRvN\",\"stepText\":\"styles_stepText__sSzBp\",\"backButton\":\"styles_backButton__1XAdF\",\"campaignHeader\":\"styles_campaignHeader__trEYV\",\"videoContainer\":\"styles_videoContainer__2lfjR\",\"videoDescription\":\"styles_videoDescription__4o5jP\"};","module.exports = __webpack_public_path__ + \"static/media/illustrated_flatlay_hero.050015e1.png\";","module.exports = __webpack_public_path__ + \"static/media/gam_icon_step1.c58f05a4.svg\";","module.exports = __webpack_public_path__ + \"static/media/gam_icon_step2.9a0ca5e8.svg\";","module.exports = __webpack_public_path__ + \"static/media/gam_icon_step3.ad0c5291.svg\";","module.exports = __webpack_public_path__ + \"static/media/gam_icon_step4.b9832c02.svg\";","module.exports = __webpack_public_path__ + \"static/media/campaign_default.9ad02a20.png\";","import * as React from 'react';\nimport styled from 'styled-components';\nimport { useTranslation } from 'react-i18next';\n\ninterface Props {\n  isActive: boolean;\n  numContributions: number;\n  targetAmount: number;\n  progressBarColor: string;\n  lastContributionTime: Date;\n  endDate: Date;\n}\n\nconst CampaignProgressBar = ({\n  isActive,\n  numContributions,\n  targetAmount,\n  progressBarColor,\n  lastContributionTime,\n  endDate,\n}: Props) => {\n  const { t } = useTranslation();\n\n  // \"73% to target (73 out of 100 meals)\"\n  const progressWidth = (raised: number, target: number) => {\n    if (raised < target) return (raised / target) * 100;\n    return 100;\n  };\n  const progressPercent = Math.floor((numContributions / targetAmount) * 100);\n\n  // \"Ends in 2 days\"\n  const timeUntilEnd = endDate.getTime() - Date.now();\n  const daysUntilEnd = timeUntilEnd > 0 ? timeUntilEnd / (1000 * 3600 * 24) : 0;\n\n  // \"Last contribution made 2h ago\"\n  const timeSinceLastContribution = Date.now() - lastContributionTime.getTime();\n  const lastContributionTimeAsPresentable = (\n    timeSinceLastContribution: number\n  ) => {\n    const minutesSinceLastConstribution =\n      timeSinceLastContribution / (1000 * 60);\n    if (minutesSinceLastConstribution < 60) {\n      return `${t('buyMeal.lastContributionMade')} ${Math.floor(\n        minutesSinceLastConstribution\n      )}m ${t('buyMeal.ago')}`;\n    }\n    const hoursSinceLastContribution = minutesSinceLastConstribution / 60;\n    if (hoursSinceLastContribution < 24) {\n      return `${t('buyMeal.lastContributionMade')} ${Math.floor(\n        hoursSinceLastContribution\n      )}h ${t('buyMeal.ago')}`;\n    }\n    const daysSinceLastContribution = hoursSinceLastContribution / 24;\n    return `${t('buyMeal.lastContributionMade')} ${Math.floor(\n      daysSinceLastContribution\n    )}d ${t('buyMeal.ago')}`;\n  };\n\n  return (\n    <ProgressBarContainer>\n      <TimeStamp>\n        {lastContributionTimeAsPresentable(timeSinceLastContribution)}\n      </TimeStamp>\n      <TargetAmountBar className=\"progress-bar\">\n        <CurrentProgressBar\n          style={{\n            width: `${progressWidth(numContributions, targetAmount)}%`,\n            backgroundColor: progressBarColor,\n          }}\n        ></CurrentProgressBar>\n      </TargetAmountBar>\n      <div>\n        <ProgressTextContainer color={progressBarColor}>\n          {progressPercent}% {t('buyMeal.toTarget')}\n        </ProgressTextContainer>{' '}\n          ({numContributions} {t('buyMeal.outOf')} {targetAmount}{' '}\n        {t('buyMeal.meals')})\n        </div>\n      {isActive && (\n        <div>\n          {t('buyMeal.endsIn')}{' '}\n          <ProgressTextContainer color={progressBarColor}>\n            {Math.ceil(daysUntilEnd)}\n          </ProgressTextContainer>{' '}\n          {t('buyMeal.days')}\n        </div>\n      )}\n    </ProgressBarContainer>\n  );\n};\n\nexport default CampaignProgressBar;\n\nconst ProgressBarContainer = styled.div`\n  width: 100%;\n  padding: 15px 0;\n`;\n\nconst ProgressTextContainer = styled.span`\n  font-family: Open Sans;\n  font-style: normal;\n  font-weight: 600;\n  font-size: 14px;\n  line-height: 22px;\n  color: ${(props) => props.color};\n`;\n\nconst TargetAmountBar = styled.div`\n  background-color: #dedede;\n  height: 12px;\n  margin-bottom: 15px;\n`;\n\nconst CurrentProgressBar = styled.div`\n  background-color: #dd678a;\n  height: 12px;\n`;\n\nconst TimeStamp = styled.div`\n  font-family: Open Sans;\n  font-style: normal;\n  font-weight: normal;\n  font-size: 13px;\n  line-height: 18px;\n  letter-spacing: 0.02em;\n  color: #9e9e9e;\n  margin-bottom: 10px;\n`;\n","import React from 'react';\nimport CampaignProgressBar from './CampaignProgressBar';\nimport styled from 'styled-components';\nimport {\n  tabletScreens\n} from '../../../utilities/general/responsive';\nimport campaignDefaultImage from '../images/campaign_default.png';\nimport { Campaign } from '../../../utilities/api/types';\nimport { getDistributor, getSeller } from '../../../utilities';\nimport { useEffect, useState } from 'react';\n\ninterface Props {\n  campaign: Campaign;\n}\n\nconst CampaignListItem = (props: Props) => {\n  const [distributor, setDistributor] = useState<any | null>();\n  const [merchant, setMerchant] = useState<any | null>();\n  const campaign = props.campaign;\n\n  const fetchData = async () => {\n    const distributorData = await getDistributor(campaign.distributor_id);\n    const merchantData = await getSeller(campaign.seller_id);\n    setDistributor(distributorData.data);\n    setMerchant(merchantData.data);\n  };\n\n  useEffect(() => {\n    fetchData();\n    // eslint-disable-next-line\n  }, []);\n\n  const mealsRaised = Math.floor(campaign.amount_raised / campaign.price_per_meal);\n  const targetMeals = Math.floor(campaign.target_amount / campaign.price_per_meal);\n  const campaignImageUrls = campaign.gallery_image_urls;\n\n  return (\n    <Container>\n      <ColumnContainer>\n        {campaignImageUrls && campaignImageUrls.length && (\n          <img src={campaignImageUrls[0] ?? campaignDefaultImage} alt=\"campaign_image\" />\n        )}\n      </ColumnContainer>\n      <ColumnContainer>\n        {merchant && merchant.locations && merchant.locations.length && (\n          <Location>{merchant.locations[0].city}</Location>\n        )}\n        {distributor && merchant && (\n          <Name>{merchant.name} x {distributor.name}</Name>\n        )}\n        <Description>\n          {campaign.description}\n          <br></br>\n          {distributor &&\n            (<a href={distributor.website_url}>{distributor.name}</a>)\n          }\n        </Description>\n        <CampaignProgressBar\n          isActive={campaign.active}\n          numContributions={mealsRaised}\n          targetAmount={targetMeals}\n          progressBarColor={'#CF6E8A'}\n          lastContributionTime={new Date(campaign.last_contribution)}\n          endDate={new Date(campaign.end_date)}\n        />\n      </ColumnContainer>\n      <ColumnContainer>\n        <ImagesContainer>\n          {distributor &&\n            (<a href={distributor.website_url}>\n              <img src={distributor.image_url} style={{ margin: '0 15px' }} alt=\"distributor_logo\" />\n            </a>\n            )\n          }\n          {merchant &&\n            (<img src={merchant.logo_image_url} alt=\"merchant_logo\" />)\n          }\n        </ImagesContainer>\n        {merchant && (\n          <Button className=\"button--filled\" onClick={(e) => {\n            e.preventDefault();\n            window.location.href = '/' + merchant.seller_id;\n          }}>Visit merchant</Button>\n        )}\n        {campaign.active && (\n          <Button className={'button--outlined'}>Gift a meal</Button>\n        )}\n      </ColumnContainer>\n    </Container >\n  );\n};\n\nexport default CampaignListItem;\n\nconst Container = styled.div`\n  border-bottom: 1px solid #e5e5e5;\n  display: flex;\n  max-height: 350px;\n  margin: 35px 0 55px;\n  justify-content: space-between;\n\n  @media (${tabletScreens}) {\n    max-height: 600px;\n    flex-direction: column;\n    margin: 0 17px;\n    position: relative;\n    padding-top: 15px;\n  }\n`;\n\nconst ColumnContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  padding: 1rem 2rem 1.5rem;\n\n  @media (${tabletScreens}) {\n    padding: 0.5rem 1rem 0.75rem;\n\n    > span {\n      margin: 2.5px 0;\n    }\n\n    > button {\n      width: 100%;\n    }\n\n    > img {\n      height: 103px;\n      object-fit: cover;\n      object-position: 0 25%;\n    }\n  }\n`;\n\nconst Location = styled.div`\n  font-family: Open Sans;\n  font-style: normal;\n  font-weight: 600;\n  font-size: 15px;\n  line-height: 20px;\n  letter-spacing: 0.02em;\n  color: #1e7c9a;\n  margin-bottom: 15px;\n\n  @media (${tabletScreens}) {\n    font-size: 14px;\n    margin-bottom: 10px;\n  }\n`;\n\nconst Name = styled.div`\n  font-family: Open Sans;\n  font-style: normal;\n  font-weight: bold;\n  font-size: 16px;\n  line-height: 22px;\n  letter-spacing: 0.02em;\n  color: #000000;\n  margin-bottom: 18px;\n\n  @media (${tabletScreens}) {\n    margin-bottom: 10px;\n    width: 70%;\n  }\n`;\n\nconst Description = styled.div`\n  font-family: Open Sans;\n  font-style: normal;\n  font-weight: normal;\n  font-size: 15px;\n  line-height: 20px;\n  letter-spacing: 0.02em;\n  color: #1e1e1e;\n  margin-bottom: 20px;\n\n  @media (${tabletScreens}) {\n    font-size: 14px;\n    margin-bottom: 10px;\n  }\n`;\n\nconst Button = styled.div`\n  text-align: center;\n  width: 240px;\n  letter-spacing: 0.15em;\n  cursor: pointer;\n  margin-bottom: 18px;\n  font-family: 'Open Sans', 'Helvetica Neue', sans-serif;\n  font-weight: 700;\n  font-size: 16px;\n  letter-spacing: 0.05em;\n\n  @media (max-width: 550px) {\n    font-size: 14px;\n    width: 100%;\n    margin-bottom: 10px;\n  }\n`;\n\nconst ImagesContainer = styled.span`\n  align-self: right;\n  margin-bottom: 60px;\n  align-self: flex-end;\n\n  @media (${tabletScreens}) {\n    position: absolute;\n    top: 132px;\n    margin-bottom: 30px;\n\n    img {\n      height: 25px;\n    }\n  }\n`;\n","import React from 'react';\nimport { useState, useEffect } from 'react';\nimport YouTube from 'react-youtube';\nimport { Options } from 'react-youtube';\n\ninterface Props {\n  videoId: string;\n}\n\nconst VideoComponent = ({ videoId }: Props) => {\n  // https://usehooks.com/useWindowSize/\n  const useWindowSize = () => {\n    const [windowSize, setWindowSize] = useState({\n      width: 0,\n      height: 0,\n    });\n\n    useEffect(() => {\n      function handleResize() {\n        setWindowSize({\n          width: window.innerWidth,\n          height: window.innerHeight,\n        });\n      }\n\n      window.addEventListener('resize', handleResize);\n      handleResize();\n\n      return () => window.removeEventListener('resize', handleResize);\n    }, []);\n\n    return windowSize;\n  };\n\n  const size = useWindowSize();\n  const width = Math.min(size.width * 0.8, 1200);\n  const height = width / 2;\n  const opts: Options = {\n    height: height.toString(),\n    width: width.toString(),\n    playerVars: {\n      autoplay: 0,\n    },\n  };\n\n  return <YouTube videoId={videoId} opts={opts} />;\n};\n\nexport default VideoComponent;\n","import React from 'react';\nimport { useEffect, useState } from 'react';\nimport styles from './styles.module.scss';\nimport { getCampaigns } from '../../../utilities';\n\nimport illustrated_flatlay_hero from '../images/illustrated_flatlay_hero.png';\nimport gam_icon_step1 from '../images/gam_icon_step1.svg';\nimport gam_icon_step2 from '../images/gam_icon_step2.svg';\nimport gam_icon_step3 from '../images/gam_icon_step3.svg';\nimport gam_icon_step4 from '../images/gam_icon_step4.svg';\nimport CampaignListItem from './CampaignListItem';\nimport VideoComponent from './VideoComponent';\n\ninterface Props {\n  menuOpen: boolean;\n}\n\nconst GiftAMealPage = (props: Props) => {\n  const [activeCampaigns, setActiveCampaigns] = useState([]);\n  const [pastCampaigns, setPastCampaigns] = useState([]);\n\n  const fetchData = async () => {\n    const campaignData = await getCampaigns();\n    const active = campaignData.data.filter(\n      (campaign: any) => campaign.active && campaign.valid\n    );\n    setActiveCampaigns(active);\n    const past = campaignData.data.filter((campaign: any) => !campaign.active);\n    setPastCampaigns(past);\n  };\n\n  useEffect(() => {\n    fetchData();\n    // eslint-disable-next-line\n  }, []);\n\n  return (\n    <div\n      className={styles.container}\n      style={{ display: props.menuOpen ? 'none' : 'inherit' }}\n    >\n      <div className={styles.header}>\n        <img\n          src={illustrated_flatlay_hero}\n          className={styles.hero}\n          alt=\"meal overlay illustration\"\n        />\n        <div className={styles.main}>\n          <div>\n            <h3 style={{ fontWeight: 'bolder' }}>Gift a Meal</h3>\n            <p>\n              Double the impact of your donation by gifting meals from our\n              merchants to local organizations that will distribute your gifted\n              meals to our community in need.\n            </p>\n          </div>\n        </div>\n        <div className={styles.sub}>\n          <div className={styles.instructions}>\n            {[\n              ['Donate to Gift-a-Meal', gam_icon_step1],\n              [\n                '100% of donations still go directly to our merchants',\n                gam_icon_step2,\n              ],\n              [\n                'Vouchers are donated to our community parnters',\n                gam_icon_step3,\n              ],\n              ['Partners distribute to individuals in need', gam_icon_step4],\n            ].map(([text, icon], idx) => generateStep(idx + 1, text, icon))}\n          </div>\n        </div>\n      </div>\n      <br />\n      <button\n        className={styles.backButton}\n        onClick={(e) => {\n          e.preventDefault();\n          window.location.href = '/all';\n        }}\n      >\n        Back to merchants\n      </button>\n      <h5 className={styles.campaignHeader}>Active Gift-a-Meal</h5>\n      {activeCampaigns.map((campaign: any) => (\n        <CampaignListItem campaign={campaign} />\n      ))}\n\n      <div className={styles.videoContainer}>\n        <VideoComponent videoId=\"FYlUOhzYlRM\"></VideoComponent>\n        <h5 className={styles.videoDescription}>Watch how we bring impact to our communties through Gift-a-Meal.</h5>\n      </div>\n\n      <h5 className={styles.campaignHeader}>Past Gift-a-Meal</h5>\n      {pastCampaigns.map((campaign: any) => (\n        <CampaignListItem campaign={campaign} />\n      ))}\n    </div >\n  );\n};\n\nexport default GiftAMealPage;\n\nconst generateStep = (n, text, icon) => {\n  return (\n    <div className={styles.step} key={n}>\n      <img src={icon} alt=\"icon\" />\n      <div className={styles.stepText}>\n        <p>Step {n}</p>\n        <p>{text}</p>\n      </div>\n    </div>\n  );\n};\n"],"sourceRoot":""}